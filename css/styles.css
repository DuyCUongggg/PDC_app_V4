/* Notes toggle buttons placement and active style */
.notes-toggle { display:flex; gap:8px; justify-content:flex-start; align-items:center; width:100%; }
.notes-toggle .btn { border-radius:999px; padding:6px 14px; font-weight:600; }
.notes-toggle .btn.active { background: var(--primary); color:#fff; border-color: var(--primary); }
.dark .notes-toggle .btn.active { background:#3b82f6; border-color:#3b82f6; }
/* Notes header cleanup */
.notes-card .card-header { background: transparent !important; border: none !important; box-shadow: none !important; padding: 0; margin: 0 0 2px 0; display:none; }
.notes-card .card-header .card-subtitle { display: none; }
.notes-card .card-header .btn.btn-outline { border-radius: 999px; }

/* Notes list area - remove all frames except each note card */
.notes-card { background: transparent !important; border: none !important; box-shadow: none !important; }
.notes-card .card-content { background: transparent !important; border: none !important; box-shadow: none !important; padding-top: 0; }
.notes-card .notes-list { background: transparent !important; border: none !important; box-shadow: none !important; }
.notes-card .notes-header { background: transparent !important; border: none !important; box-shadow: none !important; margin: 0; }
.notes-card #notesList { background: transparent !important; border: none !important; box-shadow: none !important; }
/* remove minimal list styles (rolled back) */
.notes-masonry { 
    transition: opacity 0.3s ease;
    opacity: 0;
    animation: masonryFadeIn 0.4s ease forwards;
}

/* Masonry layout with CSS columns */
.notes-masonry {
    column-count: 2 !important;
    column-gap: 16px !important;
    break-inside: avoid;
}

.notes-masonry .note-cardv3 {
    break-inside: avoid;
    margin-bottom: 16px;
    width: 100%;
    display: block;
}

@keyframes masonryFadeIn {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Disable animations during filtering to prevent shaking */
.notes-masonry.filtering {
    transition: none !important;
    animation: none !important;
}

.notes-masonry.filtering .note-cardv3 {
    transition: none !important;
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
}
@media (max-width: 640px){ .notes-masonry { grid-template-columns: 1fr; } }
.note-cardv3 { 
    width:100%; 
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.4));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px; 
    overflow:hidden; 
    display:flex; 
    flex-direction:column; 
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    opacity: 1;
    transform: translateY(0);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    position: relative;
}

/* Removed top accent bar */

@keyframes noteFadeIn {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
.dark .note-cardv3 { 
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    backdrop-filter: blur(10px);
    border-color: rgba(255, 255, 255, 0.1);
    color: #e2e8f0;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.note-cardv3:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
    border-color: rgba(59, 130, 246, 0.3);
}

.dark .note-cardv3:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.4);
    border-color: rgba(59, 130, 246, 0.4);
}

/* Note type specific styling - Light Design */
.note-cardv3.note-info { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.04));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(59, 130, 246, 0.2);
    box-shadow: 0 4px 16px rgba(59, 130, 246, 0.08);
}

/* Removed note-pending styling - pending cards should have no special colors */
.dark .note-cardv3.note-info { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
    backdrop-filter: blur(10px);
    border-color: rgba(59, 130, 246, 0.3);
    box-shadow: 0 4px 16px rgba(59, 130, 246, 0.1);
}

/* Removed dark mode note-pending styling - pending cards should have no special colors */

.note-cardv3.note-completed { 
    background: linear-gradient(135deg, rgba(107, 114, 128, 0.08), rgba(107, 114, 128, 0.04));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(107, 114, 128, 0.2);
    box-shadow: 0 4px 16px rgba(107, 114, 128, 0.08);
    opacity: 0.8;
}

.dark .note-cardv3.note-completed { 
    background: linear-gradient(135deg, rgba(107, 114, 128, 0.1), rgba(107, 114, 128, 0.05));
    backdrop-filter: blur(10px);
    border-color: rgba(107, 114, 128, 0.3);
    box-shadow: 0 4px 16px rgba(107, 114, 128, 0.1);
}
.v3-head { 
    display:flex; 
    align-items:flex-start; 
    justify-content:space-between; 
    padding:10px 14px 10px 14px; 
    gap: 8px;
    position: relative;
}
.v3-code { font-weight:700; color:#0f172a; }
.dark .v3-code { color:#e2e8f0; }
.v3-status { 
    font-size:11px; 
    font-weight:600; 
    padding:6px 12px; 
    border-radius:20px; 
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    white-space: nowrap;
    max-width: fit-content;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}
.v3-status.active { 
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.25), rgba(16, 185, 129, 0.15)); 
    color: #047857; 
    border: 1px solid rgba(16, 185, 129, 0.4);
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
}
.v3-status.done { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(59, 130, 246, 0.15)); 
    color: #1e40af; 
    border: 1px solid rgba(59, 130, 246, 0.4);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}
.v3-status.note-info { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(59, 130, 246, 0.15)); 
    color: #1e40af; 
    border: 1px solid rgba(59, 130, 246, 0.4);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}
.v3-status.note-pending { 
    background: #cbd5e1; /* slate-300 */
    color: #334155; /* slate-700 */
    border: 1px solid transparent;
    box-shadow: none;
}

.v3-status.note-completed { 
    background: linear-gradient(135deg, rgba(107, 114, 128, 0.25), rgba(107, 114, 128, 0.15)); 
    color: #6b7280; 
    border: 1px solid rgba(107, 114, 128, 0.4);
    box-shadow: 0 2px 8px rgba(107, 114, 128, 0.2);
}

/* Dark mode status badges */
.dark .v3-status.active { 
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.35), rgba(16, 185, 129, 0.2)); 
    color: #10b981; 
    border: 1px solid rgba(16, 185, 129, 0.5);
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}
.dark .v3-status.done { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(59, 130, 246, 0.2)); 
    color: #3b82f6; 
    border: 1px solid rgba(59, 130, 246, 0.5);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}
.dark .v3-status.note-info { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(59, 130, 246, 0.2)); 
    color: #3b82f6; 
    border: 1px solid rgba(59, 130, 246, 0.5);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}
.dark .v3-status.note-pending { 
    background: #2a3140; /* darker dark slate */
    color: #e2e8f0; /* slate-200 */
    border: 1px solid transparent;
    box-shadow: none;
}

.dark .v3-status.note-completed { 
    background: linear-gradient(135deg, rgba(107, 114, 128, 0.35), rgba(107, 114, 128, 0.2)); 
    color: #9ca3af; 
    border: 1px solid rgba(107, 114, 128, 0.5);
    box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
}
.v3-body { padding:12px 14px; color:#111827; line-height:1.5; min-height: 60px; flex:1; }
.dark .v3-body { color:#e5e7eb; }
.v3-foot { display:flex; justify-content:space-between; align-items:center; padding:10px 14px; }
.v3-time { font-size:12px; color:#64748b; }
.dark .v3-time { color:#94a3b8; }
.v3-link { color:#2563eb; text-decoration:none; font-size:12px; max-width:60%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.v3-title { font-weight:700; color:#0f172a; font-size:14px; max-width:60%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.dark .v3-title { color:#e2e8f0; }
/* Info card title should show full text and be more prominent */
.note-cardv3.note-info .v3-title {
  max-width:100%;
  white-space:normal;
  overflow:visible;
  text-overflow:unset;
  font-size:16px;
  line-height:1.35;
  font-weight:700;
  color:#0e1726; /* distinct from body text */
}
.dark .note-cardv3.note-info .v3-title {
  color:#f1f5f9;
}

/* Form row layout for side-by-side fields */
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
@media (max-width: 768px) { .form-row { grid-template-columns: 1fr; } }

/* Notes search styling */
.notes-search { margin-bottom: 16px; }
.search-input-group { display: flex; gap: 8px; align-items: center; }
.search-input-group .form-input { flex: 1; }

/* Note placeholder to maintain 2-column layout */
.note-placeholder { 
    width: 100%; 
    height: 0; 
    visibility: hidden; 
}
.v3-actions { display:flex; gap:8px; padding:10px 14px; }
.note-cardv3 .icon-btn { 
    border: 1px solid #e2e8f0; 
    background: #f8fafc; 
    color: #64748b;
    transition: all 0.2s ease;
    border-radius: 6px;
    padding: 6px 8px;
}
.note-cardv3 .icon-btn:hover { 
    background:#f1f5f9; 
    color: #374151;
    border-color: #cbd5e0;
}
.dark .note-cardv3 .icon-btn { 
    color: #94a3b8;
    border-color: #4b5563;
    background: #374151;
}
.dark .note-cardv3 .icon-btn:hover { 
    background:#374151; 
    color: #e5e7eb;
    border-color: #6b7280;
}

.note-cardv3 .icon-btn.delete {
    color: #ef4444;
    border-color: #fecaca;
    background: #fef2f2;
}
.note-cardv3 .icon-btn.delete:hover {
    background: #fee2e2;
    color: #dc2626;
    border-color: #fca5a5;
}
.dark .note-cardv3 .icon-btn.delete {
    color: #f87171;
    border-color: #7f1d1d;
    background: #7f1d1d;
}
.dark .note-cardv3 .icon-btn.delete:hover {
    background: #991b1b;
    color: #fca5a5;
    border-color: #991b1b;
}

.note-cardv3 .icon-btn.ok {
    color: #10b981;
    border-color: #a7f3d0;
    background: #f0fdf4;
}
.note-cardv3 .icon-btn.ok:hover {
    background: #dcfce7;
    color: #059669;
    border-color: #6ee7b7;
}
.dark .note-cardv3 .icon-btn.ok {
    color: #34d399;
    border-color: #065f46;
    background: #064e3b;
}
.dark .note-cardv3 .icon-btn.ok:hover {
    background: #047857;
    color: #6ee7b7;
    border-color: #047857;
}

/* Delete Note Modal */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: modalFadeIn 0.3s ease;
}

.modal-content {
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    max-width: 400px;
    width: 90%;
    animation: modalSlideIn 0.3s ease;
    overflow: hidden;
}

.dark .modal-content {
    background: #1e293b;
    border: 1px solid #334155;
}

.modal-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 20px 24px 16px;
    border-bottom: 1px solid #e2e8f0;
}

.dark .modal-header {
    border-bottom-color: #334155;
}

.modal-icon {
    font-size: 24px;
    width: 40px;
    height: 40px;
    background: #fef2f2;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dark .modal-icon {
    background: #7f1d1d;
}

.modal-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #111827;
}

.dark .modal-header h3 {
    color: #e2e8f0;
}

.modal-body {
    padding: 16px 24px;
}

.modal-body p {
    margin: 0 0 8px 0;
    color: #6b7280;
    line-height: 1.5;
}

.dark .modal-body p {
    color: #9ca3af;
}

.modal-warning {
    font-size: 14px;
    color: #ef4444 !important;
    font-weight: 500;
}

.dark .modal-warning {
    color: #f87171 !important;
}

.modal-footer {
    display: flex;
    gap: 12px;
    padding: 16px 24px 20px;
    justify-content: flex-end;
}

.btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #d1d5db;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-secondary:hover {
    background: #e5e7eb;
    border-color: #9ca3af;
}

.dark .btn-secondary {
    background: #374151;
    color: #e5e7eb;
    border-color: #4b5563;
}

.dark .btn-secondary:hover {
    background: #4b5563;
    border-color: #6b7280;
}

.btn-danger {
    background: #ef4444;
    color: white;
    border: 1px solid #dc2626;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-danger:hover {
    background: #dc2626;
    border-color: #b91c1c;
}

@keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes modalSlideIn {
    from { 
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to { 
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}
.dark .v3-actions { }
/* Super-compact single-line notes list */
.notes-lines { display:flex; flex-direction:column; gap:6px; }
.note-line { 
  display:grid; grid-template-columns: 110px 12px 1fr auto auto 96px; 
  gap:6px; align-items:center; 
  padding:4px 8px; border:1px solid #e6edf4; border-radius:8px; background:#fff;
}
.dark .note-line { background:var(--bg-secondary); border-color:#2a3441; }
.n-code { font-weight:700; color:#0f172a; }
.dark .n-code { color:#e2e8f0; }
.n-content { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; color:#0f172a; }
.dark .n-content { color:#e5e7eb; }
.n-meta { color:#64748b; font-size:12px; }
.n-link { color:#2563eb; text-decoration:underline; font-size:12px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.n-actions { display:flex; gap:6px; justify-content:flex-end; }
.n-btn { width:22px; height:22px; border:1px solid #e2e8f0; background:#f8fafc; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; font-size:12px; }
.n-btn.danger { background:#fee2e2; border-color:#fecaca; }
/* === Notes (compact) === */
.notes-table { width:100%; border:1px solid #e6edf4; border-radius:10px; overflow:hidden; }
.note-headerv2, .note-rowv2 { display:grid; grid-template-columns: 100px 90px 2fr 1.4fr 110px 100px; align-items:center; }
.note-headerv2 { background:#f8fafc; color:#475569; font-weight:600; font-size:12px; padding:6px 8px; border-bottom:1px solid #e6edf4; }
.note-rowv2 { padding:6px 8px; border-bottom:1px solid #edf2f7; font-size:12px; }
.note-rowv2:nth-child(even){ background:#fbfdff; }
.note-rowv2:last-child { border-bottom:none; }
.note-rowv2 .col { padding-right:8px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.note-rowv2 .status.active { color:#047857; font-weight:600; }
.note-rowv2 .status.done { color:#3730a3; font-weight:600; }
.note-rowv2 .content { white-space: normal; display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient: vertical; overflow:hidden; }
.note-rowv2 .link a { color:#2563eb; text-decoration:underline; }
.note-rowv2 .actions { display:flex; gap:6px; }
.icon-btn { background:#f1f5f9; border:1px solid #e2e8f0; border-radius:6px; padding:2px 6px; font-size:12px; cursor:pointer; }
.icon-btn.ok { background:#d1fae5; border-color:#a7f3d0; }
.icon-btn.danger { background:#fee2e2; border-color:#fecaca; }
.dark .notes-table { border-color:#2a3441; }
.dark .note-headerv2 { background:#0f172a; color:#94a3b8; border-color:#2a3441; }
.dark .note-rowv2 { border-color:#2a3441; }
.search-results {
    max-height: 320px;
    overflow: auto;
    padding-right: 10px; /* room for scrollbar to avoid clipping badges */
}
.search-results .search-result-item {
    display: flex;
    min-height: 56px; /* uniform row height to prevent vertical jitter */
}
.search-results .result-info {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 100%;
}
.search-results .result-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.search-result-item .result-details {
    padding-right: 6px; /* small inner breathing room */
}
.search-results .result-category {
    white-space: nowrap;
}
/* === Search result alignment tweaks === */
.search-results .result-details {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #64748b;
    font-size: 12px;
}
.search-results .result-price { min-width: 72px; }
.search-results .result-duration { min-width: 60px; text-align: right; }
.search-results .result-category { margin-left: auto; }

.dark .search-results .result-details { color: #94a3b8; }
/* Date toolbar - compact layout */
.date-toolbar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    padding: 0.375rem 0.5rem;
    border-radius: 0.375rem;
    margin-top: 0.25rem;
}

.date-field {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    flex: 1;
}

.date-separator {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
    white-space: nowrap;
}

.btn-icon-small {
    border: 1px solid var(--border-primary);
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 0.25rem;
    padding: 0.25rem;
    cursor: pointer;
    font-size: 0.75rem;
    min-width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-icon-small:hover { 
    border-color: var(--primary); 
    background: var(--primary-light);
}

.dark .date-toolbar { 
    background: #0f172a; 
    border-color: #1f2937; 
}

.dark .btn-icon-small { 
    background: #0b1220; 
    border-color: #1f2937; 
    color: #e5e7eb; 
}

.dark .btn-icon-small:hover {
    background: #1e3a8a;
    border-color: #3b82f6;
}
.one-line-grid {
    display: grid;
    grid-template-columns: 1fr;
    row-gap: 10px;
}

/* === 3 TRƯỜNG HỢP MÀU SẮCC THEO SPEC === */
.email-perfect {
    color: #22c55e; /* Xanh lá cho email khớp hoàn toàn */
    font-weight: 600;
}

.email-similar {
    color: #eab308 !important; /* Vàng cho email nghi ngờ */
    font-weight: 500;
}

/* Đảm bảo trong table cũng hiển thị màu vàng */
.comparison-table .email-similar {
    color: #eab308 !important;
    font-weight: 500;
}

.email-different {
    color: #ef4444; /* Đỏ cho email khác biệt */
    font-weight: 600;
}

.email-empty {
    color: var(--text-muted);
    font-style: italic;
}

/* Highlight ký tự khác trong email tương tự */
.char-different {
    color: #ef4444 !important; /* Đỏ cho ký tự khác - chỉ màu chữ */
    font-weight: 700;
    /* Bỏ background, padding, border-radius */
}

/* === STYLE CHO GHI CHÚ Ở TRÊN === */
.single-note-container {
    border-radius: var(--radius);
    padding: var(--space-3);
    margin-bottom: var(--space-4);
}

/* Warning style cho "CÓ THỂ ĐẠT" */
.single-note-container.warning {
    background: rgba(234, 179, 8, 0.1);
    border: 1px solid #eab308;
}

/* Error style cho "KHÔNG ĐẠT" */
.single-note-container.error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid #ef4444;
}

.note-badge {
    display: inline-block;
    padding: var(--space-1) var(--space-2);
    color: white;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: var(--space-2);
}

.note-badge.warning {
    background: #eab308;
}

.note-badge.error {
    background: #ef4444;
}

.similarity-info {
    font-weight: 600;
    color: #eab308;
    margin-bottom: var(--space-1);
}

.email-comparison-inline {
    font-family: 'Segoe UI', monospace;
    font-size: 0.875rem;
    margin-bottom: var(--space-2);
    line-height: 1.6;
}

.email-comparison-inline .email-similar {
    color: #eab308; /* Đảm bảo màu vàng trong ghi chú */
    font-weight: 500;
}

.note-action {
    font-style: italic;
    color: var(--text-secondary);
    font-size: 0.875rem;
}

/* === VALIDATION TOAST === */
.validation-toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #ef4444; /* Nền đỏ */
    color: white; /* Chữ trắng */
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    gap: var(--space-2);
    z-index: 9999;
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
    max-width: 400px;
    font-weight: 500;
}

.validation-toast.show {
    transform: translateX(0);
}

.validation-toast .toast-icon {
    font-size: 1.2rem;
    flex-shrink: 0;
}

.validation-toast .toast-message {
    flex: 1;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* Style cho trường hợp KHÔNG ĐẠT */
.difference-count {
    font-weight: 600;
    color: #ef4444;
    margin-bottom: var(--space-1);
}

.email-differences-inline {
    font-family: 'Segoe UI', monospace;
    font-size: 0.875rem;
    margin-bottom: var(--space-2);
    line-height: 1.6;
}

.email-differences-inline .email-different {
    color: #ef4444;
    font-weight: 500;
}

/* === COMPARISON TABLE 2 CỘT THEO SPEC === */
/* Layout 2 phần: ghi chú (trái) và bảng email (phải) */
.result-layout {
    display: flex;
    gap: var(--space-4);
    margin: var(--space-4) 0;
}

.notes-section {
    flex: 0 0 300px; /* Cố định width cho ghi chú bên trái */
    order: 1; /* Hiển thị bên trái */
}

.email-table-section {
    flex: 1; /* Phần còn lại cho bảng email */
    order: 2; /* Hiển thị bên phải */
}

.comparison-table-container {
    border: 1px solid var(--border-primary);
    border-radius: var(--radius);
    overflow: hidden;
}

.comparison-table {
    width: 100%;
    max-width: 600px; /* Thu hẹp hơn nữa từ 800px xuống 600px */
    border-collapse: collapse;
    background: var(--bg-card);
    margin: 0; /* Bỏ căn giữa để dành chỗ cho ghi chú */
}

.comparison-table th {
    background: var(--bg-tertiary);
    padding: var(--space-2) var(--space-3); /* Giảm padding dọc */
    font-weight: 600;
    color: var(--text-primary);
    text-align: center;
    border-bottom: 2px solid var(--border-primary);
    width: 50%; /* Chia đều 2 cột */
}

.comparison-table th:first-child {
    border-right: 1px solid var(--border-primary);
}

.comparison-table td {
    padding: var(--space-1) var(--space-2); /* Giảm padding hơn nữa để gần nhau */
    border-bottom: 1px solid var(--border-primary);
    vertical-align: middle;
    width: 50%;
}

.comparison-table td:first-child {
    border-right: 1px solid var(--border-primary);
}

.comparison-table tr:last-child td {
    border-bottom: none;
}

.comparison-table .email-address {
    font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
    font-size: 1rem; /* Tăng font size cho dễ nhìn */
    font-weight: 500;
    word-break: break-all;
    line-height: 1.4;
}

/* Override màu cho email tương tự trong table */
.comparison-table .email-address.email-similar {
    color: #eab308 !important;
    font-weight: 500;
}

/* Override màu cho email khác biệt trong table */
.comparison-table .email-address.email-different {
    color: #ef4444 !important;
    font-weight: 600;
}

/* === PHẦN GHI CHÚ === */
.notes-container {
    border: 1px solid var(--border-primary);
    border-radius: var(--radius);
    background: var(--bg-card);
    padding: var(--space-4);
    height: fit-content;
}

.notes-header {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-3);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.notes-content {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--text-secondary);
}

.note-item {
    margin-bottom: var(--space-2);
    padding: var(--space-2);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
}

.note-item.warning {
    background: rgba(234, 179, 8, 0.1);
    border-left: 3px solid #eab308;
}

.note-item.error {
    background: rgba(239, 68, 68, 0.1);
    border-left: 3px solid #ef4444;
}

.note-item.info {
    background: rgba(59, 130, 246, 0.1);
    border-left: 3px solid #3b82f6;
}

.note-icon {
    font-size: 1rem;
    margin-top: 2px;
}

.note-text {
    flex: 1;
    font-size: 0.875rem;
}

.one-line-grid .cell-line {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 1.1rem;
    letter-spacing: 0.2px;
    white-space: normal;
}
/* ===== MODERN UI DESIGN SYSTEM ===== */
:root {
    /* Light Theme Colors */
    --primary: #2563eb;
    --primary-dark: #1d4ed8;
    --primary-light: #dbeafe;
    --secondary: #0ea5e9;
    --accent: #06b6d4;
    
    --success: #10b981;
    --warning: #f59e0b;
    --error: #ef4444;
    --info: #3b82f6;
    
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-glass: rgba(255, 255, 255, 0.8);
    --bg-card: #ffffff;
    
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-muted: #94a3b8;
    --text-inverse: #ffffff;
    
    --border-primary: #e2e8f0;
    --border-secondary: #cbd5e1;
    --border-focus: var(--primary);
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    
    --radius-sm: 0.375rem;
    --radius: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    
    --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* === Theme tokens for contrast === */
    --text-on-light: #111827; /* slate-900 */
    --text-muted-on-light: #6b7280; /* gray-600 */
    --text-on-dark: #e5e7eb; /* gray-200 */
    --text-muted-on-dark: #9ca3af; /* gray-400 */
}

/* Dark theme overrides */
.dark {
    --bg-primary: #0b1220;
    --bg-secondary: #0f172a;
    --bg-tertiary: #111827;
    --bg-glass: rgba(17, 24, 39, 0.8);
    --bg-card: #0f172a;
    --card-bg: #0f172a;

    --text-primary: #e5e7eb;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    --text-inverse: #0b1220;

    --border-primary: #1f2937;
    --border-secondary: #334155;
    --border-color: #1f2937;

    --primary-light: #1e293b;
    
    /* Color variables for dark mode - optimized for better contrast */
    --success: #34d399;  /* Brighter green for dark mode */
    --warning: #fbbf24;  /* Brighter yellow for dark mode */
    --danger: #f87171;   /* Softer red for dark mode */
    --info: #60a5fa;     /* Brighter blue for dark mode */
}


/* ===== RESET & BASE STYLES ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Hide any theme toggle elements */
.theme-toggle,
.theme-btn,
.theme-icon,
[class*="theme"],
button[class*="theme"],
div[class*="theme"],
span[class*="theme"],
.theme-switcher,
.theme-selector,
.theme-control,
.theme-button,
.theme-toggle-btn,
.theme-mode,
.theme-switch,
.theme-changer,
.theme-controls,
.theme-options,
.theme-menu,
.theme-dropdown,
.theme-picker,
.theme-selector,
.theme-toggler,
.theme-switcher-btn,
.theme-mode-btn,
.theme-control-btn,
.theme-button-group,
.theme-control-group,
.theme-switch-group,
.theme-toggle-group,
.theme-mode-group,
.theme-changer-group,
.theme-controls-group,
.theme-options-group,
.theme-menu-group,
.theme-dropdown-group,
.theme-picker-group,
.theme-selector-group,
.theme-toggler-group,
.theme-switcher-btn-group,
.theme-mode-btn-group,
.theme-control-btn-group,
/* Hide any button in top right corner */
.sidebar-header button,
.sidebar-header .btn,
.sidebar-header [class*="btn"],
.sidebar-header [class*="button"],
.sidebar-header [class*="toggle"],
.sidebar-header [class*="switch"],
.sidebar-header [class*="control"],
.sidebar-header [class*="mode"],
.sidebar-header [class*="theme"],
.sidebar-header [class*="dark"],
.sidebar-header [class*="light"],
.sidebar-header [class*="sun"],
.sidebar-header [class*="moon"],
.sidebar-header [class*="icon"],
.sidebar-header [class*="symbol"],
.sidebar-header [class*="emoji"],
.sidebar-header [class*="glyph"],
.sidebar-header [class*="char"],
.sidebar-header [class*="text"],
.sidebar-header [class*="label"],
.sidebar-header [class*="title"],
.sidebar-header [class*="name"],
.sidebar-header [class*="id"],
.sidebar-header [class*="class"],
.sidebar-header [class*="element"],
.sidebar-header [class*="node"],
.sidebar-header [class*="tag"],
.sidebar-header [class*="div"],
.sidebar-header [class*="span"],
.sidebar-header [class*="p"],
.sidebar-header [class*="a"],
.sidebar-header [class^="btn"],
.sidebar-header [class*=" btn"],
.sidebar-header [class*="i"],
.sidebar-header [class*="em"],
.sidebar-header [class*="strong"],
.sidebar-header [class*="b"],
.sidebar-header [class*="u"],
.sidebar-header [class*="s"],
.sidebar-header [class*="mark"],
.sidebar-header [class*="small"],
.sidebar-header [class*="big"],
.sidebar-header [class*="large"],
.sidebar-header [class*="huge"],
.sidebar-header [class*="tiny"],
.sidebar-header [class*="mini"],
.sidebar-header [class*="micro"],
.sidebar-header [class*="nano"],
.sidebar-header [class*="pico"],
.sidebar-header [class*="femto"],
.sidebar-header [class*="atto"],
.sidebar-header [class*="zepto"],
.sidebar-header [class*="yocto"],
.sidebar-header [class*="kilo"],
.sidebar-header [class*="mega"],
.sidebar-header [class*="giga"],
.sidebar-header [class*="tera"],
.sidebar-header [class*="peta"],
.sidebar-header [class*="exa"],
.sidebar-header [class*="zetta"],
.sidebar-header [class*="yotta"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    left: -9999px !important;
    top: -9999px !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Logo image override - must be visible */
.sidebar-header .logo-img {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 28px !important;
    height: 28px !important;
    object-fit: contain !important;
    border-radius: 4px !important;
    margin-right: 12px !important;
    position: static !important;
    left: auto !important;
    top: auto !important;
    clip: none !important;
    overflow: visible !important;
    pointer-events: auto !important;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background: var(--bg-primary);
    transition: var(--transition);
    overflow-x: hidden;
}

/* ===== TYPOGRAPHY ===== */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
    color: var(--text-primary);
}

h1 { font-size: 2.5rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.75rem; }
h4 { font-size: 1.5rem; }
h5 { font-size: 1.25rem; }
h6 { font-size: 1.125rem; }

p {
    color: var(--text-secondary);
    margin-bottom: var(--space-4);
}

/* ===== LAYOUT ===== */
.app-container {
    display: flex;
    min-height: 100vh;
    background: var(--bg-primary);
    transition: var(--transition);
}

/* ===== SIDEBAR ===== */
.sidebar {
    width: 280px;
    background: var(--bg-card);
    border-right: 1px solid var(--border-primary);
    display: flex;
    flex-direction: column;
    position: fixed;
    height: 100vh;
    left: 0;
    top: 0;
    z-index: 1000;
    transition: var(--transition);
    box-shadow: var(--shadow-lg);
}

.sidebar-header {
    padding: var(--space-6);
    border-bottom: 1px solid var(--border-primary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--bg-card);
    color: var(--text-primary);
    position: relative;
    overflow: hidden;
    border-radius: 0;
    width: 100%;
    box-sizing: border-box;
}

.sidebar-header::before { display: none; }

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.logo-container {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    position: relative;
    z-index: 1;
    flex: 1;
    min-width: 0;
}

/* Ẩn khối biểu tượng cũ (emoji/khối cầu) nếu còn tồn tại */
.logo-container .logo { display: none !important; }

.logo {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.brand-info h1 {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}

.brand-subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 500;
}


/* ===== NAVIGATION ===== */
.sidebar-nav {
    flex: 1;
    padding: var(--space-4);
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--border-primary) transparent;
}

.sidebar-nav::-webkit-scrollbar {
    width: 4px;
}

.sidebar-nav::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-nav::-webkit-scrollbar-thumb {
    background: var(--border-primary);
    border-radius: 2px;
}

.nav-section {
    margin-bottom: var(--space-8);
}

.nav-section-title {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: var(--space-4);
    padding: var(--space-2) var(--space-4);
    background: transparent;
    border-radius: var(--radius);
    border-left: none;
}

.nav-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-4);
    border: none;
    background: transparent;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: var(--transition);
    margin-bottom: var(--space-2);
    position: relative;
    overflow: hidden;
    text-align: left;
    border: 1px solid transparent;
}

.nav-item::before { content: none; }

.nav-item:hover {
    background: linear-gradient(135deg, #e0e7ff, #dbeafe);
    border-color: #93c5fd;
}

.nav-item.active {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: #ffffff;
    box-shadow: 0 2px 6px rgba(37, 99, 235, 0.15);
    border-color: var(--primary);
}

.nav-item.active::before { content: none; }

.nav-item.active .nav-label { color: #ffffff; }
.nav-item.active .nav-icon { color: #ffffff; }
.nav-item.active .nav-badge { background: rgba(255,255,255,0.25); color: #fff; }

.nav-icon {
    font-size: 20px;
    width: 24px;
    text-align: center;
}

.nav-label {
    font-weight: 500;
    flex: 1;
}

.nav-badge {
    background: var(--error);
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 4px 8px;
    border-radius: 12px;
    min-width: 24px;
    text-align: center;
    box-shadow: var(--shadow-sm);
}

.nav-item.active .nav-badge {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

/* ===== MAIN CONTENT ===== */
.main-content {
    flex: 1;
    margin-left: 280px; /* default without mini dock */
    background: var(--bg-primary);
    transition: var(--transition);
}

/* Notes card header layout */
.notes-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Notes sync controls */
.notes-sync-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.notes-sync-controls .btn {
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Notes filters - removed old chip styles */

/* Time filters styling - removed old chip styles */

/* Removed old dark mode chip styles */

/* Bulk actions for completed notes */
.notes-bulk-actions {
    margin: 16px 0;
    padding: 12px 16px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
}

.dark .notes-bulk-actions {
    background: #1e293b;
    border-color: #334155;
}

.bulk-actions-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}

.bulk-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-weight: 500;
    color: #374151;
}

.dark .bulk-checkbox {
    color: #e5e7eb;
}

.bulk-checkbox input[type="checkbox"] {
    display: none;
}

.checkmark {
    width: 18px;
    height: 18px;
    border: 2px solid #d1d5db;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.bulk-checkbox input[type="checkbox"]:checked + .checkmark {
    background: #3b82f6;
    border-color: #3b82f6;
}

.bulk-checkbox input[type="checkbox"]:checked + .checkmark::after {
    content: '✓';
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.dark .checkmark {
    border-color: #4b5563;
}

.dark .bulk-checkbox input[type="checkbox"]:checked + .checkmark {
    background: #3b82f6;
    border-color: #3b82f6;
}

.btn-danger {
    background: #ef4444;
    color: white;
    border: 1px solid #dc2626;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-danger:hover:not(:disabled) {
    background: #dc2626;
    border-color: #b91c1c;
}

.btn-danger:disabled {
    background: #9ca3af;
    border-color: #9ca3af;
    cursor: not-allowed;
    opacity: 0.6;
}

.dark .btn-danger {
    background: #dc2626;
    border-color: #b91c1c;
}

.dark .btn-danger:hover:not(:disabled) {
    background: #b91c1c;
    border-color: #991b1b;
}

/* Modern Notification System */
.notification-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 12px;
    pointer-events: none;
}

.notification {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 16px 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    min-width: 320px;
    max-width: 400px;
    pointer-events: auto;
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.notification.show {
    transform: translateX(0);
    opacity: 1;
}

.notification::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #3b82f6, #1d4ed8);
}

.notification.success::before {
    background: linear-gradient(90deg, #10b981, #059669);
}

.notification.warning::before {
    background: linear-gradient(90deg, #f59e0b, #d97706);
}

.notification.error::before {
    background: linear-gradient(90deg, #ef4444, #dc2626);
}

.notification-content {
    display: flex;
    align-items: flex-start;
    gap: 12px;
}

.notification-icon {
    font-size: 20px;
    margin-top: 2px;
    flex-shrink: 0;
}

.notification-body {
    flex: 1;
}

.notification-title {
    font-weight: 600;
    font-size: 14px;
    color: #1f2937;
    margin: 0 0 4px 0;
    line-height: 1.4;
}

.notification-message {
    font-size: 13px;
    color: #6b7280;
    margin: 0;
    line-height: 1.4;
}

.notification-close {
    position: absolute;
    top: 8px;
    right: 8px;
    background: none;
    border: none;
    color: #9ca3af;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 16px;
    line-height: 1;
}

.notification-close:hover {
    color: #6b7280;
    background: rgba(0, 0, 0, 0.05);
}

/* Dark mode notifications */
.dark .notification {
    background: rgba(17, 24, 39, 0.95);
    border-color: rgba(75, 85, 99, 0.3);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.dark .notification-title {
    color: #f9fafb;
}

.dark .notification-message {
    color: #d1d5db;
}

.dark .notification-close {
    color: #9ca3af;
}

.dark .notification-close:hover {
    color: #d1d5db;
    background: rgba(255, 255, 255, 0.1);
}

/* Animation for notification removal */
.notification.removing {
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Checkbox in completed note cards */
.note-cardv3 .note-checkbox {
    position: absolute;
    top: 12px;
    right: 12px;
    width: 18px;
    height: 18px;
    border: 2px solid #d1d5db;
    border-radius: 4px;
    background: white;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 10;
}

.note-cardv3 .note-checkbox:checked {
    background: #3b82f6;
    border-color: #3b82f6;
}

.note-cardv3 .note-checkbox:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.dark .note-cardv3 .note-checkbox {
    background: #1e293b;
    border-color: #4b5563;
}

.dark .note-cardv3 .note-checkbox:checked {
    background: #3b82f6;
    border-color: #3b82f6;
}

/* Ensure completed notes have proper spacing for checkbox */
.note-cardv3.note-completed .v3-head {
    padding-right: 40px; /* Extra space for checkbox */
}

.note-cardv3.note-completed .v3-link {
    max-width: calc(100% - 50px); /* Prevent overlap with checkbox */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}



/* Order Information Section */
.refund-order-info {
    margin-top: 20px;
    padding: 16px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
}

.dark .refund-order-info {
    background: #1e293b;
    border-color: #334155;
}

.refund-order-header {
    margin-bottom: 16px;
}

.refund-order-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #374151;
}

.dark .refund-order-header h3 {
    color: #e5e7eb;
}

.refund-order-fields {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

@media (max-width: 768px) {
    .refund-order-fields {
        grid-template-columns: 1fr;
    }
}

/* removed secondary sidebar styles */

/* ===== TAB SYSTEM ===== */
.tab-content {
    display: none !important;
}

.tab-content.active {
    display: block !important;
    animation: fadeInUp 0.3s ease-out;
}

/* Ensure sections are hidden by default */
section {
    display: none !important;
}

section.tab-content.active {
    display: block !important;
}

.main-header {
    background: var(--bg-card);
    border-bottom: 1px solid var(--border-primary);
    padding: var(--space-4) var(--space-6);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-sm);
}

.page-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.page-subtitle {
    color: var(--text-secondary);
    margin: var(--space-2) 0 0 0;
    font-size: 1rem;
}

/* ===== HEADER CONTROLS ===== */
.header-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: var(--space-4);
    padding: var(--space-4);
    background: transparent;
    border-radius: var(--radius-lg);
    border: none;
}

.header-stats {
    display: flex;
    align-items: center;
    gap: var(--space-6);
}

.header-stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.header-stat-value {
    font-weight: 600;
    color: var(--text-primary);
}

.header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.action-group {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2);
    background: transparent;
    border-radius: var(--radius);
    border: none;
}

.content-area {
    padding: var(--space-4) var(--space-8) var(--space-8) var(--space-8);
    max-width: 1100px;
    margin: 0 auto;
}

/* ===== CARDS ===== */
.card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    overflow: hidden;
    position: relative;
}

.card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
}

.card-header {
    padding: var(--space-6);
    border-bottom: 1px solid var(--border-primary);
    background: var(--bg-secondary);
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.card-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
        margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.title-icon {
    font-size: 1.5rem;
    color: var(--primary);
}

.card-subtitle {
    color: var(--text-secondary);
    margin: var(--space-2) 0 0 0;
    font-size: 0.875rem;
}

.card-content {
    padding: var(--space-6);
}

.card-footer {
    padding: var(--space-4) var(--space-6);
    border-top: 1px solid var(--border-primary);
    background: var(--bg-secondary);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
}

/* Limit width for specific sections so they don't span full width */
#upgrade .upgrade-card,
#notes .notes-card,
#quote .quote-card,
#schedule .schedule-card,
#family-check .family-check-card {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
}

.card-compact {
    padding: var(--space-4);
}

.card-compact .card-header {
    padding: var(--space-4);
    border-bottom: none;
}

.card-compact .card-content {
    padding: 0;
}

/* ===== FORMS ===== */
.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-6);
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.form-label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.875rem;
    margin-bottom: var(--space-1);
}

.form-input, .form-select, .form-textarea {
    padding: var(--space-3) var(--space-4);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    background: var(--bg-card);
    color: var(--text-primary);
    font-size: 0.875rem;
    transition: var(--transition);
    font-family: inherit;
    min-height: 40px;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
    outline: none;
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    background: var(--bg-primary);
}

.form-input:hover, .form-select:hover, .form-textarea:hover {
    border-color: var(--border-secondary);
}

.form-textarea {
    resize: vertical;
    min-height: 100px;
}

.form-row {
    display: flex;
    gap: var(--space-4);
    align-items: end;
}

.form-row .form-group {
    flex: 1;
}

.form-actions {
    display: flex;
    gap: var(--space-3);
    justify-content: flex-end;
    margin-top: var(--space-6);
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-primary);
}

.search-input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.search-input-group .search-icon {
    position: absolute;
    left: var(--space-3);
    color: var(--text-muted);
    font-size: 1rem;
    z-index: 1;
}

.search-input-group .form-input {
    padding-left: calc(var(--space-3) + 1.5rem);
}

/* ===== BUTTONS ===== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    border: none;
    border-radius: var(--radius-lg);
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    transition: var(--transition);
    text-decoration: none;
    position: relative;
    overflow: hidden;
    min-height: 40px;
    white-space: nowrap;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: var(--transition);
}

.btn:hover::before {
    left: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--primary);
}

.btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
    background: linear-gradient(135deg, var(--primary-dark), var(--primary));
}

.btn-secondary {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    pointer-events: auto;
    position: relative;
    z-index: 10;
}

.btn-secondary:hover {
    background: var(--bg-secondary);
    border-color: var(--border-secondary);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-secondary:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

.btn-secondary:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

.btn-outline {
    background: transparent;
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    font-weight: 500;
}

.btn-outline:hover {
    background: var(--bg-secondary);
    border-color: var(--border-secondary);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.btn-danger {
    background: linear-gradient(135deg, var(--error), #dc2626);
    color: white;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--error);
}

.btn-danger:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
    background: linear-gradient(135deg, #dc2626, var(--error));
}

.btn-sm {
    padding: var(--space-2) var(--space-4);
    font-size: 0.75rem;
    min-height: 32px;
}

.btn-lg {
    padding: var(--space-4) var(--space-6);
    font-size: 1rem;
    min-height: 48px;
}

.btn-icon {
    font-size: 16px;
    width: 20px;
    height: 20px;
        display: flex;
    align-items: center;
    justify-content: center;
}

.btn-group {
        display: flex;
    gap: var(--space-2);
    align-items: center;
}

.btn-group .btn {
        margin: 0;
}

.btn-group .btn:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.btn-group .btn:not(:first-child) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-left: none;
}

/* ===== PRODUCTS ===== */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-4);
    margin-top: var(--space-4);
}

@media (max-width: 768px) {
    .products-grid {
        grid-template-columns: 1fr;
        gap: var(--space-3);
    }
}

/* Fix add-product layout overlapping */
.add-product-card .card-content { overflow: visible; }

/* Fix dropdown overflow in search filter card */
.card-compact .card-content { overflow: visible; }
.card-compact .form-row { overflow: visible; }
.card-compact .form-group { overflow: visible; }
.add-product-card .form-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: var(--space-4);
    align-items: end;
}
.add-product-card .form-group .form-row {
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: var(--space-3);
}
.add-product-card .form-input { width: 100%; }
.add-product-card .form-group .form-group .form-select { width: 120px; }

/* Input group styling for modal */
.input-group {
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: var(--space-3);
    align-items: end;
}

.input-group .form-input,
.input-group .form-select {
    width: 100%;
}

/* Simple select styling - use browser default arrow */
.form-select {
    cursor: pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding-right: 44px; /* space for chevron */
    background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 8l4 4 4-4' stroke='%23667788' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 20px 20px;
}

/* Hide default arrow in legacy browsers */
.form-select::-ms-expand { display: none; }

/* Dropdown options look & spacing */
.form-select option {
    background: var(--bg-card);
    color: var(--text-primary);
}

/* Combo Products Styling */
.combo-section {
    border-top: 1px solid #e2e8f0;
    padding-top: 1rem;
    margin-top: 1rem;
}

.combo-products {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.selected-combo-products {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    min-height: 2rem;
}

.combo-product-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: #3b82f6;
    color: white;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
}

.combo-product-remove {
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 1.25rem;
    height: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    transition: background-color 0.2s;
}

.combo-product-remove:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Combo refund section */
.combo-refund-section {
    margin-top: 1rem;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
}

.dark .combo-refund-section {
    background: transparent;
    border: none;
}

.combo-refund-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}

.combo-refund-header h5 {
    margin: 0 0 0.75rem 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #1e293b;
}

.dark .combo-refund-header h5 {
    color: #f1f5f9;
}

.combo-products-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.combo-product-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.dark .combo-product-item {
    background: #0f172a;
    border-color: #334155;
}

.combo-product-item:hover {
    border-color: #3b82f6;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
}

.combo-product-item.selected {
    border-color: #3b82f6;
    background: #eff6ff;
}

.dark .combo-product-item.selected {
    background: #1e3a8a;
    border-color: #3b82f6;
}

.combo-product-checkbox {
    width: 1.125rem;
    height: 1.125rem;
    accent-color: #3b82f6;
}

.combo-product-info {
    flex: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.combo-product-name {
    font-weight: 500;
    color: #1e293b;
    font-size: 0.875rem;
}

.combo-product-price {
    font-weight: 600;
    color: #059669;
    font-size: 0.875rem;
}

.dark .combo-product-name {
    color: #f1f5f9;
}

.dark .combo-product-price {
    color: #10b981;
}

/* Product type badges */
.product-type-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.625rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.product-type-badge.combo {
    background: #3b82f6;
    color: white;
}

.product-type-badge.ai {
    background: #10b981;
    color: white;
}

.product-type-badge.tool {
    background: #f59e0b;
    color: white;
}

/* Combo item styling */
.multi-refund-item.combo-item {
    border-left: 4px solid #3b82f6;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}

.multi-refund-item.combo-item:hover {
    background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
}

.multi-refund-item.combo-item.selected {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    border-color: #2563eb;
}

/* Refund result improvements */
.refund-result {
    margin-top: 1.5rem;
}

/* Refund calculation sections */
.calc-section {
    padding: 8px 12px;
    border-bottom: 1px solid var(--border-secondary);
    background: var(--bg-primary);
}

.calc-section:last-child {
    border-bottom: none;
}

.calc-section-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 6px 0;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--border-secondary);
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Ensure section titles are visible in dark mode */
.dark .calc-section-title {
    color: #e5e7eb !important;
}

.calc-total-section {
    background: var(--bg-tertiary);
    border-top: 2px solid var(--primary);
    border-radius: 0 0 0.5rem 0.5rem;
}

.calc-total-section .calc-section-title {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.calc-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-light);
}

.calc-row:last-child {
    border-bottom: none;
}

.calc-row.calc-total {
    font-weight: 600;
    font-size: 1.1rem;
    padding: 0.75rem 0;
    border-top: 1px solid var(--border-primary);
    margin-top: 0.5rem;
}

.calc-label {
    color: var(--text-secondary);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.375rem;
}

.calc-value {
    color: var(--text-primary);
    font-weight: 600;
    text-align: right;
}

.calc-value.text-success {
    color: var(--success);
}

.calc-value.text-warning {
    color: var(--warning);
}

.calc-value.text-danger {
    color: var(--danger);
}

.calc-value.text-info {
    color: var(--info);
}

/* Dark mode adjustments */
.dark .calc-section {
    border-bottom-color: #1f2937;
    background: #0f172a;
}

.dark .calc-section-title {
    border-bottom-color: #1f2937;
    color: #e5e7eb;
}

.dark .calc-row {
    border-bottom-color: #1f2937;
}

.dark .calc-total-section {
    background: #1e293b;
    border-top-color: #3b82f6;
}

.dark .calc-total-section .calc-section-title {
    color: #60a5fa !important;
    border-bottom-color: #3b82f6;
}

/* Override old CSS for dark mode */
.dark .refund-result .breakdown .calc-section h6 {
    color: #e5e7eb !important;
}

/* ===== NEW REFUND UI STYLES ===== */
.refund-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px 16px 20px;
}

/* ===== SIMPLE REFUND BREAKDOWN STYLES ===== */
/* Removed .refund-breakdown-simple styles - content now directly in .refund-breakdown */

/* Removed .breakdown-title styles - no longer needed */

/* Removed .section-title styles - no longer needed */

/* Removed .section-icon styles - no longer needed */

.section-group {
    margin-bottom: 12px;
}

.section-group:last-child {
    margin-bottom: 0;
}

.section-group.final-result {
    margin-top: 8px;
    padding-top: 8px;
}

.section-header {
    font-size: 13px;
    font-weight: 700;
    color: #cbd5e0;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 8px;
}

.info-line {
    display: flex;
    align-items: center;
    padding: 4px 0;
    font-size: 15px;
    min-width: 0;
    gap: 8px;
}

.info-line.highlight {
    background: transparent;
    padding: 8px 12px;
    margin: 4px 0;
    border: 1px solid #4a5568;
    border-radius: 4px;
}

/* Removed icon styles for cleaner look */

.info-label {
    color: #e2e8f0;
    font-weight: 600;
    min-width: 80px;
    margin-right: 8px;
    flex-shrink: 0;
}

.info-value {
    color: #e2e8f0;
    font-weight: 600;
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.info-value.positive {
    color: #10b981;
}

.info-value.negative {
    color: #ef4444;
}

.info-value.result-amount {
    font-size: 18px;
    font-weight: 700;
    color: #e2e8f0;
}

.info-value.result-amount.negative {
    color: #ef4444;
}

.info-value.formula {
    color: #60a5fa;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 700;
    font-size: 14px;
}

/* Dark mode adjustments */
/* Removed .dark .refund-breakdown-simple styles - no longer needed */

/* Removed .dark .breakdown-title styles - no longer needed */

/* Removed .dark .section-title styles - no longer needed */

.dark .section-header {
    color: #e2e8f0;
}

.dark .info-line.highlight {
    background: transparent;
    border-color: #2d3748;
}

.dark .info-label {
    color: #f1f5f9;
}

.dark .info-value {
    color: #f7fafc;
}

.dark .info-value.positive {
    color: #34d399;
}

.dark .info-value.negative {
    color: #f87171;
}

.dark .info-value.result-amount {
    color: #f7fafc;
}

.dark .info-value.result-amount.negative {
    color: #f87171;
}

.dark .info-value.formula {
    color: #60a5fa;
}

/* Refund clear buttons - enhanced visibility */
.refund-card .btn-outline {
    border-width: 1.5px;
    font-weight: 600;
    transition: all 0.2s ease;
}

.refund-card .btn-outline:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.dark .refund-card .btn-outline {
    border-color: #4a5568;
    color: #e2e8f0;
}

.dark .refund-card .btn-outline:hover {
    background: #2d3748;
    border-color: #60a5fa;
    color: #60a5fa;
    box-shadow: 0 4px 8px rgba(96, 165, 250, 0.2);
}

/* Refund examples styling */
.refund-search-box div[style*="font-size: 11px"] {
    color: #666 !important;
}

.dark .refund-search-box div[style*="font-size: 11px"] {
    color: #a0aec0 !important;
}

/* Responsive */
@media (max-width: 768px) {
    .refund-breakdown {
        padding: 12px;
    }
    
    .info-line {
        padding: 3px 0;
        font-size: 14px;
    }
    
    .info-label {
        min-width: 60px;
        font-size: 13px;
    }
    
    .info-value {
        font-size: 13px;
        white-space: normal;
        word-break: break-all;
    }
    
    .info-value.result-amount {
        font-size: 16px;
        white-space: nowrap;
    }
    
    .info-value.formula {
        font-size: 12px;
    }
}

.breakdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid #e2e8f0;
}

.breakdown-icon {
    font-size: 20px;
    margin-right: 8px;
}

.breakdown-header h3 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: #1e293b;
    flex: 1;
}

.breakdown-status {
    display: flex;
    align-items: center;
}

.status-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.success {
    background: #10b981;
    color: white;
}

.status-badge.warning {
    background: #f59e0b;
    color: white;
}

.breakdown-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.breakdown-card:last-child {
    margin-bottom: 0;
}

.card-header {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid #e2e8f0;
    background: #f8fafc;
}

.card-icon {
    font-size: 14px;
    margin-right: 6px;
    width: 20px;
    height: 20px;
    background: #3b82f6;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}

.card-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: #374151;
    margin: 0;
}

.card-content {
    padding: 12px;
}

/* Product Info Grid */
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 8px;
}

.info-item {
    display: flex;
    align-items: center;
    padding: 8px;
    background: #f8fafc;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
}

.info-icon {
    font-size: 12px;
    margin-right: 6px;
    width: 20px;
    height: 20px;
    background: #3b82f6;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
}

.info-content {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.info-label {
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
}

.info-value {
    font-size: 13px;
    font-weight: 600;
    color: #1e293b;
}

.info-value.price {
    color: #059669;
    font-size: 14px;
}

/* Usage Analysis */
.usage-progress {
    margin-bottom: 12px;
}

.progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
}

.progress-label {
    font-size: 12px;
    font-weight: 600;
    color: #374151;
}

.progress-percentage {
    font-size: 14px;
    font-weight: 700;
    color: #1f2937;
}

.progress-bar {
    height: 8px;
    background: #e5e7eb;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: #f59e0b;
    border-radius: 4px;
    transition: width 0.8s ease;
    position: relative;
}

.progress-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
    font-size: 10px;
    color: #6b7280;
    font-weight: 500;
}

.usage-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 8px;
}

.usage-item {
    display: flex;
    align-items: center;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid transparent;
}

.usage-item.used {
    background: #fef3c7;
    border-color: #f59e0b;
}

.usage-item.remaining {
    background: #d1fae5;
    border-color: #10b981;
}

.usage-item.daily-rate {
    background: #dbeafe;
    border-color: #3b82f6;
}

.usage-item.expired {
    background: #fee2e2;
    border-color: #ef4444;
}

.usage-icon {
    font-size: 12px;
    margin-right: 6px;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.usage-content {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.usage-label {
    font-size: 10px;
    font-weight: 600;
    color: #374151;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
}

.usage-value {
    font-size: 13px;
    font-weight: 600;
    color: #1f2937;
}

/* Calculation Formula */
.formula-container {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.formula-step {
    display: flex;
    align-items: center;
    flex: 1;
    min-width: 150px;
}

.step-number {
    width: 20px;
    height: 20px;
    background: #3b82f6;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 10px;
    margin-right: 8px;
    flex-shrink: 0;
}

.step-content {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.step-label {
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
}

.step-formula {
    font-size: 12px;
    font-weight: 600;
    color: #1e293b;
    font-family: 'Courier New', monospace;
    background: #f1f5f9;
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
}

.step-formula.expired-formula {
    background: #fee2e2;
    color: #dc2626;
    border-color: #fecaca;
}

.formula-arrow {
    font-size: 16px;
    color: #3b82f6;
    font-weight: bold;
    flex-shrink: 0;
}

/* Final Result */
.final-result.success {
    background: #d1fae5;
    border: 1px solid #10b981;
}

.final-result.warning {
    background: #fef3c7;
    border: 1px solid #f59e0b;
}

.result-highlight {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.result-amount {
    text-align: center;
    flex: 1;
}

.result-label {
    display: block;
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.result-value {
    display: block;
    font-size: 20px;
    font-weight: 800;
    color: #059669;
}

.result-percentage {
    text-align: center;
    flex: 1;
}

.percentage-label {
    display: block;
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.percentage-value {
    display: block;
    font-size: 16px;
    font-weight: 700;
    color: #3b82f6;
}

.result-value.expired,
.percentage-value.expired {
    color: #dc2626;
}

.result-message {
    display: flex;
    align-items: center;
    padding: 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.result-message.success {
    background: rgba(16, 185, 129, 0.1);
    color: #065f46;
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.result-message.warning {
    background: rgba(245, 158, 11, 0.1);
    color: #92400e;
    border: 1px solid rgba(245, 158, 11, 0.2);
}

.message-icon {
    font-size: 14px;
    margin-right: 6px;
    flex-shrink: 0;
}

/* Dark Mode Support */
.dark .refund-breakdown-modern {
    background: #1e293b;
    border-color: #334155;
    color: #f1f5f9;
}

.dark .breakdown-card {
    background: #334155;
    border-color: #475569;
}

.dark .card-header {
    background: #475569;
    border-bottom-color: #64748b;
}

.dark .card-header h4 {
    color: #f1f5f9;
}

.dark .info-item {
    background: #1e293b;
    border-color: #334155;
}

.dark .info-label {
    color: #94a3b8;
}

.dark .info-value {
    color: #f1f5f9;
}

.dark .progress-label,
.dark .progress-percentage {
    color: #f1f5f9;
}

.dark .progress-bar {
    background: #334155;
}

.dark .usage-label {
    color: #94a3b8;
}

.dark .usage-value {
    color: #f1f5f9;
}

.dark .step-label {
    color: #94a3b8;
}

.dark .step-formula {
    background: #1e293b;
    color: #f1f5f9;
    border-color: #334155;
}

.dark .result-label,
.dark .percentage-label {
    color: #94a3b8;
}

.dark .result-message.success {
    background: rgba(16, 185, 129, 0.2);
    color: #6ee7b7;
    border-color: rgba(16, 185, 129, 0.3);
}

.dark .result-message.warning {
    background: rgba(245, 158, 11, 0.2);
    color: #fbbf24;
    border-color: rgba(245, 158, 11, 0.3);
}

.dark .usage-item.expired {
    background: #7f1d1d;
    border-color: #dc2626;
}

.dark .step-formula.expired-formula {
    background: #7f1d1d;
    color: #fca5a5;
    border-color: #991b1b;
}

.dark .result-value.expired,
.dark .percentage-value.expired {
    color: #fca5a5;
}

/* Responsive Design */
@media (max-width: 768px) {
    .refund-breakdown-modern {
        padding: 12px;
        margin: 8px 0;
    }
    
    .breakdown-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .breakdown-header h3 {
        font-size: 16px;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .usage-details {
        grid-template-columns: 1fr;
    }
    
    .formula-container {
        flex-direction: column;
        align-items: stretch;
    }
    
    .formula-arrow {
        transform: rotate(90deg);
        align-self: center;
    }
    
    .result-highlight {
        flex-direction: column;
        gap: 8px;
    }
    
    .result-value {
        font-size: 18px;
    }
    
    .percentage-value {
        font-size: 14px;
    }
}

/* Refund Card - Proper Design */
.refund-card {
    background: #1e293b;
    border-radius: 8px;
    padding: 16px;
    margin-top: 15px;
    color: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.refund-header {
    background: #3b82f6;
    border-radius: 6px;
    padding: 12px;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.refund-icon {
    font-size: 18px;
}

.refund-header h3 {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
    color: white;
}

.refund-section {
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid #334155;
}

.refund-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.section-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
}

.section-icon {
    font-size: 14px;
}

.section-header h4 {
    font-size: 13px;
    font-weight: 600;
    margin: 0;
    color: white;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 0;
    font-size: 12px;
}

.item-icon {
    font-size: 12px;
    width: 16px;
    text-align: center;
}

.item-label {
    color: #cbd5e1;
    min-width: 80px;
    font-size: 12px;
}

.item-value {
    color: white;
    font-weight: 500;
    font-size: 12px;
}

.item-value.negative {
    color: #f59e0b;
}

.item-value.positive {
    color: #10b981;
}

/* Dark mode adjustments */
.dark .refund-card {
    background: #1e293b;
}

/* Dark mode adjustments */
.dark .refund-ultra-compact {
    background: #2d3748;
    border-color: #4a5568;
}

.dark .refund-ultra-compact h4 {
    color: #e2e8f0;
    border-bottom-color: #4a5568;
}

.dark .refund-info-compact .info {
    color: #a0aec0;
}

.dark .refund-info-compact .info strong {
    color: #e2e8f0;
}

.dark .refund-formula-compact {
    background: #374151;
    border-left-color: #60a5fa;
}

.dark .refund-formula-compact h5 {
    color: #e2e8f0;
}

.dark .formula-line {
    color: #e2e8f0;
}

.dark .formula-line.highlight {
    background: #1e3a8a;
    border-color: #60a5fa;
}

.dark .refund-result-compact {
    background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
}

.refund-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: transparent;
    padding: 6px 0 8px 0;
    margin-bottom: 8px;
}

/* Removed .refund-header h1 styles - no longer needed */

.refund-header .btn {
    font-size: 13px;
    padding: 6px 10px;
}

.refund-header .btn-icon {
    font-size: 12px;
    margin-right: 4px;
}

.refund-theme-toggle {
    background: #34495e;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
}

.refund-theme-toggle:hover {
    background: #2c3e50;
    transform: scale(1.05);
}

/* Header above customer content with settings button */
.refund-right-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 8px;
}

.refund-empty-state {
    text-align: center;
    padding: 60px 20px;
    max-width: 400px;
    width: 100%;
    margin: 0 auto;
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 24px;
    opacity: 0.6;
    color: #667eea;
    filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

.empty-title {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #2c3e50;
    line-height: 1.3;
}

.empty-description {
    font-size: 16px;
    color: #7f8c8d;
    line-height: 1.5;
    max-width: 300px;
    margin: 0 auto;
}

.refund-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 8px;
    align-items: flex-start; /* prevent equal-height dependency */
}

/* Two columns on desktop, independent heights per card */
.refund-row .refund-card { flex: 1 1 calc(50% - 4px); }

.refund-row:last-child {
    margin-bottom: 0;
}

@media (max-width: 768px) {
    .refund-row .refund-card { flex-basis: 100%; }
}

.refund-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
}


.refund-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 2px solid #f8f9fa;
}

.refund-card-header h2 {
    font-size: 18px;
    color: #2c3e50;
    margin: 0;
}

.refund-icon {
    width: 24px;
    height: 24px;
    background: #3498db;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
}

.refund-search-box {
    position: relative;
    margin-bottom: 20px;
}

.refund-search-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.3s;
}

.refund-search-input:focus {
    outline: none;
    border-color: #3498db;
}

.refund-search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e1e8ed;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
    overflow-x: hidden; /* prevent horizontal scrollbar */
    display: none;
    transition: all 0.3s ease;
}

.refund-search-results.show {
    display: block;
}

.refund-search-item {
    padding: 12px 16px;
    cursor: pointer;
    border-bottom: 1px solid #e1e8ed;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: 12px;
    box-sizing: border-box; /* avoid overflowing width */
}

.refund-search-item:hover {
    background: #f8fafc;
}

.refund-search-item:last-child {
    border-bottom: none;
}

.refund-search-logo {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

/* Logo feature removed */

.product-name-text {
    flex: 1;
    min-width: 0;
}

.product-name-text .combo-ais {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
    font-style: italic;
}

.refund-search-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
}

.refund-search-duration {
    font-size: 12px;
    color: #666;
    font-weight: 500;
}

.refund-search-price {
    font-weight: 600;
    color: #2c3e50;
    flex-shrink: 0;
}

.refund-date-range {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.refund-date-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.refund-date-input-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}

.refund-today-btn-small {
    background: #3498db;
    color: white;
    border: none;
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: background 0.3s;
    min-width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.refund-today-btn-small:hover {
    background: #2980b9;
}

.dark .refund-today-btn-small {
    background: #4299e1;
    color: white;
}

.dark .refund-today-btn-small:hover {
    background: #3182ce;
}

.refund-date-label {
    font-size: 14px;
    font-weight: 500;
    color: #555;
}

.refund-date-input {
    padding: 10px 12px;
    border: 2px solid #e1e8ed;
    border-radius: 6px;
    font-size: 14px;
}

.refund-date-input:focus {
    outline: none;
    border-color: #3498db;
}

.refund-selected-products {
    background: #f8fff9;
    border: 2px solid #2ecc71;
}

.refund-selected-products .refund-card-header {
    border-bottom-color: #2ecc71;
}

.refund-selected-products .refund-icon {
    background: #2ecc71;
    color: white;
    font-weight: bold;
}

.refund-package-info {
    background: #f0f6ff; /* lighter blue background for better contrast */
    border: 2px solid #3498db;
}

.refund-package-info .refund-card-header {
    border-bottom: none;
}

.refund-package-info .refund-icon {
    background: #3498db;
    color: white;
    font-weight: bold;
}

.refund-selected-item {
    display: flex;
    flex-direction: column;
    padding: 20px;
    background: white;
    border-radius: 12px;
    margin-bottom: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.refund-selected-item:last-child {
    margin-bottom: 0;
}

.refund-selected-item-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

/* Refund package info text styles */
.refund-info-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 12px;
    color: #1f2937;
}

.refund-info-lines { display: flex; flex-direction: column; gap: 8px; }
.refund-info-line { display: flex; align-items: center; gap: 8px; font-size: 14px; color: #4b5563; }
.refund-info-emoji { font-size: 16px; }
.refund-info-strong { color: #1f2937; }

/* Dark mode overrides for package info */
.dark .refund-info-title { color: var(--text-primary); }
.dark .refund-info-line { color: var(--text-secondary); }
.dark .refund-info-strong { color: var(--text-primary); }

.refund-selected-item-name {
    font-weight: 600;
    color: #1f2937;
}

.refund-selected-item-details {
    font-size: 12px;
    color: #4b5563;
}

.refund-results-card {
    grid-column: 1 / -1;
}




.refund-breakdown {
    background: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.refund-breakdown .breakdown-section {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}

.refund-breakdown .breakdown-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.refund-breakdown .breakdown-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.refund-breakdown .breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    font-size: 14px;
}

.refund-breakdown .breakdown-label {
    color: var(--text-secondary);
    font-weight: 500;
}

.refund-breakdown .breakdown-value {
    color: var(--text-primary);
    font-weight: 600;
}

.refund-breakdown .breakdown-value.positive {
    color: #27ae60;
}

.refund-breakdown .breakdown-value.negative {
    color: #e74c3c;
}

.refund-breakdown .breakdown-formula {
    background: var(--bg-secondary);
    padding: 12px;
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    font-size: 13px;
    color: var(--text-primary);
    border-left: 3px solid var(--primary);
}

.refund-breakdown .breakdown-result {
    background: var(--primary);
    color: white;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    font-size: 18px;
    font-weight: 700;
    margin-top: 10px;
}


.refund-message-textarea {
    width: 100% !important;
    max-width: 100% !important;
    height: 300px !important;
    min-height: 300px !important;
    max-height: 300px !important;
    padding: 15px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-primary);
    resize: none !important;
    background: var(--input-bg);
    margin-bottom: 20px;
    box-sizing: border-box !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    transition: border-color 0.3s ease;
}

.refund-message-textarea:focus {
    outline: none;
    border-color: var(--primary);
    background: var(--input-bg);
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.refund-message-actions {
    display: flex;
    gap: 10px;
    margin-top: 10px;
    padding-top: 15px;
    flex-wrap: wrap;
    justify-content: flex-start;
    flex-shrink: 0;
}

.refund-customer-content {
    margin: 0;
    white-space: pre-wrap;
    font-family: inherit;
}

.refund-copy-btn {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s;
    font-size: 14px;
}

.refund-copy-btn:hover {
    background: #2980b9;
}

.refund-reset-btn {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
    margin-left: auto;
}

.refund-reset-btn:hover {
    background: #c0392b;
}

.refund-calculate-section {
    margin: 30px 0;
    text-align: center;
}

.refund-calculate-section .btn {
    min-width: 200px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.refund-calculate-section .btn:disabled {
    opacity: 0.6 !important;
    cursor: not-allowed !important;
    transform: none !important;
    box-shadow: none !important;
}

.refund-calculate-section .btn:disabled:hover {
    background: var(--primary) !important;
    transform: none !important;
    box-shadow: none !important;
}

/* Admin Section - New UI Styles */
.admin-header {
    background: white;
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    margin-bottom: 30px;
}

.admin-header h1 {
    font-size: 28px;
    color: #2c3e50;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.admin-header p {
    color: #666;
    font-size: 14px;
}

.add-product-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.08);
    border: 1px solid #e1e8ed;
    margin-bottom: 30px;
}

.add-product-card .card-header {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 10px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #f8f9fa;
}

.add-product-card .card-header h2 {
    font-size: 18px;
    color: #2c3e50;
}

.add-product-card .icon {
    width: 24px;
    height: 24px;
    background: #27ae60;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
}

.add-product-card .form-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
    align-items: start;
}

.add-product-card .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.add-product-card .form-group .form-group {
    gap: 0;
}

.add-product-card .form-group .form-group .form-input,
.add-product-card .form-group .form-group .form-select {
    height: 48px;
    min-width: 120px;
    width: 120px;
    flex: 1;
}

.add-product-card .form-label {
    font-size: 14px;
    font-weight: 500;
    color: #555;
}

.add-product-card .form-input, 
.add-product-card .form-select {
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.3s;
    height: 48px;
    box-sizing: border-box;
}

.add-product-card .form-input:focus, 
.add-product-card .form-select:focus {
    outline: none;
    border-color: #3498db;
}

.add-product-card .form-input.error, 
.add-product-card .form-select.error {
    border-color: #e74c3c;
}

.add-product-card .error-message {
    color: #e74c3c;
    font-size: 12px;
    margin-top: 4px;
}

.add-btn {
    background: #27ae60;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    align-self: flex-end;
    box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
}

.add-btn:hover {
    background: #229954;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
}

.add-btn:disabled {
    background: #bdc3c7;
    cursor: not-allowed;
}

.products-section {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.08);
    border: 1px solid #e1e8ed;
}

.products-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #f8f9fa;
}

.products-section .section-title {
    display: flex;
    align-items: center;
    gap: 10px;
}

.products-section .section-title h2 {
    font-size: 18px;
    color: #2c3e50;
}

.products-section .product-count {
    background: #f8f9fa;
    color: #666;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
}

.search-filter-bar {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 15px;
    margin-bottom: 25px;
}

.search-input {
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.3s;
}

.search-input:focus {
    outline: none;
    border-color: #3498db;
}

.filter-select {
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 8px;
    font-size: 14px;
    min-width: 150px;
}

.bulk-actions {
    display: flex;
    gap: 10px;
}

.bulk-btn {
    background: #f8f9fa;
    color: #666;
    border: 1px solid #e1e8ed;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.3s;
}

.bulk-btn:hover {
    background: #e9ecef;
}

.products-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

.products-table th {
    background: #f8f9fa;
    padding: 15px 12px;
    text-align: left;
    font-weight: 500;
    color: #555;
    border-bottom: 2px solid #e1e8ed;
    font-size: 13px;
}

.products-table td {
    padding: 15px 12px;
    border-bottom: 1px solid #f1f3f4;
    font-size: 14px;
}

.products-table tr:hover {
    background: #f8f9fa;
}

.product-name {
    font-weight: 500;
    color: #2c3e50;
}

.product-category {
    background: #e3f2fd;
    color: #1976d2;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.product-price {
    font-weight: 600;
    color: #27ae60;
}

.product-duration {
    color: #666;
}

.action-buttons {
    display: flex;
    gap: 8px;
}

.action-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.3s;
}

.edit-btn {
    background: #f59e0b;
    color: #ffffff;
    font-weight: 500;
}

.edit-btn:hover {
    background: #d97706;
}

.delete-btn {
    background: #ef4444;
    color: #ffffff;
    font-weight: 500;
}

.delete-btn:hover {
    background: #dc2626;
}

.checkbox {
    width: 16px;
    height: 16px;
    accent-color: #3498db;
}

.pagination {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-top: 20px;
}

.page-btn {
    padding: 8px 12px;
    border: 1px solid #e1e8ed;
    background: white;
    color: #666;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s;
}

.page-btn:hover {
    background: #f8f9fa;
}

.page-btn.active {
    background: #3498db;
    color: white;
    border-color: #3498db;
}

.ai-selection-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 8px;
}

.ai-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: #f8f9fa;
    border: 1px solid #e1e8ed;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 14px;
}

.ai-checkbox:hover {
    background: #e9ecef;
}

.ai-checkbox input[type="checkbox"] {
    margin: 0;
}

.ai-checkbox input[type="checkbox"]:checked + .ai-checkbox {
    background: #e3f2fd;
    border-color: #3498db;
}

.combo-ais {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
    font-style: italic;
}

/* Combo Product Items */
.combo-product-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    background: #f8f9fa;
    border: 1px solid #e1e8ed;
    border-radius: 6px;
    margin-bottom: 8px;
}

.combo-product-item .product-name {
    font-weight: 500;
    color: #2c3e50;
}

.remove-product-btn {
    background: #e74c3c;
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: background 0.2s;
}

.remove-product-btn:hover {
    background: #c0392b;
}

/* Dark mode for new refund UI - matching project style */
.dark .refund-container {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.dark .refund-header {
    background: transparent;
    box-shadow: none;
    border: none;
}

/* Removed .dark .refund-header h1 styles - no longer needed */

.dark .refund-card {
    background: #1e293b;
    box-shadow: 0 2px 15px rgba(0,0,0,0.3);
}

.dark .refund-card-header {
    border-bottom-color: var(--border-color);
}

.dark .refund-card-header h2 {
    color: var(--text-primary);
}

.dark .refund-search-input,
.dark .refund-date-input {
    background: #0f172a;
    border: 2px solid #334155;
    color: #f7fafc;
}

.dark .refund-date-input::-webkit-calendar-picker-indicator {
    filter: invert(1);
    opacity: 0.8;
}

/* Force native datepicker popup to dark-like palette (WebKit browsers allow limited styling) */
.dark input[type="date"],
.dark input[type="date"]::-webkit-datetime-edit,
.dark input[type="date"]::-webkit-calendar-picker-indicator,
.dark input[type="date"]::-webkit-clear-button {
    color-scheme: dark;
}

/* Hide native black calendar icon in dark mode (we already have external calendar button) */
/* Hide native calendar icon and add white one */
.dark input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
}

.dark .date-input-group {
    position: relative;
}

.dark .refund-date-input::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
}

.dark .refund-search-input:focus,
.dark .refund-date-input:focus {
    border-color: var(--primary);
}

.dark .refund-search-input::placeholder {
    color: var(--text-secondary);
}

.dark .refund-search-results {
    background: #1e293b;
    border: 1px solid #334155;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    overflow-x: hidden;
}

.dark .refund-search-item {
    color: #f7fafc;
    border-bottom: 1px solid #334155;
}

.dark .refund-search-item:hover {
    background: #334155;
}

.dark .refund-search-item:last-child {
    border-bottom: none;
}

.dark .refund-search-duration {
    color: #94a3b8;
}

.dark .refund-search-price {
    color: #f7fafc;
}


.dark .refund-date-label {
    color: #f7fafc;
    font-weight: 600;
}

/* Dark mode for refund section headers */
.dark .refund-date-range h4 {
    color: #f7fafc !important;
}

/* Fix refund date range layout alignment */
.refund-date-range {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.refund-date-range .refund-date-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
}

.refund-date-range .refund-date-group:first-child {
    margin-bottom: 0;
}

/* Ensure consistent spacing between sections */
.refund-date-range + .refund-date-range {
    margin-top: 25px;
}

/* Make sure all date inputs have consistent height and alignment */
.refund-date-input-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
}

.refund-date-input {
    flex: 1;
    min-height: 40px;
}

.refund-today-btn-small {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Refund date frames with different colors */
.refund-date-frame {
    border-radius: 12px;
    padding: 20px;
    border: 2px solid;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
}

.refund-frame-blue {
    border-color: #3b82f6;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
}

.refund-frame-green {
    border-color: #10b981;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
}

.refund-frame-header {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.refund-frame-header h4 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: #333;
}

.dark .refund-frame-header h4 {
    color: #f7fafc;
}

.refund-frame-content {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.refund-frame-content .refund-date-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.refund-input-with-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
}

.refund-frame-content .refund-date-input {
    flex: 1;
    padding: 10px 12px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #333;
    font-size: 14px;
}

.refund-today-btn {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #333;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.refund-today-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
}

.dark .refund-today-btn {
    color: #f7fafc;
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.2);
}

.dark .refund-today-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
}

.dark .refund-frame-content .refund-date-input {
    color: #f7fafc;
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.2);
}

.refund-frame-content .refund-date-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.refund-frame-green .refund-frame-content .refund-date-input:focus {
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Responsive design for refund date frames */
@media (max-width: 768px) {
    .refund-date-frame {
        grid-template-columns: 1fr !important;
    }
    
    .refund-date-frame + .refund-date-frame {
        margin-top: 20px;
    }
}

.dark .refund-selected-products {
    background: var(--success-bg);
    border: 2px solid var(--success);
}

.dark .refund-package-info {
    background: #0b1220; /* outer container */
    border: 2px solid var(--primary);
    box-shadow: inset 0 0 0 1px rgba(59,130,246,0.15);
}

.dark .refund-package-info .refund-card-header {
    border-bottom: none;
}

.dark .refund-selected-item {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
}

/* Ensure text inside refund-package-info is readable in dark mode */
.dark .refund-package-info .refund-selected-item-name,
.dark .refund-package-info .refund-selected-item-details,
.dark .refund-package-info .refund-card-header h2,
.dark .refund-package-info .refund-card-header,
.dark .refund-package-info .refund-icon {
    color: var(--text-primary);
}

.dark .refund-package-info .refund-selected-item {
    background: #0f172a; /* inner card background (darker than outer) */
    border: 1px solid #24324a; /* subtle inner border */
    box-shadow: 0 2px 10px rgba(0,0,0,0.35);
    border-radius: 10px;
}

.dark .refund-selected-item-name {
    color: var(--text-primary);
}

.dark .refund-selected-item-details {
    color: var(--text-secondary);
}


/* Dark mode empty state - clean minimal look */

.dark .empty-icon {
    color: #64b5f6;
    opacity: 0.8;
    filter: drop-shadow(0 2px 4px rgba(100, 181, 246, 0.3));
}

.dark .empty-title {
    color: var(--text-primary);
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.dark .empty-description {
    color: var(--text-secondary);
    opacity: 0.9;
}

/* Dark mode for Admin Section */
.dark .admin-header {
    background: #1e293b;
    padding: 20px 30px;
    border-radius: 12px;
    border: 1px solid #334155;
    margin-bottom: 30px;
}

.dark .admin-header h1 {
    font-size: 28px;
    color: #f7fafc;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.dark .admin-header p {
    color: #a0aec0;
    font-size: 14px;
}

.dark .add-product-card {
    background: #1e293b;
    border-radius: 12px;
    padding: 25px;
    border: 1px solid #334155;
    margin-bottom: 30px;
}

.dark .add-product-card .card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #334155;
}

.dark .add-product-card .card-header h2 {
    font-size: 18px;
    color: #f7fafc;
}

.dark .add-product-card .form-label {
    font-size: 14px;
    font-weight: 500;
    color: #cbd5e0;
}

.dark .add-product-card .form-input, 
.dark .add-product-card .form-select {
    padding: 12px 16px;
    border: 2px solid #334155;
    border-radius: 8px;
    font-size: 14px;
    background: var(--bg-tertiary);
    color: #f7fafc;
    transition: border-color 0.3s;
}

.dark .add-product-card .form-input::placeholder {
    color: #718096;
}

.dark .add-product-card .form-input:focus, 
.dark .add-product-card .form-select:focus {
    outline: none;
    border-color: #4299e1;
    background: var(--bg-secondary);
}

.dark .add-product-card .form-select option {
    background: var(--bg-tertiary);
    color: #f7fafc;
}

.dark .add-product-card .form-input.error, 
.dark .add-product-card .form-select.error {
    border-color: #f56565;
}

.dark .add-product-card .error-message {
    color: #f56565;
    font-size: 12px;
    margin-top: 4px;
}

.dark .add-product-card .add-btn {
    background: #38a169;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
    align-self: flex-end;
}

.dark .add-product-card .add-btn:hover {
    background: #2f855a;
}

.dark .add-product-card .add-btn:disabled {
    background: #718096;
    cursor: not-allowed;
}

.dark .products-section {
    background: #1e293b;
    border-radius: 12px;
    padding: 25px;
    border: 1px solid #334155;
}

.dark .products-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #334155;
}

.dark .products-section .section-title {
    display: flex;
    align-items: center;
    gap: 10px;
}

.dark .products-section .section-title h2 {
    font-size: 18px;
    color: #f7fafc;
}

.dark .products-section .section-title .icon {
    background: #4299e1;
}

.dark .products-section .product-count {
    background: var(--bg-tertiary);
    color: #a0aec0;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
}

.dark .search-filter-bar {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 15px;
    margin-bottom: 25px;
}

.dark .search-input {
    padding: 12px 16px;
    border: 2px solid #334155;
    border-radius: 8px;
    font-size: 14px;
    background: var(--bg-tertiary);
    color: #f7fafc;
    transition: border-color 0.3s;
}

.dark .search-input::placeholder {
    color: #718096;
}

.dark .search-input:focus {
    outline: none;
    border-color: #4299e1;
    background: var(--bg-secondary);
}

.dark .filter-select {
    padding: 12px 16px;
    border: 2px solid #334155;
    border-radius: 8px;
    font-size: 14px;
    background: var(--bg-tertiary);
    color: #f7fafc;
    min-width: 150px;
}

.dark .bulk-actions {
    display: flex;
    gap: 10px;
}

.dark .bulk-btn {
    background: var(--bg-tertiary);
    color: #a0aec0;
    border: 1px solid #475569;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.3s;
}

.dark .bulk-btn:hover {
    background: var(--bg-secondary);
    color: #f7fafc;
}

.dark .products-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

.dark .products-table th {
    background: var(--bg-tertiary);
    padding: 15px 12px;
    text-align: left;
    font-weight: 500;
    color: #cbd5e0;
    border-bottom: 2px solid #475569;
    font-size: 13px;
}

.dark .products-table td {
    padding: 15px 12px;
    border-bottom: 1px solid #334155;
    font-size: 14px;
    color: #e2e8f0;
}

.dark .products-table tr:hover {
    background: var(--bg-tertiary);
}

.dark .product-name {
    color: #f7fafc;
    font-weight: 500;
}

.dark .product-category {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.dark .category-ai {
    background: #3b82f6;
    color: #ffffff;
    font-weight: 500;
}

/* AI Services display is now handled in JavaScript */

/* Adjust spacing to match design */
.dark .products-section {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 20px;  /* Reduced from 25px */
    border: 1px solid #334155;
}

.dark .products-section .section-header {
    margin-bottom: 20px;  /* Reduced from 25px */
    padding-bottom: 12px;  /* Reduced from 15px */
}

.dark .search-filter-bar {
    margin-bottom: 20px;  /* Reduced from 25px */
}

.dark .category-combo {
    background: #10b981;
    color: #ffffff;
    font-weight: 500;
}

.dark .category-tool {
    background: #f59e0b;
    color: #ffffff;
    font-weight: 500;
}

.dark .product-price {
    color: #68d391;
    font-weight: 600;
}

.dark .product-duration {
    color: #a0aec0;
}

.dark .pagination {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-top: 20px;
}

.dark .page-btn {
    padding: 8px 12px;
    border: 1px solid #334155;
    background: var(--bg-secondary);
    color: #a0aec0;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s;
}

.dark .page-btn:hover {
    background: var(--bg-tertiary);
}

.dark .page-btn.active {
    background: #4299e1;
    color: white;
    border-color: #4299e1;
}

.dark .ai-selection-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 8px;
}

.dark .ai-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border: 1px solid #475569;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 14px;
    color: #e2e8f0;
}

.dark .ai-checkbox:hover {
    background: var(--bg-secondary);
    border-color: #64748b;
}

.dark .ai-checkbox input[type="checkbox"] {
    margin: 0;
}

.dark .ai-checkbox input[type="checkbox"]:checked + span {
    color: #90cdf4;
}

.dark .combo-ais {
    font-size: 12px;
    color: #a0aec0;
    margin-top: 4px;
    font-style: italic;
}

.dark .combo-product-item {
    background: var(--bg-tertiary);
    border-color: #475569;
}

.dark .combo-product-item .product-name {
    color: #e2e8f0;
}


.dark .refund-message-textarea {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

.dark .refund-message-textarea {
    background: var(--input-bg);
    border-color: var(--border-color);
    color: var(--text-primary);
}

.dark .refund-message-textarea:focus {
    background: var(--input-bg);
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
}

.dark .refund-right-column {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
}

.dark .refund-left-column {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
}

.dark .refund-left-column h3,
.dark .refund-right-column h3 {
    color: var(--text-primary);
}

.dark .refund-breakdown {
    background: var(--card-bg);
}

.dark .refund-breakdown .breakdown-section {
    border-bottom-color: var(--border-color);
}

.dark .refund-breakdown .breakdown-title {
    color: var(--text-primary);
}

.dark .refund-breakdown .breakdown-label {
    color: var(--text-secondary);
}

.dark .refund-breakdown .breakdown-value {
    color: var(--text-primary);
}

.dark .refund-breakdown .breakdown-formula {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-left-color: var(--primary);
}

/* NEW REFUND LAYOUT - EQUAL COLUMNS */
.refund-results-container {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 30px !important;
    width: 100% !important;
    max-width: 100% !important;
    align-items: stretch !important;
    min-height: 500px !important;
}

.refund-left-column {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100% !important;
    grid-column: 1 !important;
    background: var(--card-bg);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.08);
}

.refund-left-column h3,
.refund-right-column h3 {
    margin: 0 0 25px 0;
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border-color);
}

.refund-right-column {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100% !important;
    grid-column: 2 !important;
    overflow: hidden !important;
    height: 100% !important;
    background: var(--card-bg);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.08);
    justify-content: flex-start !important;
}

/* OVERRIDE ANY OTHER CSS THAT MIGHT INTERFERE */
.refund-results-container * {
    box-sizing: border-box !important;
}

.refund-left-column *,
.refund-right-column * {
    box-sizing: border-box !important;
    max-width: 100% !important;
}

/* Modal styles */
.modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.5) !important;
    z-index: 99999 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.modal-content {
    background: white;
    border-radius: 12px;
    max-width: 800px;
    width: 90%;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    z-index: 20001;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #e1e8ed;
    background: #f8f9fa;
}

.modal-header h3 {
    margin: 0;
    color: #2c3e50;
    font-size: 18px;
}

.modal-close {
    background: none;
    border: none;
    font-size: 24px;
    color: #666;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.modal-close:hover {
    background: #e1e8ed;
    color: #333;
}

.modal-body {
    padding: 24px;
    overflow-y: auto;
    max-height: 60vh;
}

.modal-footer {
    display: flex;
    gap: 12px;
    padding: 20px 24px;
    border-top: 1px solid #e1e8ed;
    background: #f8f9fa;
    justify-content: flex-end;
}

/* Dark mode for modal */
.dark .modal-content {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
}

.dark .modal-header {
    background: var(--bg-secondary);
    border-bottom-color: var(--border-color);
}

.dark .modal-header h3 {
    color: var(--text-primary);
}

.dark .modal-close {
    color: var(--text-secondary);
}

.dark .modal-close:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.dark .modal-footer {
    background: var(--bg-secondary);
    border-top-color: var(--border-color);
}


.dark .refund-breakdown {
    background: var(--card-bg);
}

.dark .refund-copy-btn {
    background: var(--primary);
}

.dark .refund-copy-btn:hover {
    background: var(--primary-hover);
}

.dark .refund-reset-btn {
    background: var(--danger);
}

.dark .refund-reset-btn:hover {
    background: var(--danger-hover);
}

.dark .refund-theme-toggle {
    background: var(--warning);
}

.dark .refund-theme-toggle:hover {
    background: var(--warning-hover);
}


/* Dark mode color improvements for better readability */
.dark .calc-value.text-success {
    color: #34d399 !important;
    font-weight: 600;
}

.dark .calc-value.text-warning {
    color: #fbbf24 !important;
    font-weight: 600;
}

.dark .calc-value.text-danger {
    color: #f87171 !important;
    font-weight: 600;
}

.dark .calc-value.text-info {
    color: #60a5fa !important;
    font-weight: 600;
}

/* Fix icon colors for better consistency */
.calc-label {
    color: var(--text-secondary);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.375rem;
}

/* Override emoji colors to be more neutral and consistent */
.calc-label {
    filter: grayscale(0.4) brightness(1.1);
}

/* Dark mode icon adjustments */
.dark .calc-label {
    filter: grayscale(0.3) brightness(1.2);
}

.result-sections {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

@media (max-width: 768px) {
    .result-sections {
        grid-template-columns: 1fr;
    }
    
    .refund-result .breakdown {
        padding: 1rem;
        border-radius: 0.5rem;
    }
    
    .refund-result .breakdown .calc-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
        padding: 0.5rem 0;
    }
    
    .refund-result .breakdown .calc-label {
        max-width: 100%;
    }
    
    .refund-result .breakdown .calc-value {
        text-align: left;
        font-size: 0.875rem;
    }
    
    .refund-result .breakdown .calc-section {
        padding: 0.5rem;
        margin: 0.5rem 0;
    }
    
    .refund-result .breakdown .calc-section h6 {
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
    }
}

/* Improve refund form layout */
.refund-form .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    align-items: start;
}

@media (max-width: 768px) {
    .refund-form .form-row {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
}

.date-range {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}


/* Compact calculate button */
.refund-calculate-btn {
    width: 100%;
    margin-top: 1rem;
}

/* ===== REFUND CALC ROWS STYLES ===== */
.refund-result .breakdown .calc-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 0.375rem 0;
    border-bottom: 1px solid #f1f5f9;
    line-height: 1.4;
    gap: 1rem;
}

.refund-result .breakdown .calc-row:last-child {
    border-bottom: none;
}

.refund-result .breakdown .calc-total {
    border-top: 2px solid var(--primary);
    border-bottom: none;
    margin-top: 0.75rem;
    padding: 0.75rem 0 0.5rem 0;
    font-weight: 700;
    font-size: 1.05em;
    color: var(--primary);
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(59, 130, 246, 0.1));
    border-radius: 0.375rem;
    padding-left: 0.75rem;
    padding-right: 0.75rem;
}

.refund-result .breakdown .calc-section {
    background: #f8fafc;
    padding: 8px 12px;
    border-radius: 6px;
    margin: 6px 0;
    border: 1px solid #e2e8f0;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.refund-result .breakdown .calc-section h6 {
    margin: 0 0 6px 0;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 4px;
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 4px;
}

.refund-result .breakdown .calc-label {
    font-weight: 500;
    color: #64748b;
    font-size: 12px;
    flex: 0 0 auto;
    max-width: 45%;
    word-wrap: break-word;
}

.refund-result .breakdown .calc-value {
    font-weight: 600;
    color: #1e293b;
    text-align: right;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 12px;
    flex: 1;
    word-wrap: break-word;
}

.refund-result .breakdown .calc-value.text-success {
    color: #059669;
    font-weight: 700;
}

.refund-result .breakdown .calc-value.text-danger {
    color: #dc2626;
    font-weight: 700;
}

.refund-result .breakdown .calc-total .calc-label,
.refund-result .breakdown .calc-total .calc-value {
    color: var(--primary);
    font-size: 13px;
    font-weight: 700;
}

@media (max-width: 1200px) {
  .add-product-card .form-grid { grid-template-columns: 1.5fr 1fr 1fr; }
}
@media (max-width: 992px) {
  .add-product-card .form-grid { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px) {
  .add-product-card .form-grid { grid-template-columns: 1fr; }
}

.product-item {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.product-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
}

.product-header {
    flex: 1;
    margin-bottom: var(--space-4);
}

.product-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}

.product-price {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    margin: 0;
}

.product-duration {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin: var(--space-2) 0;
}

.product-actions {
    display: flex;
    gap: var(--space-2);
    margin-top: auto;
    padding-top: var(--space-3);
    border-top: 1px solid var(--border-primary);
}

/* ===== EMPTY STATES ===== */
.empty-state {
    text-align: center;
    padding: var(--space-12);
    color: var(--text-muted);
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    border: 2px dashed var(--border-primary);
    margin: var(--space-6) 0;
}

.empty-state-icon {
    font-size: 4rem;
    margin-bottom: var(--space-4);
    opacity: 0.7;
}

.empty-state-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--space-2);
}

.empty-state-description {
    color: var(--text-muted);
    max-width: 400px;
    margin: 0 auto;
}

/* ===== REFUND SPECIFIC ===== */
.refund-form {
    display: none;
}

.refund-form.show {
        display: block;
    animation: fadeInUp 0.3s ease-out;
}

.date-range {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
}


.date-separator {
    color: var(--text-muted);
    font-weight: 500;
    font-size: 0.875rem;
}


.form-hint {
    color: var(--text-muted);
    font-size: 0.75rem;
    margin-top: var(--space-2);
    display: block;
}

.selected-product {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin: var(--space-4) 0;
}

.selected-header h4 {
    margin: 0 0 var(--space-3) 0;
    color: var(--text-primary);
    font-size: 1.125rem;
}

.selected-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-3);
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) 0;
    border-bottom: 1px solid var(--border-primary);
}

.detail-item:last-child {
    border-bottom: none;
}

.detail-label {
    font-weight: 600;
    color: var(--text-secondary);
}

.detail-value {
    color: var(--text-primary);
    font-weight: 500;
}

/* ===== DROPDOWN MENUS ===== */
.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    min-width: 160px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: var(--transition);
    margin-top: var(--space-1);
    pointer-events: none;
}

.dropdown-menu.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    color: var(--text-primary);
    text-decoration: none;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
    transition: var(--transition);
    font-size: 0.875rem;
}

.dropdown-item:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.dropdown-item:first-child {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
}

.dropdown-item:last-child {
    border-bottom-left-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-lg);
}

.dropdown-divider {
    height: 1px;
    background: var(--border-primary);
    margin: var(--space-2) 0;
}

.dropdown-arrow {
    font-size: 0.75rem;
    transition: var(--transition);
}

.dropdown-toggle[aria-expanded="true"] .dropdown-arrow {
    transform: rotate(180deg);
}

/* ===== MODALS ===== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition);
    backdrop-filter: blur(4px);
}

    .modal.show {
    opacity: 1;
    visibility: visible;
    }

.modal-content {
    background: var(--bg-card);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    transform: scale(0.9);
    transition: var(--transition);
}

.modal.show .modal-content {
    transform: scale(1);
}

.modal-header {
    padding: var(--space-6);
    border-bottom: 1px solid var(--border-primary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
}

.modal-header h3 {
    margin: 0;
    color: var(--text-primary);
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-muted);
    transition: var(--transition);
    width: 32px;
    height: 32px;
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.modal-body {
    padding: var(--space-6);
}

.modal-footer {
    padding: var(--space-6);
    border-top: 1px solid var(--border-primary);
    display: flex;
    gap: var(--space-3);
    justify-content: flex-end;
    background: var(--bg-secondary);
}


/* ===== SCHEDULE SPECIFIC ===== */
.schedule-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-6);
    padding: var(--space-6);
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
}

.view-toggle {
    display: flex;
    gap: var(--space-2);
}

.schedule-actions {
    display: flex;
    gap: var(--space-3);
}

.personal-controls {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

.view-mode-toggle {
    display: flex;
    gap: var(--space-2);
}

.team-sub-view, .personal-sub-view {
    display: none;
}

.team-sub-view.active, .personal-sub-view.active {
        display: block;
}

.schedule-view {
    display: none;
}

.schedule-view.active {
    display: block;
}

.schedule-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-6);
    padding: var(--space-4);
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-primary);
}

.schedule-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-size: 1.25rem;
}

.week-navigation, .month-navigation {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.week-display, .month-display {
    font-size: 16px;
    font-weight: 700;
        color: var(--primary);
    min-width: 150px;
    text-align: center;
    background: var(--primary-light);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-lg);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-sm);
}

.schedule-table {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    overflow: hidden;
    margin-bottom: var(--space-6);
    box-shadow: var(--shadow-sm);
}

.schedule-grid {
    display: grid;
    grid-template-columns: 120px repeat(7, 1fr);
    gap: 1px;
    background: var(--border-primary);
}

.schedule-header-cell {
    background: var(--bg-tertiary);
    padding: var(--space-4);
        font-weight: 600;
    color: var(--text-primary);
    text-align: center;
    font-size: 0.875rem;
}

.schedule-time-cell {
    background: var(--bg-secondary);
    padding: var(--space-3);
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: center;
    font-weight: 500;
}

.schedule-day-cell {
    background: var(--bg-secondary);
    padding: var(--space-4);
    font-weight: 600;
    color: var(--text-primary);
    text-align: center;
    font-size: 0.875rem;
}

.schedule-slot {
    background: var(--bg-card);
    padding: var(--space-3);
    min-height: 60px;
    border: 1px solid var(--border-primary);
    position: relative;
    cursor: pointer;
    transition: var(--transition);
}

.schedule-slot:hover {
    background: var(--bg-secondary);
    transform: scale(1.02);
}

.schedule-slot.occupied {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    border-left: 4px solid var(--primary);
}

.schedule-slot.occupied:hover {
    background: var(--bg-secondary);
    transform: scale(1.02);
}

.shift-info {
    font-size: 0.75rem;
    font-weight: 500;
    margin-bottom: 2px;
}

.shift-time {
    font-size: 0.625rem;
    opacity: 0.8;
}

.shift-note {
    font-size: 0.625rem;
    opacity: 0.7;
    margin-top: 2px;
    font-style: italic;
}

/* ===== MONTHLY VIEW ===== */
.monthly-calendar {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    overflow: hidden;
    margin-bottom: var(--space-6);
    box-shadow: var(--shadow-sm);
}

.monthly-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background: var(--border-primary);
}

.monthly-day {
    background: var(--bg-card);
    padding: var(--space-4);
    min-height: 120px;
    border: 1px solid var(--border-primary);
    position: relative;
}

.monthly-day.other-month {
    background: var(--bg-secondary);
    opacity: 0.5;
}

.monthly-day.today {
    background: var(--primary-light);
    border-color: var(--primary);
}

.monthly-day-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.monthly-day-number {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.875rem;
}

.monthly-day-shifts {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.monthly-shift {
    font-size: 0.625rem;
    padding: 2px 4px;
    border-radius: var(--radius-sm);
    color: white;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
}

.monthly-shift:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

/* ===== PEOPLE MANAGEMENT ===== */
.people-summary {
    margin-top: var(--space-6);
    padding: var(--space-6);
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
}

.people-summary h4 {
    margin: 0 0 var(--space-4) 0;
    color: var(--text-primary);
    font-size: 1.25rem;
}

.people-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
}

.person-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.person-card::before {
    content: none;
    height: 0;
}

.person-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
}

.person-card-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.person-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: 600;
    color: white;
    box-shadow: var(--shadow-md);
}

.person-name {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.person-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-3);
}

.person-stat {
    text-align: center;
}

.person-stat-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}

.person-stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: 0;
}

/* ===== STATS ===== */
.schedule-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
}

.stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    display: flex;
    align-items: center;
    gap: var(--space-4);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: none;
    height: 0;
}

.stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
}

.stat-icon {
    font-size: 2rem;
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: var(--shadow-md);
}

.stat-info {
    flex: 1;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0;
}

/* ===== FAMILY CHECK STYLES ===== */
.family-check-card {
    max-width: 100%;
}

.family-check-form {
    margin-bottom: var(--space-8);
}

/* Pairs Control - Beautiful Light Style */
.pairs-control {
    margin-bottom: var(--space-6);
    padding: var(--space-6);
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border-radius: 20px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.pairs-input-row {
    display: flex;
    align-items: flex-start;
    gap: var(--space-6);
    justify-content: flex-start;
    position: relative;
    z-index: 1;
}

.quick-select-buttons {
    display: flex;
    gap: var(--space-2);
}

.quick-btn {
    padding: 12px 24px;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 600;
    color: #4a5568;
    font-size: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}


.quick-btn:hover:not(.active) {
    background: #f7fafc;
    border-color: #3182ce;
    color: #3182ce;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
}

.quick-btn.active {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.custom-input-group {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.input-label {
    font-size: 16px;
    color: #4a5568;
    font-weight: 600;
}

.custom-input-group .form-input {
    width: 80px;
    height: 48px;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    background: white;
    color: #2d3748;
    font-weight: 600;
    font-size: 16px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.custom-input-group .form-input:focus {
    outline: none;
    border-color: #3182ce;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
}


/* Email Containers */
.email-containers {
    margin-bottom: var(--space-6);
}

.email-pair {
    display: block;
    margin-bottom: var(--space-6);
    padding: var(--space-6);
    background: white;
    border-radius: 20px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}


.pair-header {
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid #e2e8f0;
    position: relative;
    z-index: 1;
}

.pair-title {
    margin: 0;
    font-size: 24px;
    font-weight: 700;
    color: #2d3748;
    position: relative;
}

.pair-title::before {
    content: '📧';
    margin-right: 8px;
    font-size: 20px;
}

.email-pair .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-6);
    position: relative;
    z-index: 1;
}

.email-pair .form-group .form-label {
    font-size: 18px;
    font-weight: 600;
    color: #4a5568;
    margin-bottom: var(--space-3);
    display: block;
}

.email-pair .form-textarea {
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: var(--space-4);
    font-size: 16px;
    line-height: 1.6;
    background: #f8fafc;
    color: #2d3748;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    resize: vertical;
    min-height: 120px;
}

.email-pair .form-textarea:focus {
    outline: none;
    border-color: #3182ce;
    background: white;
    box-shadow: 0 0 0 4px rgba(49, 130, 206, 0.1);
    transform: translateY(-2px);
}

/* Beautiful Light Buttons */
.family-check-form .btn-primary {
    background: #3182ce;
    border: none;
    border-radius: 16px;
    padding: 16px 32px;
    font-size: 18px;
    font-weight: 600;
    color: white;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.family-check-form .btn-primary:hover {
    background: #2c5aa0;
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(49, 130, 206, 0.3);
}

.family-check-form .btn-outline {
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: 16px 32px;
    font-size: 18px;
    font-weight: 600;
    color: #4a5568;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.family-check-form .btn-outline:hover {
    background: #f7fafc;
    border-color: #3182ce;
    color: #3182ce;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
}

/* Dark Mode - Beautiful Design */
.dark .pairs-control {
    background: #2d3748;
    border: 1px solid #4a5568;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.dark .input-label {
    color: #e2e8f0;
    font-weight: 600;
}

.dark .custom-input-group .form-input {
    background: #1a202c;
    border-color: #4a5568;
    color: #e2e8f0;
}

.dark .custom-input-group .form-input:focus {
    border-color: #3182ce;
    background: #2d3748;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
}

.dark .email-pair {
    background: #1a202c;
    border: 1px solid #4a5568;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.dark .pair-header {
    border-bottom-color: #4a5568;
}

.dark .pair-title {
    color: #e2e8f0;
    font-weight: 700;
}

.dark .email-pair .form-group .form-label {
    color: #e2e8f0;
    font-weight: 600;
}

.dark .email-pair .form-textarea {
    background: #2d3748;
    border-color: #4a5568;
    color: #e2e8f0;
}

.dark .email-pair .form-textarea:focus {
    border-color: #3182ce;
    background: #1a202c;
    box-shadow: 0 0 0 4px rgba(49, 130, 206, 0.1);
}

/* Dark Mode - Simple Buttons */
.dark .quick-btn {
    background: #1a202c !important;
    border-color: #4a5568 !important;
    color: #e2e8f0 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.dark .quick-btn:hover:not(.active) {
    background: #2d3748 !important;
    border-color: #3182ce !important;
    color: #3182ce !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2) !important;
}

.dark .quick-btn.active {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2) !important;
}

.dark .quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

/* Force active button styling - High specificity */
button.quick-btn.active,
.dark button.quick-btn.active,
.family-check-form button.quick-btn.active,
.dark .family-check-form button.quick-btn.active {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

button.quick-btn.active:hover,
.dark button.quick-btn.active:hover,
.family-check-form button.quick-btn.active:hover,
.dark .family-check-form button.quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

/* Maximum specificity for active buttons */
.pairs-control .quick-select-buttons button.quick-btn.active {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.pairs-control .quick-select-buttons button.quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.dark .pairs-control .quick-select-buttons button.quick-btn.active {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.dark .pairs-control .quick-select-buttons button.quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.dark .family-check-form .btn-outline {
    background: #1a202c !important;
    border-color: #4a5568 !important;
    color: #e2e8f0 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.dark .family-check-form .btn-outline:hover {
    background: #2d3748 !important;
    border-color: #3182ce !important;
    color: #3182ce !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2) !important;
}

.dark .family-check-form .btn-primary {
    background: #3182ce !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2) !important;
}

.dark .family-check-form .btn-primary:hover {
    background: #2c5aa0 !important;
    box-shadow: 0 8px 24px rgba(49, 130, 206, 0.3) !important;
}

/* ULTRA HIGH SPECIFICITY - Force active button styling */
.family-check-form .pairs-control .quick-select-buttons button.quick-btn.active,
.family-check-form .pairs-control .quick-select-buttons button.quick-btn.active:hover,
.dark .family-check-form .pairs-control .quick-select-buttons button.quick-btn.active,
.dark .family-check-form .pairs-control .quick-select-buttons button.quick-btn.active:hover {
    background: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

/* FINAL SOLUTION - Override everything at the end */

/* Results Container */
.results-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
}

.pair-result {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.pair-result-header {
    display: flex;
    justify-content: flex-start; /* Căn trái thay vì space-between */
    align-items: center;
    gap: var(--space-3); /* Khoảng cách giữa "Cặp 1" và "ĐẠT" */
    padding: var(--space-3) var(--space-4);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-primary);
}

.pair-result-header h5 {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Style cho status badge */
.pair-status {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.status-badge {
    padding: var(--space-2) var(--space-4); /* Tăng padding để to hơn */
    border-radius: var(--radius);
    font-size: 1rem; /* Tăng font size từ 0.875rem lên 1rem */
    font-weight: 700; /* Tăng font weight */
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.success {
    background: #22c55e; /* Nền xanh */
    color: white; /* Chữ trắng */
    border: none;
}

.status-badge.warning {
    background: #eab308;
    color: white;
    border: none;
}

.status-badge.error {
    background: #ef4444;
    color: white;
    border: none;
}

/* Style cho multiple badges (KHÔNG ĐẠT CÓ THỂ ĐẠT) */
.pair-status .status-badge + .status-badge {
    margin-left: var(--space-1); /* Khoảng cách giữa 2 badge */
}

/* Result Header Layout */
.result-header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
    min-height: 50px;
    padding: 0 var(--space-4);
    gap: var(--space-4);
}

.result-title {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    line-height: 1.1;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    gap: 2px;
}

/* View Toggle Buttons */
.view-toggle-container {
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
}

.view-toggle-buttons {
    display: flex;
    gap: var(--space-1);
    border-radius: var(--radius);
    background-color: var(--bg-secondary);
    padding: 2px;
    border: 1px solid var(--border-primary);
}

.view-btn {
    padding: 6px 12px;
    font-size: 0.75rem;
    font-weight: 500;
    border: none;
    border-radius: calc(var(--radius) - 2px);
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    outline: none;
}

.view-btn:hover {
    color: var(--text-primary);
    background-color: var(--bg-hover);
}

.view-btn.active {
    background-color: var(--primary);
    color: white;
    font-weight: 600;
    box-shadow: var(--shadow-sm);
}

.view-btn.active:hover {
    background-color: var(--primary-dark);
    color: white;
}

/* Help Button */
.btn-help {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: 1px solid #059669;
}

.btn-help:hover {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-4);
}

.modal-content {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    max-width: 650px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid var(--border-primary);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-4) var(--space-4) var(--space-3);
    border-bottom: 1px solid var(--border-primary);
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--secondary-light) 100%);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.modal-title {
    margin: 0;
    color: var(--primary-dark);
    font-size: 1.25rem;
    font-weight: 700;
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius);
    transition: all 0.2s ease;
}

.modal-close:hover {
    background-color: var(--bg-hover);
    color: var(--text-primary);
}

.modal-body {
    padding: var(--space-4);
}

.guide-section {
    margin-bottom: var(--space-6);
}

.guide-section:last-child {
    margin-bottom: 0;
}

.guide-section h4 {
    color: var(--primary);
    font-size: 1rem;
    font-weight: 600;
    margin: 0 0 var(--space-3) 0;
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.guide-section p {
    color: var(--text-primary);
    line-height: 1.6;
    margin: 0 0 var(--space-3) 0;
}

.guide-section ul {
    color: var(--text-primary);
    line-height: 1.6;
    margin: 0;
    padding-left: var(--space-4);
}

.guide-section li {
    margin-bottom: var(--space-1);
}

/* Guide Steps */
.guide-steps {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.step {
    display: flex;
    gap: var(--space-3);
    align-items: flex-start;
}

.step-number {
    background: var(--primary);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
    font-weight: 600;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.step-content strong {
    color: var(--primary-dark);
    display: block;
    margin-bottom: var(--space-2);
}

/* Result Explanations */
.result-explanations {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.result-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border-left: 4px solid var(--border-primary);
}

.result-content {
    flex: 1;
    line-height: 1.5;
}

.result-content strong {
    color: var(--text-primary);
    font-weight: 600;
}

.result-content code {
    background: var(--bg-tertiary);
    padding: 2px 4px;
    border-radius: 3px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.85em;
    color: var(--primary);
    border: 1px solid var(--border-secondary);
}

.result-success {
    border-left-color: var(--success);
}

.result-warning {
    border-left-color: var(--warning);
}

.result-error {
    border-left-color: var(--error);
}

.status-demo {
    padding: 4px 8px;
    border-radius: var(--radius);
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
}

.status-demo.status-success {
    background-color: var(--success-light);
    color: var(--success-dark);
    border: 1px solid var(--success);
}

.status-demo.status-warning {
    background-color: var(--warning-light);
    color: var(--warning-dark);
    border: 1px solid var(--warning);
}

.status-demo.status-error {
    background-color: var(--error-light);
    color: var(--error-dark);
    border: 1px solid var(--error);
}

/* Color Demos */
.color-demo {
    font-weight: 600;
    padding: 2px 4px;
    border-radius: 3px;
    font-size: 0.85em;
}

.color-demo.green {
    color: var(--success-dark);
    background: var(--success-light);
}

.color-demo.yellow {
    color: var(--warning-dark);
    background: var(--warning-light);
}

.color-demo.red {
    color: var(--error-dark);
    background: var(--error-light);
}

/* Quick Steps */
.quick-steps {
    counter-reset: step-counter;
    list-style: none;
    padding: 0;
    margin: 0;
}

.quick-steps li {
    counter-increment: step-counter;
    padding: var(--space-2) var(--space-3);
    margin-bottom: var(--space-2);
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border-left: 3px solid var(--primary);
    position: relative;
    color: var(--text-primary);
}

.quick-steps li::before {
    content: counter(step-counter);
    position: absolute;
    left: -10px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--primary);
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Tips */
.tips {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.tip {
    padding: var(--space-2) var(--space-3);
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border-left: 3px solid var(--accent);
    color: var(--text-primary);
    font-size: 0.875rem;
}

/* Color Guide Simple */
.color-guide-simple {
    padding: var(--space-4);
}

.color-guide-simple h3 {
    text-align: center;
    margin-bottom: var(--space-4);
    color: var(--primary);
    font-size: 1.3rem;
    font-weight: 700;
}

.color-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.color-row {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3);
    border-radius: var(--radius);
    border: 2px solid;
    transition: all 0.3s ease;
}

.color-row:hover {
    transform: translateX(4px);
    box-shadow: var(--shadow-md);
}

.color-row.perfect {
    border-color: var(--success);
    background: var(--success-light);
}

.color-row.warning {
    border-color: var(--warning);
    background: var(--warning-light);
}

.color-row.error {
    border-color: var(--error);
    background: var(--error-light);
}

.color-indicator {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    min-width: 80px;
}

.color-label {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-primary);
}

.color-meaning {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    flex: 1;
}

.status-text {
    font-weight: 600;
    font-size: 1rem;
    color: var(--text-primary);
}

.action-text {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-style: italic;
}

.quick-tip {
    text-align: center;
    padding: var(--space-3);
    background: linear-gradient(135deg, var(--accent-light) 0%, var(--primary-light) 100%);
    border-radius: var(--radius);
    border: 2px solid var(--accent);
    color: var(--accent-dark);
    font-size: 1rem;
}

.color-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    flex-shrink: 0;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.color-dot.green {
    background: var(--success);
}

.color-dot.yellow {
    background: var(--warning);
}

.color-dot.red {
    background: var(--error);
}


/* Dark theme adjustments */
.dark .color-guide-simple h3 {
    color: var(--primary-light);
}

.dark .color-row.perfect {
    background: rgba(16, 185, 129, 0.15);
}

.dark .color-row.warning {
    background: rgba(245, 158, 11, 0.15);
}

.dark .color-row.error {
    background: rgba(239, 68, 68, 0.15);
}

.dark .quick-tip {
    background: linear-gradient(135deg, var(--accent-dark) 0%, var(--primary-dark) 100%);
    color: var(--accent-light);
    border-color: var(--accent-dark);
}

.dark .modal-header {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
}

.dark .modal-title {
    color: var(--primary-light);
}

/* Modal body and all text elements */
.dark .modal-body {
    color: var(--text-primary) !important;
}

.dark .modal-body * {
    color: var(--text-primary) !important;
}

.dark .guide-section h4 {
    color: var(--primary-light) !important;
}

.dark .guide-section p {
    color: var(--text-primary) !important;
}

.dark .guide-section li {
    color: var(--text-primary) !important;
}

.dark .guide-section ul {
    color: var(--text-primary) !important;
}

.dark .guide-section ol {
    color: var(--text-primary) !important;
}

/* Result explanations */
.dark .result-explanations {
    color: var(--text-primary) !important;
}

.dark .result-content {
    color: var(--text-primary) !important;
}

.dark .result-content strong {
    color: var(--text-primary) !important;
}

.dark .result-content code {
    color: var(--primary-light) !important;
    background: var(--bg-tertiary) !important;
}

/* Steps */
.dark .guide-steps {
    color: var(--text-primary) !important;
}

.dark .step {
    color: var(--text-primary) !important;
}

.dark .step-content {
    color: var(--text-primary) !important;
}

.dark .step-content strong {
    color: var(--primary-light) !important;
}

.dark .step-content ul {
    color: var(--text-primary) !important;
}

.dark .step-content li {
    color: var(--text-primary) !important;
}

/* Quick steps */
.dark .quick-steps {
    color: var(--text-primary) !important;
}

.dark .quick-steps li {
    color: var(--text-primary) !important;
}

/* Tips */
.dark .tips {
    color: var(--text-primary) !important;
}

.dark .tip {
    color: var(--text-primary) !important;
}

/* Color demos */
.dark .color-demo.green {
    color: var(--success) !important;
    background: rgba(16, 185, 129, 0.2) !important;
}

.dark .color-demo.yellow {
    color: var(--warning) !important;
    background: rgba(245, 158, 11, 0.2) !important;
}

.dark .color-demo.red {
    color: var(--error) !important;
    background: rgba(239, 68, 68, 0.2) !important;
}

/* Responsive */
@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        margin: var(--space-2);
    }

    .color-guide-simple {
        padding: var(--space-3);
    }

    .color-row {
        flex-direction: column;
        text-align: center;
        gap: var(--space-2);
    }

    .color-indicator {
        justify-content: center;
        min-width: auto;
    }
}

@media (max-width: 640px) {
    .modal-overlay {
        padding: var(--space-2);
    }
    
    .modal-content {
        max-height: 95vh;
    }
    
    .modal-header {
        padding: var(--space-3);
    }

    .guide-intro {
        font-size: 1rem;
        padding: var(--space-2) var(--space-3);
    }

    .status-icon {
        font-size: 1.5rem;
    }

    .action-icon {
        font-size: 1.2rem;
    }

    .matrix-item, .action-card {
        padding: var(--space-2);
    }
    
    .modal-body {
        padding: var(--space-3);
    }
    
    .modal-title {
        font-size: 1.1rem;
    }
    
    .step {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
    }
    
    .result-item {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
    }
}


/* Responsive design */
@media (max-width: 640px) {
    .result-header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-4);
        min-height: auto;
        padding: 0;
    }
    
    .result-title {
        font-size: 0.75rem;
        margin-bottom: 0;
    }
    
    .result-header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
        padding: 0 var(--space-2);
    }
    
    .view-toggle-container {
        margin: 0;
        align-self: flex-end;
    }
    
    .view-toggle-buttons {
        gap: 1px;
        padding: 1px;
    }
    
    .view-btn {
        padding: 4px 8px;
        font-size: 0.7rem;
    }
}

/* Overview mode styles */
.overview-mode .empty-row {
    display: none;
}

.overview-mode .single-note-container {
    display: none;
}

.pair-result-content {
    padding: var(--space-6);
}

/* Summary Stats */
.result-summary {
    margin-top: var(--space-3);
    display: flex;
    align-items: center;
}

.summary-stats {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
    align-items: center;
}

.summary-item {
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius);
    font-size: 0.875rem;
    font-weight: 600;
}

.summary-item.success {
    background: var(--success);
    color: white;
}

.summary-item.warning {
    background: var(--warning);
    color: white;
}

.summary-item.error {
    background: var(--error);
    color: white;
}

.family-check-result {
    margin-top: var(--space-8);
    padding: var(--space-6);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-primary);
}

.result-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-4);
    border-bottom: 2px solid var(--border-primary);
}

.result-status {
    font-size: 1.1rem;
    font-weight: 600;
}

.status-badge {
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius);
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.status-success {
    background: var(--success);
    color: white;
}

.status-warning {
    background: var(--warning);
    color: white;
}

.status-error {
    background: var(--error);
    color: white;
}

.status-info {
    background: var(--info);
    color: white;
}

.result-sections {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.result-section {
    background: var(--bg-card);
    padding: var(--space-6);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-primary);
}

.result-section h5 {
    margin: 0 0 var(--space-4) 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
}

.result-section h6 {
    margin: 0 0 var(--space-3) 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
}

/* Email Lists */
.email-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.email-item {
    display: flex;
    flex-direction: column;
    padding: 0;
    border-radius: 0;
    border: none;
    background: transparent;
}

.email-name {
    display: none;
}

.email-address {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--text-primary);
    white-space: nowrap;
    word-break: normal;
    overflow-wrap: normal;
    letter-spacing: 0.2px;
}

/* Email Colors */
.email-green { }

.email-yellow { }

.email-red { }

.email-empty {
    color: var(--text-muted);
    font-style: italic;
}

/* Differences Container */
.differences-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.difference-group {
    background: transparent;
    padding: 0;
    border-radius: 0;
    border: none;
}

.no-differences {
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
    padding: var(--space-4);
}

/* Possible Matches */
.possible-matches-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.possible-match-item {
    background: transparent;
    padding: 0;
    border-radius: 0;
    border: none;
}

.match-header {
    margin-bottom: var(--space-3);
}

.similarity-score {
    background: var(--warning);
    color: white;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    font-weight: 600;
}

.match-emails {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.email-comparison {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* Character Differences */
.char-different { color: var(--error); font-weight: 700; }

/* Color emails by state in differences/possible sections using text color only */
.possible-matches-container .email-yellow .email-address,
.possible-matches-container .email-yellow .email-name { color: #b45309; }
.differences-container .email-red .email-address,
.differences-container .email-red .email-name { color: var(--error); }

/* Comparison Table */
.comparison-table-container {
    overflow-x: visible;
    border-radius: 0;
    border: none;
    background: transparent;
    padding: 0;
}
.comparison-table-container.no-frame { padding: 0; margin: 0; }

.comparison-table {
    width: 100%;
    border-collapse: collapse;
    background: transparent;
    table-layout: auto;
}

/* ===== EMAIL GRID LAYOUT (2 cột) ===== */
.email-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 32px;
    row-gap: 10px;
    align-items: center;
}
.email-grid .two-col { grid-column: 1 / span 2; }
.email-grid .grid-header {
    font-weight: 700;
    color: var(--text-primary);
    padding: 0 0 4px 0;
}
.email-grid .cell {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 1.1rem;
    letter-spacing: 0.2px;
    white-space: nowrap;
}
.email-grid .cell.email-green { color: #059669; font-weight: 700; }
.email-grid .cell.email-yellow { color: #b45309; }
.email-grid .cell.email-red { color: var(--error); }
.email-grid .cell.email-empty { color: var(--text-muted); font-style: italic; }

.comparison-table th {
    background: transparent;
    padding: var(--space-2) 0;
    text-align: left;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: none;
}

.comparison-table td {
    padding: var(--space-2) 0;
    border-bottom: none;
    vertical-align: top;
    background: transparent;
}
/* Prefer flexible columns; allow natural width */

.comparison-table tr:last-child td {
    border-bottom: none;
}

.email-cell { min-width: 0; }

.status-cell {
    display: none;
}

.match-row.exact-match { background: transparent; }
.match-row.exact-match .email-address { color: #059669; font-weight: 700; }

.match-row.similar-match { background: transparent; }

.match-row.family-only td:first-child { background: transparent; }

.match-row.stored-only td:nth-child(2) { background: transparent; }

/* Responsive Design for Family Check */
@media (max-width: 768px) {
    .results-container { grid-template-columns: 1fr; }
    .family-check-form .form-grid {
        grid-template-columns: 1fr;
    }
    
    .email-pair .form-row {
        grid-template-columns: 1fr;
        gap: var(--space-4);
    }
    
    .pairs-input-row {
        flex-direction: column;
        gap: var(--space-4);
        align-items: flex-start;
    }
    
    .quick-select-buttons {
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: var(--space-2);
    }
    
    .quick-btn {
        flex: 1;
        min-width: 80px;
        padding: 10px 20px;
        font-size: 14px;
    }
    
    .custom-input-group {
        justify-content: flex-start;
    }
    
    .custom-input-group .form-input {
        width: 80px;
        height: 44px;
        font-size: 14px;
    }
    
    .input-label {
        font-size: 14px;
    }
    
    .pair-title {
        font-size: 20px;
    }
    
    .email-pair .form-group .form-label {
        font-size: 16px;
    }
    
    .family-check-form .btn-primary,
    .family-check-form .btn-outline {
        padding: 14px 24px;
        font-size: 16px;
    }
    
    .pair-result-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }
    
    .summary-stats {
        flex-direction: column;
        gap: var(--space-2);
    }
    
    .result-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }
    
    .differences-container {
        gap: var(--space-4);
    }
    
    .comparison-table-container {
        font-size: 0.875rem;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: var(--space-3);
    }
    
    .email-cell {
        min-width: 150px;
    }
    
    .status-cell {
        min-width: 120px;
    }
}

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 1024px) {
    .sidebar {
        transform: translateX(-100%);
        transition: var(--transition);
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0;
    }
    
    .content-area {
        padding: var(--space-4);
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .schedule-grid {
        grid-template-columns: 80px repeat(7, 1fr);
        font-size: 0.75rem;
    }
    
    .schedule-slot {
        min-height: 40px;
        padding: var(--space-2);
    }
    
    .monthly-grid {
        grid-template-columns: repeat(7, 1fr);
        font-size: 0.75rem;
    }
    
    .monthly-day {
        min-height: 80px;
        padding: var(--space-2);
    }
    
    .people-grid {
        grid-template-columns: 1fr;
    }
    
    .person-stats {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .schedule-controls {
        flex-direction: column;
        gap: var(--space-4);
        align-items: stretch;
    }
    
    .view-toggle, .schedule-actions {
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .content-area {
        padding: var(--space-3);
    }
    
    .card-content {
        padding: var(--space-4);
    }
    
    .modal-content {
        width: 95%;
        margin: var(--space-4);
    }
    
    .schedule-grid {
        grid-template-columns: 60px repeat(7, 1fr);
        font-size: 0.625rem;
    }
    
    .monthly-day {
        min-height: 60px;
        padding: var(--space-1);
    }
}

/* ===== ANIMATIONS ===== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0);
    }
}

.fade-in-up {
    animation: fadeInUp 0.6s ease-out;
}

.fade-in {
    animation: fadeIn 0.4s ease-out;
}

.slide-in-right {
    animation: slideInRight 0.4s ease-out;
}

/* ===== UTILITIES ===== */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }

.p-0 { padding: 0; }
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }

.hidden { display: none; }
.block { display: block; }
.flex { display: flex; }
.grid { display: grid; }

.w-full { width: 100%; }
.h-full { height: 100%; }

.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }

.cursor-pointer { cursor: pointer; }
.cursor-not-allowed { cursor: not-allowed; }

.transition { transition: var(--transition); }
.transition-fast { transition: var(--transition-fast); }
.transition-slow { transition: var(--transition-slow); }

/* ===== LAYOUT UTILITIES ===== */
.space-y-2 > * + * { margin-top: var(--space-2); }
.space-y-3 > * + * { margin-top: var(--space-3); }
.space-y-4 > * + * { margin-top: var(--space-4); }
.space-y-6 > * + * { margin-top: var(--space-6); }

.space-x-2 > * + * { margin-left: var(--space-2); }
.space-x-3 > * + * { margin-left: var(--space-3); }
.space-x-4 > * + * { margin-left: var(--space-4); }
.space-x-6 > * + * { margin-left: var(--space-6); }

.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.gap-4 { gap: var(--space-4); }
.gap-6 { gap: var(--space-6); }

.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }

.justify-center { justify-content: center; }
.justify-start { justify-content: flex-start; }
.justify-end { justify-content: flex-end; }
.justify-between { justify-content: space-between; }

.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }

/* Version badge */
.version-badge {
    position: fixed;
    right: 16px;
    bottom: 16px;
    background: #2563eb;
    color: #fff;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    box-shadow: var(--shadow-md);
    z-index: 3000;
}

/* Refund result share block */
.share-block { margin-top: 12px; display: flex; gap: 8px; }
.share-block .btn { padding: 8px 12px; }

/* Toast notifications */
.toast-container { position: fixed; top: 16px; right: 16px; display: flex; flex-direction: column; gap: 8px; z-index: 4000; }
.toast { padding: 10px 14px; border-radius: 8px; color: #fff; box-shadow: var(--shadow-md); animation: fadein .2s ease; }
.toast.success { background: #10b981; }
.toast.error { background: #ef4444; }
.toast.info { background: #3b82f6; }
@keyframes fadein { from { opacity: .6; transform: translateY(-6px);} to { opacity: 1; transform: none;}}

/* Refund search results */
.search-container { position: relative; max-width: 360px; overflow: visible; }
.refund-card, .refund-card .card-content, .refund-form { overflow: visible; }
.search-results { position: absolute; left: 0; right: 0; width: 100%; display:none; margin-top: 6px; border: 1px solid var(--border-primary); border-radius: 10px; overflow: hidden; background: #fff; box-shadow: var(--shadow-md); max-height: 280px; overflow-y: auto; z-index: 10000; }
.search-results.show { display:block; pointer-events: auto; }
.search-hint { padding: 8px 12px; color: var(--text-secondary); font-size: 12px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-primary); position: sticky; top: 0; }
.search-item { padding: 12px 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; gap: 10px; }
.search-item:hover { background: var(--bg-tertiary); }
.search-item .product-name { font-weight: 700; color: var(--text-primary); font-size: 15px; }
.search-item .product-details { color: var(--text-secondary); font-size: 12px; }

/* Refund result layout */
.result-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 768px) {
  .result-sections { grid-template-columns: 1fr; }
}

.result-section { 
    background: var(--bg-card); 
    border: 1px solid var(--border-primary); 
    border-radius: 8px; 
    padding: 16px; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.result-section h5 { 
    margin-bottom: 12px; 
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-primary);
}

/* ===== UPGRADE FORM STYLING ===== */
.upgrade-form {
    padding: 24px;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
}

.upgrade-form .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    align-items: start;
}

.upgrade-form .form-group {
    background: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.upgrade-form .form-label {
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
    font-size: 14px;
    display: block;
}

.upgrade-form .form-input {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
    transition: all 0.2s ease;
    background: white;
}

.upgrade-form .form-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.upgrade-form .form-input:hover {
    border-color: #9ca3af;
}

.upgrade-form .search-container {
    position: relative;
    margin-bottom: 16px;
}

.upgrade-form .search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 10;
    max-height: 240px;
    overflow-y: auto;
}

/* Dark mode override for upgrade search dropdown */
.dark .upgrade-form .search-results { background: #1e293b; border-color: #334155; box-shadow: 0 6px 18px rgba(0,0,0,0.35); }
.dark .upgrade-form .search-results .search-item { color: #e5e7eb; }
.dark .upgrade-form .search-results .search-item:hover { background: #334155; }

/* Structure inside search item */
.upgrade-form .search-results .product-name { font-weight: 700; }
.upgrade-form .search-results .product-price { font-weight: 600; }
.upgrade-form .search-results .product-duration { opacity: .9; }

.dark .upgrade-form .search-results .product-name,
.dark .upgrade-form .search-results .product-price,
.dark .upgrade-form .search-results .product-duration { color: #e5e7eb; }

/* Pills/badges in dropdown */
.upgrade-form .search-results .pill { background: #eef2ff; color: #1e3a8a; border-radius: 6px; padding: 2px 6px; font-size: 11px; }
.dark .upgrade-form .search-results .pill { background: #0f172a; color: #e5e7eb; border: 1px solid #334155; }

.upgrade-form .search-results .search-item {
    padding: 12px 16px;
    border-bottom: 1px solid #f3f4f6;
    cursor: pointer;
    transition: background-color 0.2s;
}

.upgrade-form .search-results .search-item:hover {
    background: #f9fafb;
}

.upgrade-form .search-results .search-item:last-child {
    border-bottom: none;
}

/* Actual structure used in upgrade.js search results */
.upgrade-form .search-results .search-result-item {
    padding: 12px 14px;
    display: flex;
    gap: 10px;
    border-bottom: 1px solid #f3f4f6;
}
.upgrade-form .search-results .search-result-item:last-child { border-bottom: none; }
.upgrade-form .search-results .result-info { display: flex; flex-direction: column; gap: 4px; }
.upgrade-form .search-results .result-name { font-weight: 700; color: var(--text-on-light); }
.upgrade-form .search-results .result-details { color: var(--text-muted-on-light); font-size: 12px; display: flex; gap: 10px; }
.upgrade-form .search-results .result-price { font-weight: 700; color: #059669; } /* green, bold */
.upgrade-form .search-results .result-duration { color: #d97706; } /* amber (yellow) */

.dark .upgrade-form .search-results .search-result-item { border-bottom-color: #334155; }
.dark .upgrade-form .search-results .result-name { color: var(--text-on-dark); }
.dark .upgrade-form .search-results .result-details { color: var(--text-muted-on-dark); }
.dark .upgrade-form .search-results .result-price { color: #10b981; font-weight: 800; } /* green brighter, bolder */
.dark .upgrade-form .search-results .result-duration { color: #fbbf24; } /* amber light */

/* Category badge (result-category) - ensure readable in both themes */
.upgrade-form .search-results .result-category {
    background: #f3f4f6; /* lighter, higher contrast */
    color: #111827; /* dark text */
    border: 1px solid #d1d5db;
    padding: 3px 8px;
    border-radius: 6px;
    font-size: 11px;
    line-height: 1;
    font-weight: 600;
}
.dark .upgrade-form .search-results .result-category {
    background: #111827; /* deeper */
    color: #f3f4f6; /* brighter */
    border-color: #475569;
    font-weight: 700;
}

/* Calculate button styling */
.upgrade-form .btn-calculate {
    width: 100%;
    margin-top: 24px;
    padding: 16px 24px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.upgrade-form .btn-calculate:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
}

/* Dark mode for upgrade form */
.dark .upgrade-form {
    background: #0f172a;
    border-color: #334155;
}

.dark .upgrade-form .form-group {
    background: #1e293b;
    border-color: #334155;
}

.dark .upgrade-form .form-label {
    color: #e2e8f0;
}

.dark .upgrade-form .form-input {
    background: #0f172a;
    color: #e2e8f0;
    border-color: #334155;
}

.dark .upgrade-form .form-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.dark .upgrade-form .form-input:hover {
    border-color: #475569;
}

.dark .upgrade-form .search-results {
    background: #1e293b;
    border-color: #334155;
}

.dark .upgrade-form .search-results .search-item {
    color: #e2e8f0;
    border-bottom-color: #334155;
}

.dark .upgrade-form .search-results .search-item:hover {
    background: #334155;
}

/* Generic search dropdown (also used by refund) */
.search-results .search-result-item { padding: 12px 14px; display: flex; gap: 10px; border-bottom: 1px solid #f3f4f6; }
.search-results .search-result-item:last-child { border-bottom: none; }
.search-results .result-info { display: flex; flex-direction: column; gap: 4px; }
.search-results .result-name { font-weight: 700; color: var(--text-on-light); }
.search-results .result-details { color: var(--text-muted-on-light); font-size: 12px; display: flex; gap: 10px; }
.search-results .result-price { font-weight: 700; color: #059669; }
.search-results .result-duration { color: #d97706; }
.search-results .result-category { background: #f3f4f6; color: #111827; border: 1px solid #d1d5db; padding: 3px 8px; border-radius: 6px; font-size: 11px; line-height: 1; font-weight: 600; }

.dark .search-results { background: #1e293b; border-color: #334155; }
.dark .search-results .search-result-item { border-bottom-color: #334155; }
.dark .search-results .search-result-item:hover { background-color: #334155; }
.dark .search-results .search-result-item.selected { background-color: #1e40af; border-left-color: #60a5fa; }
.dark .search-results .result-name { color: var(--text-on-dark); }
.dark .search-results .result-details { color: var(--text-muted-on-dark); }
.dark .search-results .result-price { color: #10b981; font-weight: 800; }
.dark .search-results .result-duration { color: #fbbf24; }
.dark .search-results .result-category { background: #111827; color: #f3f4f6; border-color: #475569; font-weight: 700; }

/* Date input group styling for upgrade form */
.upgrade-form .date-input-group {
    margin-top: 8px;
}

.upgrade-form .date-input-group .form-input {
    flex: 1;
}

.upgrade-form .date-input-group .btn-today {
    flex-shrink: 0;
    margin-left: 8px;
}

/* Responsive design */
@media (max-width: 768px) {
    .upgrade-form .form-row {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .upgrade-form {
        padding: 16px;
    }
    
    .upgrade-form .form-group {
        padding: 16px;
    }
}

/* Upgrade header button subtle style */
.upgrade-card .card-actions .btn {
    background: #fff;
    border-color: var(--border-primary);
}
.upgrade-card .card-actions .btn.btn-sm { min-height: 32px; padding: 6px 10px; }

/* Dark override for upgrade header button */
.dark .upgrade-card .card-actions .btn {
    background: #0f172a;
    color: var(--text-primary);
    border-color: var(--border-secondary);
}
.dark .upgrade-card .card-actions .btn:hover {
    background: #111827;
    border-color: var(--border-secondary);
}

/* Dark mode tweaks */
.dark .card { background: var(--bg-card); border-color: var(--border-primary); }
.dark .card-header { background: var(--bg-tertiary); }
.dark .form-input, .dark .form-select, .dark .form-textarea { background: #0b1220; color: var(--text-primary); border-color: var(--border-secondary); }
.dark .btn-outline { 
    color: var(--text-primary); 
    border-color: var(--border-secondary);
    background: transparent;
}

.dark .btn-outline:hover {
    background: var(--bg-tertiary);
    border-color: var(--border-primary);
    color: var(--text-primary);
}
.dark .dropdown-menu { background: var(--bg-card); border-color: var(--border-secondary); }
.dark .nav-item { color: var(--text-primary); }
.dark .nav-item .nav-label { color: var(--text-primary); }
.dark .nav-item .nav-icon { color: var(--text-secondary); }
.dark .nav-item:hover { background: #0b1220; border-color: #1f2937; }
.dark .nav-item.active { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: #fff; border-color: var(--primary); }
/* Dark override for search results (refund/upgrade/template) */
.dark .search-results { background: var(--bg-card); border-color: var(--border-secondary); }
.dark .search-item { color: var(--text-primary); }
.dark .search-item:hover { background: var(--bg-tertiary); }
.dark .search-hint { background: var(--bg-secondary); color: var(--text-secondary); }

/* Mobile sidebar toggle */
.mobile-menu-toggle {
    display: none;
    margin-right: 12px;
    border: 1px solid var(--border-primary);
    background: var(--bg-card);
    color: var(--text-primary);
    border-radius: 8px;
    padding: 6px 10px;
}

.mobile-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    z-index: 900;
}

/* ===== MICROSOFT 365 STYLES ===== */
.microsoft-auth-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
    padding: var(--space-6);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-primary);
}

.auth-status {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--bg-card);
    border-radius: var(--radius);
    border: 1px solid var(--border-primary);
}

.status-indicator {
    font-size: 1.2rem;
    transition: all 0.3s ease;
}

.status-indicator.connected {
    color: var(--success);
}

.status-indicator.connecting {
    color: var(--warning);
    animation: pulse 1.5s infinite;
}

.status-indicator.error {
    color: var(--error);
}

.auth-actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
}

.family-share-section {
    margin-top: var(--space-6);
    padding: var(--space-6);
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-primary);
}

.section-header {
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--border-primary);
}

.section-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-size: 1.25rem;
    font-weight: 600;
}

.share-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.info-item label {
    font-weight: 500;
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.link-container {
    display: flex;
    gap: var(--space-2);
    align-items: center;
}

.link-container .form-input {
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius);
    font-size: 0.75rem;
    font-weight: 500;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.status-badge.active {
    background: var(--success);
    color: var(--text-inverse);
}

.status-badge.inactive {
    background: var(--error);
    color: var(--text-inverse);
}

.members-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.member-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 1px solid var(--border-primary);
}

.member-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--primary);
    color: var(--text-inverse);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
}

.member-info {
    flex: 1;
}

.member-name {
    font-weight: 500;
    color: var(--text-primary);
    margin: 0;
}

.member-email {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin: 0;
}

.refresh-section {
    margin-top: var(--space-6);
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-primary);
    display: flex;
    justify-content: center;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* ===== FAMILY SHARE LINK CARD ===== */
.share-link-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    margin-bottom: var(--space-6);
    box-shadow: var(--shadow-md);
    transition: all 0.3s ease;
}

.share-link-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

.share-header {
    display: flex;
    align-items: flex-start;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
}

.share-icon {
    font-size: 2rem;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    flex-shrink: 0;
}

.share-title h3 {
    margin: 0 0 var(--space-2) 0;
    color: var(--text-primary);
    font-size: 1.5rem;
    font-weight: 700;
}

.share-title p {
    margin: 0;
    color: var(--text-secondary);
    font-size: 0.95rem;
    line-height: 1.5;
}

.share-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.link-container {
    margin-bottom: var(--space-4);
}

.link-input-wrapper {
    position: relative;
    display: flex;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border: 3px solid var(--primary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
}

.link-input-wrapper:focus-within {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2), 0 8px 20px rgba(37, 99, 235, 0.25);
    transform: translateY(-2px);
}

.link-input {
    flex: 1;
    padding: var(--space-5);
    border: none;
    background: transparent;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 1.3rem;
    color: var(--text-primary);
    outline: none;
    min-height: 56px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.link-actions {
    display: flex;
    background: var(--bg-tertiary);
    border-left: 1px solid var(--border-primary);
}

.copy-btn, .open-btn {
    padding: var(--space-3) var(--space-4);
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 48px;
}

.copy-btn:hover, .open-btn:hover {
    background: var(--primary);
    color: white;
    transform: scale(1.05);
}

.copy-icon, .open-icon {
    font-size: 1.1rem;
}

.share-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-3);
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-primary);
}

.status-info {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.status-dot.active {
    background: var(--success);
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
}

.status-dot.inactive {
    background: var(--error);
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
}

.status-text {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.update-info {
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* Members Section */
.members-section {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    box-shadow: var(--shadow-sm);
}

.members-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--border-primary);
}

.members-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-size: 1.2rem;
    font-weight: 600;
}

.member-count {
    background: var(--primary);
    color: white;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius);
    font-size: 0.8rem;
    font-weight: 600;
}

.members-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-4);
}

/* ===== LINK INPUT CARD ===== */
.link-input-card {
    background: var(--bg-card);
    border: 2px solid var(--primary);
    border-radius: var(--radius-lg);
    padding: var(--space-8);
    margin-bottom: var(--space-6);
    box-shadow: var(--shadow-lg);
    text-align: center;
}

.link-input-header h4 {
    margin: 0 0 var(--space-2) 0;
    color: var(--text-primary);
    font-size: 1.5rem;
    font-weight: 700;
}

.link-input-header p {
    margin: 0 0 var(--space-6) 0;
    color: var(--text-secondary);
    font-size: 1rem;
}

.link-input-container {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.large-link-input {
    flex: 1;
    padding: var(--space-5);
    border: 2px solid var(--border-primary);
    border-radius: var(--radius);
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 1.2rem;
    color: var(--text-primary);
    background: var(--bg-secondary);
    outline: none;
    transition: all 0.3s ease;
    font-weight: 500;
}

.large-link-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    background: white;
}

.large-link-input::placeholder {
    color: var(--text-muted);
    font-size: 1rem;
}

.link-hint {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--primary-light);
    border-radius: var(--radius);
    color: var(--primary-dark);
    font-size: 0.9rem;
    font-weight: 500;
}

.hint-icon {
    font-size: 1.1rem;
}

/* ===== CONFIRM LOGIN BUTTON ===== */
.btn-success {
    background: var(--success);
    border-color: var(--success);
    color: white;
}

.btn-success:hover {
    background: #059669;
    border-color: #059669;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

/* ===== MICROSOFT LOGIN FORM ===== */
.microsoft-auth-section .form-group {
    margin-bottom: var(--space-6);
}

.microsoft-auth-section .form-group:last-of-type {
    margin-bottom: var(--space-8);
}

.microsoft-auth-section .form-actions {
    margin-top: var(--space-6);
    text-align: center;
}

.microsoft-auth-section .btn-large {
    padding: var(--space-4) var(--space-8);
    font-size: 1.1rem;
    font-weight: 600;
    min-width: 200px;
}

/* Responsive */
@media (max-width: 768px) {
    .share-header {
        flex-direction: column;
        text-align: center;
    }
    
    .share-meta {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .link-actions {
        flex-direction: column;
    }
    
    .members-grid {
        grid-template-columns: 1fr;
    }
    
    .link-input-container {
        flex-direction: column;
    }
    
    .large-link-input {
        font-size: 1rem;
    }
}

@media (max-width: 1024px) {
    .mobile-menu-toggle { display: inline-flex; align-items: center; }
    .sidebar { transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); }
    .mobile-overlay.show { display: block; }
    .main-content { margin-left: 0; }
}

/* Logo image in header */
.logo-img {
    width: 28px;
    height: 28px;
    object-fit: contain;
    margin-right: 10px;
    display: inline-block;
}

/* Force show logo image inside sidebar header (override generic hide rules) */
#sidebar .logo-container .logo-img,
.sidebar-header .logo-container .logo-img,
.logo-container .logo-img {
    display: inline-block !important;
    opacity: 1 !important;
    visibility: visible !important;
    width: 28px !important;
    height: 28px !important;
}

/* Ensure logo and text align nicely */
.logo-container {
    display: flex;
    align-items: center;
}

/* ===== CALCULATION RESULT STYLES ===== */
/* Calc rows - clean & optimized */
.calc-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    border-bottom: 1px solid #f1f5f9;
    font-size: 13px;
}

.calc-row:last-child,
.calc-total {
    border-bottom: none;
    font-weight: 600;
    padding-top: 8px;
    border-top: 1px solid #e5e7eb;
    margin-top: 4px;
}

.calc-label {
    font-weight: 500;
    color: var(--text-secondary);
}

.calc-value {
    font-weight: 600;
    color: var(--text-primary);
    text-align: right;
}

.calc-value.text-success { color: #059669; font-weight: 600; }
.calc-value.text-danger { color: #dc2626; font-weight: 600; }
.calc-value { color: #374151; font-weight: 500; }

@media (prefers-color-scheme: dark) {
    .calc-row { border-bottom-color: #374151; }
}

/* Dark mode fixes for upgrade/refund result panels */
.dark .breakdown-section { background: var(--bg-secondary); border-bottom: 1px solid var(--border-primary); }
.dark .breakdown-section:nth-child(even) { background: var(--bg-tertiary); }
.dark .breakdown .calc-label, .dark .breakdown .calc-value { color: var(--text-primary) !important; }
.dark .result-section h5, .dark .result-section h6 { color: var(--text-primary); }
.dark .result-section { background: transparent; border-color: var(--border-primary); }

/* Breakdown container - removed old version */

/* Customer content textarea */
.refund-code, .upgrade-code {
    width: 100%;
    min-height: 200px;
    padding: 16px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.6;
    background: var(--card-bg);
    color: var(--text-primary);
    resize: vertical;
    white-space: pre-wrap;
}

/* ===== NOTES MODULE ===== */
.notes-card {
    margin-bottom: 0;
}

/* Mini sidebar layout inside Notes card */
.notes-mini-layout {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: var(--space-6);
}

@media (max-width: 900px) {
    .notes-mini-layout {
        grid-template-columns: 1fr;
    }
}

.notes-mini-sidebar {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    height: fit-content;
}

.notes-mini-sidebar .mini-sidebar-header {
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-3);
}

.mini-settings-btn {
    width: 100%;
    margin-top: var(--space-4);
}

.notes-category-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}
.notes-category-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 10px;
    border-radius: var(--radius);
    cursor: pointer;
    color: var(--text-primary);
}
.notes-category-item:hover {
    background: var(--bg-secondary);
}
.notes-category-item.active {
    background: var(--primary-weak, rgba(49,130,206,0.12));
    color: var(--primary);
    font-weight: 600;
}
.notes-category-item .count {
    font-size: 12px;
    color: var(--text-secondary);
}

/* Tag color variants */
.tag-chip { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:600; }
.tag-khachhang { background: #e6f6ff; color: #0b74c4; }
.tag-noibo { background: #f1f5ff; color: #3b5bdb; }
.tag-gap { background: #fff4e6; color: #d9480f; }
.tag-khac { background: #f8f9fa; color: #495057; }

/* Colorize category rows by tag class */
.notes-category-item.tag-khachhang { background:#f0f8ff; border:1px solid #cfe8ff; }
.notes-category-item.tag-noibo { background:#f3f6ff; border:1px solid #d6e0ff; }
.notes-category-item.tag-gap { background:#fff7ed; border:1px solid #ffe0c7; }
.notes-category-item.tag-khac { background:#fafbfc; border:1px solid #e9ecef; }

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
}

@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.animate-fade-in {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
}

.pulse-on-hover:hover {
    animation: pulse 0.6s ease-in-out;
}

.shake-on-hover:hover {
    animation: shake 0.5s ease-in-out;
}

@keyframes bounce {
    0%, 100% { transform: scale(1) translateY(0); }
    25% { transform: scale(1.1) translateY(-3px); }
    50% { transform: scale(1.05) translateY(-1px); }
    75% { transform: scale(1.08) translateY(-2px); }
}

.bounce-on-hover:hover {
    animation: bounce 0.6s ease-in-out;
}

.search-container { position: relative; overflow: visible; z-index: 2; }
.search-container.search-focused { transform: scale(1.02); transition: transform 0.2s ease; }
.search-container.search-focused .form-input { border-color: #3182ce; box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1); }
.search-container.success-feedback .form-input {}
.search-container.success-feedback::after { content: ""; }
.dark .search-container.success-feedback .form-input {}

.search-results { position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #e2e8f0; border-radius: 8px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2); max-height: 320px; overflow-y: auto; z-index: 5000; opacity: 0; transform: translateY(-10px); transition: all 0.2s ease; }
.search-results.show { opacity: 1; transform: translateY(0); }
.search-result-item { padding: 12px; cursor: pointer; border-bottom: 1px solid #f7fafc; transition: all 0.2s ease; }
.search-result-item:hover { background-color: #f7fafc; transform: translateX(4px); }
.search-result-item.selected { background-color: #e6f3ff; border-left: 3px solid #3182ce; transform: translateX(4px); }
.search-result-item:last-child { border-bottom: none; }
.result-info { display: flex; flex-direction: column; gap: 4px; }
.result-name { font-weight: 600; color: #2d3748; font-size: 14px; }
.result-details { display: flex; gap: 12px; font-size: 12px; color: #718096; }
.result-price { color: var(--success); font-weight: 700; }
.result-duration { color: #3182ce; }
.result-category { background: #edf2f7; padding: 2px 6px; border-radius: 4px; font-size: 10px; text-transform: uppercase; }
.no-results { padding: 20px; text-align: center; color: #a0aec0; font-style: italic; }

.date-input-group { 
    position: relative; 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    width: 100%;
}
.date-input-group .form-input { flex: 1; }
.dark .date-input-group .form-input { background: #0b1220; color: var(--text-primary); border-color: #334155; }
.dark .date-input-group .form-input:focus { background: #0b1220; border-color: #60a5fa; box-shadow: 0 0 0 3px rgba(96,165,250,0.15); }
.dark .date-input-group .form-input:hover { border-color: #475569; }
.dark .date-input-group .form-input::-webkit-calendar-picker-indicator { filter: invert(1); opacity: 0.8; }
.dark .date-input-group .form-input::-webkit-calendar-picker-indicator:hover { opacity: 1; }
.date-input-group.has-error .form-input { border-color: #e53e3e; background-color: #fed7d7; }
.date-error { position: absolute; top: 100%; left: 0; font-size: 12px; color: #e53e3e; margin-top: 4px; animation: slideDown 0.2s ease; }
@keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
.btn-today { 
    padding: 8px 12px; 
    background: #edf2f7; 
    border: 1px solid #e2e8f0; 
    border-radius: 6px; 
    cursor: pointer; 
    transition: all 0.2s ease; 
    font-size: 14px; 
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    height: 40px;
}
.btn-today:hover { 
    background: #e2e8f0; 
    transform: scale(1.05); 
    border-color: #cbd5e0;
}
.dark .btn-today { 
    background: #1f2937; 
    border-color: #334155; 
    color: #e5e7eb; 
}
.dark .btn-today:hover { 
    background: #273449; 
    border-color: #475569;
}

.products-comparison { 
    display: grid; 
    grid-template-columns: 1fr auto 1fr; 
    gap: 24px; 
    align-items: center; 
    margin: 24px 0; 
    padding: 24px; 
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); 
    border-radius: 12px; 
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}
.product-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; position: relative; overflow: hidden; }
.product-card::before { content: ""; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: #e2e8f0; transition: background 0.3s ease; }
.product-card.cheaper::before { background: linear-gradient(90deg, #48bb78, #68d391); }
.product-card.more-expensive::before { background: linear-gradient(90deg, #e53e3e, #fc8181); }
.product-card.same-price::before { background: linear-gradient(90deg, #3182ce, #63b3ed); }
.product-card:hover { transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15); }
.product-card-header { text-align: center; margin-bottom: 16px; }
.product-card-header h4 { color: #2d3748; font-size: 16px; font-weight: 600; margin: 0; }
.upgrade-arrow { font-size: 24px; color: #3182ce; font-weight: bold; animation: pulse 2s infinite; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
.detail-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #f7fafc; }
.detail-item:last-child { border-bottom: none; }
.detail-label { font-size: 13px; color: #718096; font-weight: 500; }
.detail-value { font-size: 14px; color: #2d3748; font-weight: 600; }

.calculation-loading { display: flex; flex-direction: column; align-items: center; padding: 40px 20px; text-align: center; }
.loading-spinner { width: 40px; height: 40px; border: 4px solid #e2e8f0; border-top: 4px solid #3182ce; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.loading-text { font-size: 18px; font-weight: 600; color: #2d3748; margin-bottom: 20px; }
.loading-steps { display: flex; flex-direction: column; gap: 8px; }
.loading-step { padding: 8px 16px; background: #f7fafc; border-radius: 6px; color: #a0aec0; font-size: 14px; transition: all 0.3s ease; position: relative; overflow: hidden; }
.loading-step.active { background: #e6fffa; color: #2d3748; transform: scale(1.02); }
.loading-step.active::before { content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: #38b2ac; animation: slideIn 0.3s ease; }
@keyframes slideIn { from { transform: scaleY(0); } to { transform: scaleY(1); } }

.enhanced-breakdown { 
    background: white; 
    border-radius: 8px; 
    padding: 0; 
    overflow: hidden; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); 
    border: 1px solid #e5e7eb;
}
.breakdown-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
    gap: 0; 
}
.breakdown-section { 
    padding: 12px 16px; 
    border-bottom: 1px solid #f1f5f9; 
    position: relative; 
}
.breakdown-section:nth-child(even) { 
    background: #fafbfc; 
}
.breakdown-section h6 { 
    font-size: 13px; 
    font-weight: 600; 
    color: #374151; 
    margin-bottom: 8px; 
    display: flex; 
    align-items: center; 
    gap: 6px; 
    padding-bottom: 4px;
    border-bottom: 1px solid #e5e7eb;
}
.breakdown-section.current-package { 
    border-left: 3px solid #6b7280; 
    background: #f9fafb;
}
.breakdown-section.new-package { 
    border-left: 3px solid #6b7280; 
    background: #f9fafb;
}
.breakdown-section.calculation-formula { 
    border-left: 3px solid #374151; 
    background: #f3f4f6;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
}
.breakdown-section.scenarios-summary { 
    border-left: 3px solid #6b7280; 
    background: #f9fafb;
}
.calc-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; font-size: 13px; }
.calc-row.special { background: #e6fffa; padding: 8px 12px; border-radius: 6px; margin: 8px 0; }
.calc-row.calc-total { font-size: 15px; font-weight: 700; padding: 12px; margin: 16px -20px -20px -20px; border-radius: 0; }
.calc-row.payment-required { background: linear-gradient(135deg, #fed7d7, #feb2b2); color: #742a2a; }
.calc-row.payment-surplus { background: linear-gradient(135deg, #c6f6d5, #9ae6b4); color: #276749; }
.calc-row.payment-equal { background: linear-gradient(135deg, #bee3f8, #90cdf4); color: #2c5282; }
.calc-label { color: #718096; font-weight: 500; }
.calc-value { color: #2d3748; font-weight: 600; }
.text-success { color: #48bb78 !important; }
.text-danger { color: #e53e3e !important; }

.usage-progress { margin-top: 16px; padding: 16px; background: white; border-radius: 8px; border: 1px solid #e2e8f0; }
.progress-bar { height: 12px; background: #f7fafc; border-radius: 6px; overflow: hidden; display: flex; margin-bottom: 8px; }
.progress-used { background: linear-gradient(90deg, #fc8181, #e53e3e); transition: width 0.8s ease; }
.progress-remaining { background: linear-gradient(90deg, #68d391, #48bb78); transition: width 0.8s ease; }
.progress-labels { display: flex; justify-content: space-between; font-size: 11px; color: #718096; }
.progress-used { color: #e53e3e; }
.progress-remaining { color: #48bb78; }

.scenario-option { 
    background: white; 
    border: 1px solid #d1d5db; 
    border-radius: 6px; 
    padding: 12px; 
    margin-bottom: 12px; 
    transition: all 0.2s ease; 
    position: relative; 
}
.scenario-option:last-child { margin-bottom: 0; }
.scenario-option:hover { 
    border-color: #6b7280; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
}
.scenario-option.single-option { 
    border-color: #6b7280; 
    background: #f9fafb; 
}
.scenario-header { 
    display: flex; 
    align-items: center; 
    margin-bottom: 12px; 
    padding-bottom: 8px; 
    border-bottom: 1px solid #f1f5f9; 
    justify-content: center;
}
.scenario-header strong { 
    color: #2d3748; 
    font-size: 14px; 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    font-weight: 700;
}
.scenario-option[data-type="no_topup"] { border-color: #6b7280; background: #f9fafb; }
.scenario-option[data-type="full_topup"] { border-color: #6b7280; background: #f9fafb; }
.scenario-option[data-type="no_topup"] .scenario-header strong { color: #374151; }
.scenario-option[data-type="full_topup"] .scenario-header strong { color: #374151; }

/* Calculation preview styles */
.calculation-preview {
    margin-top: 16px;
    padding: 16px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
}

.preview-header h5 {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: #374151;
}

.preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
}

.preview-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 13px;
}

.preview-label {
    font-weight: 500;
    color: #6b7280;
}

.preview-value {
    font-weight: 600;
    color: #374151;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
}

.preview-value.text-success { color: #059669; }
.preview-value.text-danger { color: #dc2626; }

/* Dark mode for preview */
.dark .calculation-preview {
    background: #1f2937;
    border-color: #374151;
}

.dark .preview-header h5 {
    color: #e5e7eb;
}

.dark .preview-item {
    background: #111827;
    border-color: #374151;
}

.dark .preview-label {
    color: #9ca3af;
}

.dark .preview-value {
    color: #e5e7eb;
}

.dark .preview-value.text-success { color: #10b981; }
.dark .preview-value.text-danger { color: #ef4444; }

/* Compact info grid layout */
.compact-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 8px;
    margin-top: 8px;
}

.info-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 8px 10px;
    text-align: center;
    transition: all 0.2s ease;
}

.info-card:hover {
    border-color: #d1d5db;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.info-card.highlight {
    background: #f0f9ff;
    border-color: #3b82f6;
    font-weight: 600;
}

.info-card-header {
    font-size: 11px;
    font-weight: 500;
    color: #6b7280;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.info-card-value {
    font-size: 13px;
    font-weight: 600;
    color: #374151;
    word-break: break-word;
}

.info-card.highlight .info-card-value {
    color: #1d4ed8;
}

/* Dark mode for compact info */
.dark .info-card {
    background: #1f2937;
    border-color: #374151;
}

.dark .info-card:hover {
    border-color: #4b5563;
}

.dark .info-card.highlight {
    background: #1e3a8a;
    border-color: #60a5fa;
}

.dark .info-card-header {
    color: #9ca3af;
}

.dark .info-card-value {
    color: #e5e7eb;
}

.dark .info-card.highlight .info-card-value {
    color: #93c5fd;
}

/* Special card styles */
.progress-card .info-card-value {
    text-align: left;
    padding: 4px 0;
}

.progress-info {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 6px;
    font-size: 12px;
}

.progress-info .used {
    color: #059669;
    font-weight: 600;
}

.progress-info .separator {
    margin: 0 4px;
    color: #6b7280;
}

.progress-info .remaining {
    color: #dc2626;
    font-weight: 500;
}

.progress-bar-mini {
    width: 100%;
    height: 6px;
    background: #e5e7eb;
    border-radius: 3px;
    overflow: hidden;
    display: flex;
}

.progress-used {
    height: 100%;
    background: #059669;
    transition: width 0.3s ease;
}

.progress-remaining {
    height: 100%;
    background: #dc2626;
    transition: width 0.3s ease;
}

.calculation-card {
    padding: 12px 14px;
}

.calculation-card .info-card-value {
    text-align: left;
    padding: 0;
    margin: 0;
}

.calc-formula {
    font-size: 14px;
    color: #6b7280;
    margin-bottom: 4px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-weight: 500;
}

.calc-result {
    font-size: 16px;
    color: #059669;
    font-weight: 700;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
}

/* Dark mode for special cards */
.dark .progress-info .used {
    color: #10b981;
}

.dark .progress-info .remaining {
    color: #ef4444;
}

.dark .progress-bar-mini {
    background: #374151;
}

.dark .progress-used {
    background: #10b981;
}

.dark .progress-remaining {
    background: #ef4444;
}

.dark .calc-formula {
    color: #9ca3af;
}

.dark .calc-result {
    color: #10b981;
}

.multiple-options-content { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }
.multiple-options-content h6 { padding: 16px 20px; margin: 0; background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); border-bottom: 1px solid #e2e8f0; font-size: 16px; font-weight: 600; color: #2d3748; }
.options-tabs { display: flex; background: #f7fafc; border-bottom: 1px solid #e2e8f0; }
.option-tab { flex: 1; padding: 12px 16px; background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: #718096; transition: all 0.2s ease; position: relative; }
.option-tab:hover { background: #edf2f7; color: #2d3748; }
.option-tab.active { background: white; color: #3182ce; border-bottom-color: #3182ce; font-weight: 600; }
.option-tab.active::before { content: ""; position: absolute; top: 8px; left: 8px; right: 8px; height: 2px; background: #3182ce; border-radius: 1px; }
.option-content { display: none; padding: 20px; }
.option-content.active { display: block; animation: fadeIn 0.3s ease; }
.single-option-content { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }
.single-option-content h6 { padding: 16px 20px; margin: 0; background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); border-bottom: 1px solid #e2e8f0; font-size: 16px; font-weight: 600; color: #2d3748; }
.single-option-content .upgrade-code { margin: 20px; margin-bottom: 16px; }
.single-option-content .btn { margin: 0 20px 20px 20px; }

.btn { transition: all 0.2s ease; position: relative; overflow: hidden; }
.btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none !important; }
.btn:not(:disabled):hover { transform: translateY(-1px); }
.btn:not(:disabled):active { transform: translateY(1px); }
.btn-success { background: linear-gradient(135deg, #48bb78, #68d391) !important; border-color: #48bb78 !important; color: white !important; }
.btn-success:hover { background: linear-gradient(135deg, #38a169, #48bb78) !important; }

.result-actions { display: flex; gap: 8px; align-items: center; }
.result-actions .btn-sm { padding: 6px 12px; font-size: 12px; }
.share-block { display: flex; gap: 12px; margin-top: 16px; }

@media (max-width: 768px) { .products-comparison { grid-template-columns: 1fr; gap: 16px; text-align: center; } .upgrade-arrow { transform: rotate(90deg); font-size: 20px; } .breakdown-grid { grid-template-columns: 1fr; } .result-sections { flex-direction: column; } .share-block { flex-direction: column; gap: 8px; } .result-actions { flex-wrap: wrap; justify-content: center; } .options-tabs { flex-direction: column; } .option-tab { border-bottom: 1px solid #e2e8f0; border-right: none; } .option-tab.active { border-bottom-color: #e2e8f0; border-left: 4px solid #3182ce; } }
@media (max-width: 480px) { .product-card { padding: 16px; } .breakdown-section { padding: 16px; } .calc-row { flex-direction: column; align-items: flex-start; gap: 4px; } .calc-row.calc-total { flex-direction: row; align-items: center; } .loading-steps { align-items: stretch; } .scenario-option { padding: 12px; } .multiple-options-content h6 { padding: 12px 16px; font-size: 14px; } .option-content { padding: 16px; } }

.dark .search-results { background: #1f2937; border-color: #334155; box-shadow: 0 10px 28px rgba(0,0,0,0.5); z-index: 5000; }

.dark .products-comparison {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    border-color: #334155;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.dark .product-card {
    background: #1e293b;
    border: 1px solid #334155;
}

/* Dark mode for compact breakdown */
.dark .enhanced-breakdown {
    background: #1e293b;
    border-color: #334155;
}

.dark .breakdown-section {
    border-bottom-color: #334155;
}

.dark .breakdown-section:nth-child(even) {
    background: #0f172a;
}

.dark .breakdown-section h6 {
    color: #e2e8f0;
    border-bottom-color: #334155;
}

.dark .calc-row {
    border-bottom-color: #334155;
}

.dark .calc-total {
    border-top-color: #334155;
}

/* Dark mode for new breakdown sections */
.dark .breakdown-section.current-package {
    background: #1f2937;
    border-left-color: #9ca3af;
}

.dark .breakdown-section.new-package {
    background: #1f2937;
    border-left-color: #9ca3af;
}

.dark .breakdown-section.calculation-formula {
    background: #111827;
    border-left-color: #6b7280;
}

.dark .breakdown-section.scenarios-summary {
    background: #1f2937;
    border-left-color: #9ca3af;
}

.dark .calc-value.text-success { color: #10b981; }
.dark .calc-value.text-danger { color: #ef4444; }
.dark .calc-value { color: #e5e7eb; }
.dark .search-result-item { border-color: #4a5568; color: #e2e8f0; }
.dark .search-result-item:hover { background: #4a5568; }
.dark .result-name { color: #e2e8f0; }
.dark .result-details { color: #a0aec0; }
.dark .product-card { background: #2d3748; color: #e2e8f0; }
.dark .enhanced-breakdown { background: #2d3748; }
.dark .breakdown-section:nth-child(even) { background: #374151; }
.dark .breakdown-section.payment-summary { background: linear-gradient(135deg, #374151 0%, #4a5568 100%); }
.dark .calc-label { color: #a0aec0; }
.dark .calc-value { color: #e2e8f0; }
.dark .usage-progress { background: #374151; border-color: #4a5568; }
.dark .progress-bar { background: #4a5568; }
.dark .loading-step { background: #374151; color: #a0aec0; }
.dark .loading-step.active { background: #2d3748; color: #e2e8f0; }
.dark .scenario-option { background: #1f2937; border-color: #4a5568; }
.dark .scenario-option[data-type="no_topup"] { background: #1f2937; border-color: #4a5568; }
.dark .scenario-option[data-type="full_topup"] { background: #1f2937; border-color: #4a5568; }
.dark .multiple-options-content { background: #2d3748; }
.dark .multiple-options-content h6 { background: linear-gradient(135deg, #374151 0%, #4a5568 100%); color: #e2e8f0; }
.dark .options-tabs { background: #374151; }
.dark .option-tab { color: #a0aec0; }
.dark .option-tab:hover { background: #4a5568; color: #e2e8f0; }
.dark .option-tab.active { background: #2d3748; color: #60a5fa; border-bottom-color: #60a5fa; }
.dark .single-option-content { background: #2d3748; }
.dark .single-option-content h6 { background: linear-gradient(135deg, #374151 0%, #4a5568 100%); color: #e2e8f0; }
/* People management dark mode fixes */
.people-management .person-edit-item { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
.people-management .person-color-picker { width: 28px; height: 20px; padding: 0; border: 1px solid #d1d5db; background: transparent; }
.people-management .person-name-input { flex: 1; height: 30px; border-radius: 6px; border: 1px solid #d1d5db; padding: 6px 10px; background: #ffffff; color: #111827; }
.dark .people-management .person-name-input { background: #111827; color: #e5e7eb; border-color: #4b5563; }
.dark .people-management .person-color-picker { border-color: #4b5563; background: #111827; }
.note-form {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
}

.link-input-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.link-input-group .form-input {
    flex: 1;
}

.btn-copy-link {
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 44px;
    height: 44px;
}

.btn-copy-link:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-textarea {
    width: 100%;
    min-height: 100px;
    padding: 12px 16px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    line-height: 1.5;
    resize: vertical;
    transition: all 0.2s ease;
    background: var(--input-bg, white);
}

.form-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--primary-color-alpha);
}

.notes-list {
    margin-top: 32px;
}

.notes-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--border-color);
}

.notes-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 18px;
}

.notes-stats {
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
}

.notes-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 8px 0;
}

.note-item {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    padding: 20px;
    transition: all 0.2s ease;
    position: relative;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-bottom: 12px;
}

/* Dark theme */
@media (prefers-color-scheme: dark) {
    .note-item {
        background: #1f2937;
        border: 1px solid #374151;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
}

/* Removed separator for cleaner look */

.note-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #4A90E2 0%, #7B68EE 100%);
    opacity: 0.8;
}

.note-item:hover {
    transform: translateY(-2px);
    border-color: #3b82f6;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
}

/* Dark theme hover */
@media (prefers-color-scheme: dark) {
    .note-item:hover {
        border-color: #60a5fa;
        box-shadow: 0 4px 12px rgba(96, 165, 250, 0.2);
    }
}

.note-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.note-info {
    flex: 1;
}

.note-order-code {
    font-weight: 700;
    background: linear-gradient(135deg, #4A90E2 0%, #7B68EE 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 18px;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
}

.note-status-badge {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    color: #ffffff;
    font-size: 11px;
    font-weight: 800;
    padding: 4px 10px;
    border-radius: 14px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    box-shadow: 0 3px 6px rgba(16, 185, 129, 0.4);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.note-time {
    background: rgba(74, 144, 226, 0.1);
    color: var(--primary-color);
    font-size: 11px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 12px;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.note-actions {
    display: flex;
    gap: 8px;
}

.btn-icon-small {
    background: rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(74, 144, 226, 0.2);
    border-radius: 10px;
    padding: 8px 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 36px;
    height: 36px;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.btn-icon-small:hover {
    background: linear-gradient(135deg, #4A90E2 0%, #7B68EE 100%);
    color: white;
    border-color: transparent;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
}

.btn-icon-small.btn-danger:hover {
    background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%);
    border-color: transparent;
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
}

.btn-icon-small.btn-success:hover {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    border-color: transparent;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    color: white;
}

.note-content {
    margin-bottom: 16px;
}

/* CSS cũ cho note-text đã xóa */

.note-footer {
    background: #f8fafc;
    border-top: 1px solid #e5e7eb;
    padding: 12px;
    margin: 12px -20px -20px -20px;
    border-radius: 0 0 16px 16px;
}

/* Dark theme footer */
@media (prefers-color-scheme: dark) {
    .note-footer {
        background: #111827;
        border-top: 1px solid #374151;
    }
}

.note-chat-link {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    background: var(--card-bg);
    padding: 12px 16px;
    border-radius: 10px;
    border: 2px solid var(--border-color);
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.note-chat-link:hover {
    border-color: var(--primary-color);
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
    transform: translateY(-1px);
}

.link-label {
    color: var(--text-primary);
    font-weight: 700;
    flex-shrink: 0;
    font-size: 13px;
    background: var(--bg-secondary, rgba(248, 250, 252, 0.8));
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.chat-link {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
    word-break: break-all;
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 12px;
    background: var(--bg-secondary, rgba(248, 250, 252, 0.8));
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.chat-link:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    transform: translateX(2px);
}

/* Responsive */
@media (max-width: 768px) {
    .note-form {
        padding: 20px;
    }
    
    .link-input-group {
        flex-direction: column;
        align-items: stretch;
    }
    
    .btn-copy-link {
        width: 100%;
        justify-content: center;
    }
    
    .note-header {
        flex-direction: column;
        gap: 12px;
    }
    
    .note-actions {
        align-self: flex-end;
    }
    
    .note-chat-link {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
}

/* ===== QUOTE SECTION ===== */
.quote-card {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: visible; /* allow dropdowns to escape card bounds */
}

.quote-form {
    padding: var(--space-6);
    display: none;
}

/* Ensure quote search dropdown overlays content without clipping */
.quote-form .search-container { position: relative; overflow: visible; z-index: 100; }
.quote-form #quoteSearchResults.search-results {
    position: absolute;
    top: 100%;
    left: 0; right: 0;
    max-height: 280px;
    overflow-y: auto;
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    z-index: 2000; /* higher than sidebar and other layers */
}

.quote-result {
    margin-top: var(--space-6);
    padding: var(--space-6);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-primary);
}

.quote-code {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius);
    padding: var(--space-4);
    font-family: 'Courier New', monospace;
    font-size: 13px;
    line-height: 1.6;
    white-space: pre-wrap;
    word-wrap: break-word;
    margin: 0;
    color: var(--text-primary);
}

/* ===== REFUND BREAKDOWN STYLES ===== */
.refund-result .breakdown {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: 1.25rem;
    background: linear-gradient(135deg, #ffffff, #f6f9fc);
    border-radius: 0.75rem;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    overflow: hidden;
}

/* Dark mode refinement for refund panels */
.dark .refund-result .breakdown {
    background: linear-gradient(135deg, #0b1220, #0f172a);
    border-color: #1f2937;
}

.dark .refund-result .breakdown .calc-row {
    border-bottom: 1px solid #1f2937;
}

.dark .refund-result .breakdown .calc-section {
    background: linear-gradient(135deg, #0b1220, #0f172a);
    border: 1px solid #1f2937;
}

.dark .refund-result .breakdown .calc-label {
    color: #cbd5e1 !important;
}

.dark .refund-result .breakdown .calc-value {
    color: #f1f5f9 !important;
}

.dark .refund-result .breakdown .calc-value.text-success {
    color: #10b981 !important;
}

.dark .refund-result .breakdown .calc-value.text-danger {
    color: #f87171 !important;
}

/* QUOTE BREAKDOWN - Different from refund */
.quote-result .breakdown,
#quoteBreakdown {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: var(--space-3) !important;
    padding: var(--space-4);
    background: var(--bg-primary);
    border-radius: var(--radius);
    border: 1px solid var(--border-primary);
}

.breakdown-item,
#quoteBreakdown .breakdown-item,
.quote-result .breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
}

.breakdown-item:last-child {
    border-bottom: none;
}

.breakdown-item.total-before-vat,
#quoteBreakdown .breakdown-item.total-before-vat,
.quote-result .breakdown-item.total-before-vat {
    grid-column: 1 / -1 !important;
    border: 2px solid var(--border-secondary);
    font-weight: 600;
    background: var(--bg-tertiary);
    color: var(--primary);
}

.breakdown-item.total,
#quoteBreakdown .breakdown-item.total,
.quote-result .breakdown-item.total {
    grid-column: 1 / -1 !important;
    background: var(--primary-light);
    padding: var(--space-4);
    border-radius: var(--radius);
    font-weight: 700;
    font-size: 1.1em;
    color: var(--primary);
    border: 2px solid var(--primary);
}

.breakdown-label {
    font-weight: 500;
    color: var(--text-primary);
}

.breakdown-value {
    font-weight: 600;
    color: var(--text-primary);
    font-family: 'Courier New', monospace;
}

.breakdown-item.total .breakdown-label,
.breakdown-item.total .breakdown-value {
    color: var(--primary);
}

/* Quote responsive */
@media (max-width: 768px) {
    .quote-form {
        padding: var(--space-4);
    }
    
    .quote-result {
        padding: var(--space-4);
    }
    
    .breakdown {
        grid-template-columns: 1fr;
        padding: var(--space-3);
    }
    
    .breakdown-item.total {
        padding: var(--space-3);
    }
    
    .quote-code {
        font-size: 12px;
        padding: var(--space-3);
    }
}

/* ===== INVOICE TABLE STYLES ===== */
.invoice-table-container {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--space-6);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-sm);
    margin: var(--space-4) 0;
}

.invoice-table {
    width: 100%;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 14px;
    line-height: 1.4;
}

.invoice-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-card);
}

.invoice-table th,
.invoice-table td {
    border: 1px solid var(--border-secondary);
    padding: 8px 12px;
    text-align: left;
    vertical-align: middle;
}

.invoice-table th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-primary);
    text-align: center;
}

.invoice-table td {
    color: var(--text-primary);
}

/* Căn giữa các cột số */
.invoice-table .text-center {
    text-align: center;
}

.invoice-table .text-right {
    text-align: right;
}

/* Styling cho các hàng tổng kết */
.invoice-table .subtotal-row {
    background: var(--bg-secondary);
    font-weight: 500;
}

.invoice-table .vat-row {
    background: var(--bg-secondary);
    font-weight: 500;
}

.invoice-table .total-row {
    background: var(--primary-light);
    font-weight: 700;
    color: var(--text-primary);
}

.dark .invoice-table .total-row {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.invoice-table .note-row {
    background: var(--bg-card) !important;
}

.invoice-table .note-row td {
    font-style: italic;
    color: var(--text-primary) !important;
    font-size: 12px;
    padding: var(--space-3);
    border: 1px solid var(--border-secondary) !important;
    text-align: left;
    vertical-align: top;
    background: var(--bg-card) !important;
}

/* Styling cho note cũ - xóa bỏ */

/* Responsive table */
@media (max-width: 768px) {
    .invoice-table-container {
        padding: var(--space-4);
        overflow-x: auto;
    }
    
    .invoice-table {
        min-width: 600px;
    }
    
    .invoice-table th,
    .invoice-table td {
        padding: 6px 8px;
        font-size: 13px;
    }
}

/* Quote view toggle */
.result-actions {
    display: flex;
    gap: var(--space-2);
}

.result-sections {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-4);
    margin-top: var(--space-4);
}

.result-section {
    display: block;
}

.result-section.active {
    display: block;
}

/* Responsive - stack on mobile */
@media (max-width: 768px) {
    .result-sections {
        grid-template-columns: 1fr;
    }
}

/* ===== MULTI PRODUCT QUOTE STYLES ===== */
.quote-product-list {
    margin: var(--space-4) 0;
    padding: var(--space-4);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-primary);
}

.selected-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.selected-header h4 {
    margin: 0;
    color: var(--text-primary);
}

.selected-products-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.selected-product-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3);
    background: var(--bg-card);
    border-radius: var(--radius);
    border: 1px solid var(--border-primary);
}

.selected-product-info {
    flex: 1;
}

.selected-product-name {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-1);
}

.selected-product-details {
    display: flex;
    gap: var(--space-4);
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.selected-product-actions {
    display: flex;
    gap: var(--space-2);
}

.btn-sm {
    padding: var(--space-1) var(--space-2);
    font-size: 0.875rem;
}

/* Responsive */
@media (max-width: 768px) {
    .selected-product-item {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
    }
    
    .selected-product-actions {
        align-self: flex-end;
    }
    
    .selected-product-details {
        flex-wrap: wrap;
        gap: var(--space-2);
    }
}

/* ===== FINAL FIX FOR QUICK BUTTONS ===== */
/* This must be at the end to override everything */
.quick-btn.active,
.quick-btn.active:hover,
.quick-btn.active:focus,
.quick-btn.active:active,
.quick-btn.active:visited {
    background-color: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.dark .quick-btn.active,
.dark .quick-btn.active:hover,
.dark .quick-btn.active:focus,
.dark .quick-btn.active:active,
.dark .quick-btn.active:visited {
    background-color: #3182ce !important;
    border-color: #3182ce !important;
    color: white !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
}

.dark .info-card.highlight {
    background: #0b1733; /* darker to improve contrast */
    border-color: #3b82f6;
    box-shadow: inset 0 0 0 1px rgba(59,130,246,0.35);
}

.dark .info-card-header {
    color: #9ca3af;
}

.dark .info-card-value {
    color: #e5e7eb;
}

.dark .info-card.highlight .info-card-value {
    color: #cfe1ff; /* lighter text on dark blue */
}

.dark .upgrade-form .form-group {
    background: #142034;
    border-color: #3b4658;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03);
}

.dark .upgrade-form .btn-calculate {
    background: linear-gradient(135deg, #2b6cb0 0%, #1e3a8a 100%);
    border: 1px solid rgba(59,130,246,0.35);
}

.dark .upgrade-form .btn-calculate:hover {
    background: linear-gradient(135deg, #225fa0 0%, #1c357c 100%);
    box-shadow: 0 8px 25px rgba(37, 99, 235, 0.25);
}

/* Improve placeholder contrast */
.upgrade-form .form-input::placeholder { color: #9ca3af; opacity: 1; }
.dark .upgrade-form .form-input::placeholder { color: #94a3b8; opacity: 1; }

/* Ensure generic text inside dark cards is readable */
.dark .upgrade-form .form-group,
.dark .upgrade-form .form-group p,
.dark .upgrade-form .form-group span,
.dark .upgrade-form .form-group label {
    color: #e5e7eb;
}

/* Button label legibility */
.upgrade-form .btn-calculate { letter-spacing: 0.2px; }
.dark .upgrade-form .btn-calculate { color: #f8fafc; font-weight: 700; }

.dark .upgrade-form {
    background: #0f172a;
    border-color: #334155;
}

.dark .upgrade-form .form-group {
    background: #1e293b;
    border-color: #334155;
    color: #e5e7eb; /* ensure default text color is light */
}

/* Readable text for common elements inside the cards (exclude inputs) */
.dark .upgrade-form .form-group h4,
.dark .upgrade-form .form-group h5,
.dark .upgrade-form .form-group h6,
.dark .upgrade-form .form-group label,
.dark .upgrade-form .form-group span,
.dark .upgrade-form .form-group p,
.dark .upgrade-form .form-group small,
.dark .upgrade-form .form-group .static-text {
    color: #e5e7eb;
}

/* Upgrade search results */
.upgrade-form .search-results .product-name { font-weight: 700; color: var(--text-on-light); }
.upgrade-form .search-results .product-details { color: var(--text-muted-on-light); }

.dark .upgrade-form .search-results .product-name { color: var(--text-on-dark); }
.dark .upgrade-form .search-results .product-details { color: var(--text-muted-on-dark); }

/* Ensure any badges/pills in results remain readable */
.upgrade-form .search-results .badge, .upgrade-form .search-results .pill { background: #eef2ff; color: #1e3a8a; }
.dark .upgrade-form .search-results .badge, .dark .upgrade-form .search-results .pill { background: #1e293b; color: #e5e7eb; border: 1px solid #334155; }


/* =============================
   Layout chuẩn cho Refund Result
   (thêm bởi ChatGPT - TODO 5)
============================== */

.refund-grid-equal {
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 30px !important;
  width: 100% !important;
  max-width: 100% !important;
}

.refund-grid-equal .refund-left-column,
.refund-grid-equal .refund-right-column {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
  min-width: 0 !important;
  max-width: 100% !important;
  overflow: hidden !important;
}

/* Edit Note Modal Styles */
.edit-note-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.edit-note-modal .modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.edit-note-modal .modal-content {
  position: relative;
  background: white;
  border-radius: 12px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  max-width: 600px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 10001;
}

.dark .edit-note-modal .modal-content {
  background: #1f2937;
  color: #f9fafb;
}

.edit-note-modal .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px 0 24px;
  border-bottom: 1px solid #e5e7eb;
}

.dark .edit-note-modal .modal-header {
  border-bottom-color: #374151;
}

.edit-note-modal .modal-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #111827;
}

.dark .edit-note-modal .modal-header h3 {
  color: #f9fafb;
}

.edit-note-modal .modal-close {
  background: none;
  border: none;
  font-size: 24px;
  color: #6b7280;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.2s;
}

.edit-note-modal .modal-close:hover {
  background: #f3f4f6;
  color: #374151;
}

.dark .edit-note-modal .modal-close:hover {
  background: #374151;
  color: #f9fafb;
}

.edit-note-modal .modal-body {
  padding: 24px;
}

.edit-note-modal .form-group {
  margin-bottom: 16px;
}

.edit-note-modal .form-label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  color: #374151;
  font-size: 14px;
}

.dark .edit-note-modal .form-label {
  color: #d1d5db;
}

.edit-note-modal .form-input,
.edit-note-modal .form-textarea {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  transition: border-color 0.2s;
}

.edit-note-modal .form-input:focus,
.edit-note-modal .form-textarea:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.dark .edit-note-modal .form-input,
.dark .edit-note-modal .form-textarea {
  background: #374151;
  border-color: #4b5563;
  color: #f9fafb;
}

.dark .edit-note-modal .form-input:focus,
.dark .edit-note-modal .form-textarea:focus {
  border-color: #3b82f6;
}

.edit-note-modal .form-textarea {
  resize: vertical;
  min-height: 80px;
}

.edit-note-modal .modal-footer {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  padding: 0 24px 24px 24px;
}

.edit-note-modal .btn {
  padding: 8px 16px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}

.edit-note-modal .btn-outline {
  background: #f9fafb;
  color: #374151;
  border: 1px solid #d1d5db;
}

.edit-note-modal .btn-outline:hover {
  background: #f3f4f6;
}

.dark .edit-note-modal .btn-outline {
  background: #374151;
  color: #d1d5db;
  border-color: #4b5563;
}

.dark .edit-note-modal .btn-outline:hover {
  background: #4b5563;
}

.edit-note-modal .btn-primary {
  background: #3b82f6;
  color: white;
}

.edit-note-modal .btn-primary:hover {
  background: #2563eb;
}

/* Grid layout left-to-right with dense packing */
.notes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  grid-auto-flow: row dense;
  gap: 16px;
  padding: 16px;
}

.note-cardv3 {
  display: flex;
  flex-direction: column;
}

@media (max-width: 1200px) {
  .notes-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
}

@media (max-width: 768px) {
  .notes-grid { grid-template-columns: 1fr; }
}
/* end grid responsive rules */

.note-cardv3 {
  background: white;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  border: 1px solid #e5e7eb;
  transition: all 0.2s;
  width: 100%;
  flex: 1;
}

/* Pending cards: transparent border, gray background */
.note-cardv3:not([data-type="note-thong-tin"]):not([data-type="completed"]) {
  border: 1px solid transparent;
  background: #e5e7eb; /* neutral subtle gray */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.dark .note-cardv3:not([data-type="note-thong-tin"]):not([data-type="completed"]) {
  border: 1px solid transparent;
  background: #111827; /* even darker */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}

/* Pending cards - no special styling, use default border */

/* Card colors - removed old styles */

.note-cardv3:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

.dark .note-cardv3 {
  background: #1f2937;
  color: #f9fafb;
}

/* Override dark mode border colors for card types */
.dark .note-cardv3[data-type="chua-xu-ly"] {
  border-color: #f59e0b; /* Orange border for "Chưa xử lý" */
}

.dark .note-cardv3[data-type="note-thong-tin"] {
  border-color: #3b82f6; /* Blue border for "Note thông tin" */
}

.dark .note-cardv3[data-type="completed"] {
  border-color: #10b981; /* Green border for "Hoàn thành" */
}

.note-cardv3 .v3-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.note-cardv3 .v3-body {
  margin-bottom: 12px;
  line-height: 1.5;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.note-cardv3 .v3-foot {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  font-size: 12px;
  color: #6b7280;
}

.dark .note-cardv3 .v3-foot {
  color: #9ca3af;
}

.note-cardv3 .v3-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.note-cardv3 .icon-btn {
  padding: 6px 8px;
  border: none;
  border-radius: 4px;
  background: #f3f4f6;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.note-cardv3 .icon-btn:hover {
  background: #e5e7eb;
}

.dark .note-cardv3 .icon-btn {
  background: #374151;
  color: #d1d5db;
}

.dark .note-cardv3 .icon-btn:hover {
  background: #4b5563;
}

/* Card border colors - only for info and completed */
.note-cardv3[data-type="note-thong-tin"] {
  border-color: #3b82f6 !important; /* Blue border for "Note thông tin" */
  border-width: 2px !important;
}

.note-cardv3[data-type="completed"] {
  border-color: #10b981 !important; /* Green border for "Hoàn thành" */
  border-width: 2px !important;
}

/* Dark mode card border colors */
.dark .note-cardv3[data-type="note-thong-tin"] {
  border-color: #3b82f6 !important; /* Blue border for "Note thông tin" */
  border-width: 2px !important;
}

.dark .note-cardv3[data-type="completed"] {
  border-color: #10b981 !important; /* Green border for "Hoàn thành" */
  border-width: 2px !important;
}

/* Scientific Filter System */
.scientific-filter {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.dark .scientific-filter {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
  border-color: #475569;
}

.filter-section {
  display: flex;
  gap: 32px;
  align-items: center;
  flex-wrap: wrap;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 120px;
}

.filter-label {
  font-size: 13px;
  font-weight: 600;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.dark .filter-label {
  color: #94a3b8;
}

.filter-options {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.filter-option {
  padding: 8px 16px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: #ffffff;
  color: #374151;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.filter-option:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
  transform: translateY(-1px);
}

.filter-option.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: #ffffff;
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

.dark .filter-option {
  background: #374151;
  border-color: #4b5563;
  color: #d1d5db;
}

.dark .filter-option:hover {
  background: #4b5563;
  border-color: #6b7280;
}

.dark .filter-option.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: #ffffff;
}

.filter-select {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: #ffffff;
  color: #374151;
  font-size: 14px;
  cursor: pointer;
  min-width: 120px;
  transition: all 0.2s ease;
}

.filter-select:hover {
  border-color: #9ca3af;
}

.filter-select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.dark .filter-select {
  background: #374151;
  border-color: #4b5563;
  color: #d1d5db;
}

.dark .filter-select:hover {
  border-color: #6b7280;
}

.dark .filter-select:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

@media (max-width: 768px) {
  .filter-section {
    flex-direction: column;
    align-items: stretch;
    gap: 20px;
  }
  
  .filter-group {
    min-width: auto;
  }
  
  .filter-options {
    justify-content: flex-start;
  }
}

/* Filter responsive styles - removed */

/* Radio buttons for note type */
.edit-note-modal .note-type-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.edit-note-modal .radio-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.edit-note-modal .radio-option:hover {
  background: #f3f4f6;
}

.dark .edit-note-modal .radio-option:hover {
  background: #374151;
}

.edit-note-modal .radio-option input[type="radio"] {
  margin: 0;
  margin-right: 12px;
  width: 16px;
  height: 16px;
  accent-color: #3b82f6;
}

.edit-note-modal .radio-label {
  font-size: 14px;
  color: #374151;
  user-select: none;
}

.dark .edit-note-modal .radio-label {
  color: #d1d5db;
}

/* Optimize form layout */
.edit-note-modal .form-group {
  margin-bottom: 12px;
}

.edit-note-modal .form-group:last-of-type {
  margin-bottom: 16px;
}

.edit-note-modal .form-textarea {
  min-height: 120px;
  resize: vertical;
}