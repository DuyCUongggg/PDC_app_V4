<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>AI Sales Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=0.0.2.6" />
    <style>
        /* Force logo image visible and hide legacy emoji icon */
        .logo-container .logo { display: none !important; }
        .logo-container .logo-img { width: 28px; height: 28px; display: inline-block; object-fit: contain; margin-right: 10px; }
        
        /* NEW SIMPLE BUTTONS - NO HOVER ISSUES */
        .new-quick-buttons {
            display: flex;
            gap: 8px;
        }
        
        .new-btn {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            cursor: pointer;
            font-weight: 600;
            color: #4a5568;
            font-size: 16px;
            font-family: inherit;
        }
        
        .new-btn.active {
            background: #3182ce !important;
            border-color: #3182ce !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
        }
        
        /* Dark mode */
        .dark .new-btn {
            background: #1a202c;
            border-color: #4a5568;
            color: #e2e8f0;
        }
        
        .dark .new-btn.active {
            background: #3182ce !important;
            border-color: #3182ce !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3) !important;
        }
    </style>
    <!-- Favicon -->
    <link rel="icon" href="img/paw-solid-full.svg" type="image/svg+xml" />
    <link rel="shortcut icon" href="img/paw-solid-full.svg" type="image/svg+xml" />
</head>
<body>
    <!-- App Shell -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="img/paw-solid-full.svg" alt="Logo" class="logo-img" width="28" height="28" />
                    <div class="brand-info">
                        <h1>AI Sales</h1>
                        <span class="brand-subtitle">Assistant</span>
                    </div>
                </div>
                
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Qu·∫£n l√Ω</h3>
                    <button class="nav-item active" onclick="switchTab('admin'); handleNavClick()" data-tab="admin">
                        <span class="nav-icon">üì¶</span>
                        <span class="nav-label">S·∫£n ph·∫©m</span>
                        <span class="nav-badge" id="productCountBadge">0</span>
                    </button>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">T·∫°o n·ªôi dung</h3>
                    <button class="nav-item" onclick="switchTab('refund'); handleNavClick()" data-tab="refund">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-label">Ho√†n ti·ªÅn</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('upgrade'); handleNavClick()" data-tab="upgrade">
                        <span class="nav-icon">üîÑ</span>
                        <span class="nav-label">ƒê·ªïi g√≥i</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('notes'); handleNavClick()" data-tab="notes">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-label">Ghi ch√∫</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('quote'); handleNavClick()" data-tab="quote">
                        <span class="nav-icon">üßæ</span>
                        <span class="nav-label">B√°o gi√°</span>
                    </button>
                </div>
                
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Qu·∫£n l√Ω</h3>
                    <button class="nav-item" onclick="switchTab('schedule'); handleNavClick()" data-tab="schedule">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-label">L·ªãch l√†m vi·ªác</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('family-check'); handleNavClick()" data-tab="family-check">
                        <span class="nav-icon">üîç</span>
                        <span class="nav-label">Check User Family MS</span>
                    </button>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Qu·∫£n l√Ω</span>
                    </div>
                </div>
            </div>
        </aside>
        

        

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuBtn" title="M·ªü menu" aria-label="M·ªü menu">‚ò∞</button>
                    <h2 class="page-title" id="pageTitle">Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>
                    <p class="page-subtitle" id="pageSubtitle">Th√™m, ch·ªânh s·ª≠a v√† qu·∫£n l√Ω c√°c g√≥i s·∫£n ph·∫©m</p>
                </div>
                
                <div class="header-controls">
                    <div class="header-stats">
                        <div class="header-stat">
                            <span class="header-stat-value" id="productCountHeader">0</span>
                            <span>S·∫£n ph·∫©m</span>
                        </div>
                        <div class="header-stat">
                            <span class="header-stat-value" id="lastUpdated">--:--</span>
                            <span>C·∫≠p nh·∫≠t</span>
                        </div>
                    </div>
                    
                    <div class="header-actions">
                        <div class="action-group">
                            <button class="btn btn-outline" id="themeToggleBtn" title="ƒê·ªïi giao di·ªán">
                                <span class="btn-icon">üåì</span>
                                Theme
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-primary" id="fileMenuBtn">
                                    <span class="btn-icon">üìÅ</span>
                                    File
                                    <span class="dropdown-arrow">‚ñº</span>
                                </button>
                                <div class="dropdown-menu" id="fileMenu">
                                    <button class="dropdown-item" onclick="loadFromGoogleSheets()">
                                        <span class="item-icon">üìä</span>
                                        T·∫£i t·ª´ Google Sheets
                                    </button>
                                    <button class="dropdown-item" onclick="saveToGoogleSheets()">
                                        <span class="item-icon">üíæ</span>
                                        L∆∞u v√†o Google Sheets
                                    </button>
                                    <div class="dropdown-divider"></div>
                                    <button class="dropdown-item" onclick="exportData()">
                                        <span class="item-icon">üì§</span>
                                        Xu·∫•t d·ªØ li·ªáu
                                    </button>
                                    <button class="dropdown-item" onclick="importData()">
                                        <span class="item-icon">üì•</span>
                                        Nh·∫≠p d·ªØ li·ªáu
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- ADMIN SECTION -->
                <section id="admin" class="tab-content active">
                    <!-- Header -->
                    <div class="admin-header">
                        <h1>üì¶ Qu·∫£n l√Ω S·∫£n ph·∫©m</h1>
                        <p>Th√™m v√† qu·∫£n l√Ω c√°c g√≥i s·∫£n ph·∫©m trong h·ªá th·ªëng</p>
                    </div>

                    <!-- Add Product Card -->
                    <div class="add-product-card">
                        <div class="card-header">
                            <div class="icon">+</div>
                            <h2>Th√™m s·∫£n ph·∫©m m·ªõi</h2>
                        </div>
                        
                        <form id="addProductForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">T√™n s·∫£n ph·∫©m</label>
                                    <input type="text" class="form-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." id="productName">
                                    <div class="error-message" id="nameError"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Th·ªùi h·∫°n</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="number" class="form-input" placeholder="0" id="productDuration" style="flex: 1;" min="1" step="1">
                                        <select class="form-select" id="durationUnit" style="flex: 1;">
                                            <option value="ng√†y">ng√†y</option>
                                            <option value="th√°ng">th√°ng</option>
                                            <option value="nƒÉm">nƒÉm</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Gi√°</label>
                                    <input type="number" class="form-input" placeholder="0" id="productPrice" inputmode="numeric" autocomplete="off">
                                    <div class="error-message" id="priceError"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Danh m·ª•c</label>
                                    <select class="form-select" id="productCategory">
                                        <option value="">Ch·ªçn danh m·ª•c</option>
                                        <option value="AI" selected>AI</option>
                                        <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                                        <option value="Combo">Combo</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Combo AI Selection -->
                            <div id="comboAISection" style="display: none; margin-bottom: 20px;">
                                <label class="form-label">Ch·ªçn AI cho Combo</label>
                                <div class="ai-selection-grid" id="aiSelectionGrid">
                                    <!-- AI products will be populated here from existing products -->
                                </div>
                                <div class="error-message" id="aiSelectionError"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: flex-end;">
                                <button type="button" class="add-btn" onclick="addProduct()">
                                    + Th√™m s·∫£n ph·∫©m
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Products List -->
                    <div class="products-section">
                        <div class="section-header">
                            <div class="section-title">
                                <div class="icon" style="background: #3498db;">üìã</div>
                                <h2>Danh s√°ch s·∫£n ph·∫©m</h2>
                                <span class="product-count" id="productsCount">0 s·∫£n ph·∫©m</span>
                            </div>
                        </div>
                        
                        <div class="search-filter-bar">
                            <input type="text" class="search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." id="adminSearch" oninput="filterProducts()">
                            <select class="filter-select" id="categoryFilter" onchange="filterProducts()">
                                <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                                <option value="AI">AI</option>
                                <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                                <option value="Combo">Combo</option>
                            </select>
                            <div class="bulk-actions">
                                <button class="bulk-btn" onclick="deleteSelectedProducts()">üóëÔ∏è X√≥a ƒë√£ ch·ªçn</button>
                            </div>
                        </div>

                        <div id="productsTableContainer">
                            <table class="products-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" class="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                                        <th>T√™n s·∫£n ph·∫©m</th>
                                        <th>Danh m·ª•c</th>
                                        <th>Th·ªùi h·∫°n</th>
                                        <th>Gi√°</th>
                                        <th>Thao t√°c</th>
                                    </tr>
                                </thead>
                                <tbody id="productList">
                                    <!-- Products will be dynamically loaded here -->
                                </tbody>
                            </table>
                        </div>

                        <div class="pagination" id="paginationContainer" style="display: none;">
                            <button class="page-btn" onclick="changePage(-1)">‚Äπ</button>
                            <button class="page-btn active" onclick="changePage(1)">1</button>
                            <button class="page-btn" onclick="changePage(2)">2</button>
                            <button class="page-btn" onclick="changePage(3)">3</button>
                            <button class="page-btn" onclick="changePage(1)">‚Ä∫</button>
                        </div>
                    </div>
                </section>


                <!-- REFUND SECTION -->
            <section id="refund" class="tab-content">
                    <div class="refund-container">
                        <!-- Header -->
                        <div class="refund-header">
                            <div style="flex:1"></div>
                            <button class="theme-toggle" onclick="toggleRefundTheme()">üåô</button>
                        </div>

                        <!-- Empty State -->
                        <div id="refundEmptyState" class="refund-empty-state">
                            <div class="empty-icon">üì¶</div>
                            <h3 class="empty-title">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</h3>
                            <p class="empty-description">H√£y th√™m s·∫£n ph·∫©m ƒë·∫ßu ti√™n c·ªßa b·∫°n</p>
                        </div>

                        <!-- Main Content -->
                        <!-- H√†ng 1: B∆∞·ªõc 1 & 2 -->
                        <div class="refund-row">
                            <!-- B∆∞·ªõc 1 ¬∑ Ch·ªçn s·∫£n ph·∫©m -->
                            <div class="refund-card">
                                <div class="refund-card-header">
                                    <div class="refund-icon">üì¶</div>
                                    <h2>B∆∞·ªõc 1 ¬∑ Ch·ªçn s·∫£n ph·∫©m</h2>
                                </div>

                                <div class="refund-search-box">
                                    <input type="text" class="refund-search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." id="refundProductSearchStep1" autocomplete="off" aria-autocomplete="none">
                                    <div id="refundSearchResultsStep1" class="refund-search-results"></div>
                                    <div id="refundSelectedProductStep1" class="refund-selected-product" style="display:none;"></div>
                                    <button type="button" class="btn btn-outline" onclick="clearRefundProductSelection()" style="margin-top:10px;">üóëÔ∏è X√≥a l·ª±a ch·ªçn</button>
                                </div>
                            </div>

                            <!-- B∆∞·ªõc 2 ¬∑ Tr√≠ch xu·∫•t m√£ ƒë∆°n h√†ng v√† ng√†y mua -->
                            <div class="refund-card">
                                <div class="refund-card-header">
                                    <div class="refund-icon">üßæ</div>
                                    <h2>B∆∞·ªõc 2 ¬∑ Tr√≠ch xu·∫•t m√£ ƒë∆°n & ng√†y mua</h2>
                                </div>
                                
                                <div class="refund-search-box">
                                    <textarea id="refundOrderInput" class="refund-search-input" placeholder="D√°n n·ªôi dung ƒë∆°n h√†ng v√†o ƒë√¢y..." style="min-height:60px;"></textarea>
                                    <div style="margin-top: 6px; font-size: 11px; color: #666;">
                                        <strong>V√≠ d·ª•:</strong><br>
                                        1. [ƒê∆°n h√†ng #71854] (25/09/2025)<br>
                                        2. photoshoptutorial13@gmail.com 395,000‚Ç´ 71968 CENTRIX_ASIA PAID SUCCESS 29/09/2025 10:37
                                    </div>
                                    <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
                                        <button type="button" class="btn btn-primary" onclick="extractRefundOrderInfo()">üîç Tr√≠ch xu·∫•t</button>
                                        <button type="button" class="btn btn-outline" onclick="clearRefundOrderInfo()">üóëÔ∏è X√≥a</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- H√†ng 2: B∆∞·ªõc 3 & 4 -->
                        <div class="refund-row">
                            <!-- B∆∞·ªõc 3 ¬∑ Kho·∫£ng th·ªùi gian -->
                            <div class="refund-card">
                                <div class="refund-card-header">
                                    <div class="refund-icon">üìÖ</div>
                                    <h2>B∆∞·ªõc 3 ¬∑ Kho·∫£ng th·ªùi gian</h2>
                                </div>
                                
                                <!-- Date range container with 2 colored frames -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <!-- Option 1: T·ª´ ng√†y mua ‚Üí ƒê·∫øn ng√†y ho√†n (Blue frame) -->
                                    <div class="refund-date-frame refund-frame-blue">
                                        <div class="refund-frame-header">
                                            <h4>1. T·ª´ ng√†y mua ‚Üí ƒê·∫øn ng√†y ho√†n</h4>
                                        </div>
                                        <div class="refund-frame-content">
                                            <div class="refund-date-group">
                                                <label class="refund-date-label">T·ª´ ng√†y mua g√≥i</label>
                                                <div class="refund-input-with-btn">
                                                    <input type="date" class="refund-date-input" id="purchaseStartDate">
                                                    <button type="button" class="refund-today-btn" onclick="setToday('purchaseStartDate')" title="H√¥m nay">üìÖ</button>
                                                </div>
                                            </div>
                                            <div class="refund-date-group">
                                                <label class="refund-date-label">ƒê·∫øn ng√†y ho√†n</label>
                                                <div class="refund-input-with-btn">
                                                    <input type="date" class="refund-date-input" id="purchaseEndDate">
                                                    <button type="button" class="refund-today-btn" onclick="setToday('purchaseEndDate')" title="H√¥m nay">üìÖ</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Option 2: T·ª´ ng√†y ho√†n ‚Üí ƒê·∫øn ng√†y h·∫øt g√≥i (Green frame) -->
                                    <div class="refund-date-frame refund-frame-green">
                                        <div class="refund-frame-header">
                                            <h4>2. T·ª´ ng√†y ho√†n ‚Üí ƒê·∫øn ng√†y h·∫øt g√≥i</h4>
                                        </div>
                                        <div class="refund-frame-content">
                                            <div class="refund-date-group">
                                                <label class="refund-date-label">T·ª´ ng√†y ho√†n</label>
                                                <div class="refund-input-with-btn">
                                                    <input type="date" class="refund-date-input" id="refundStartDate">
                                                    <button type="button" class="refund-today-btn" onclick="setToday('refundStartDate')" title="H√¥m nay">üìÖ</button>
                                                </div>
                                            </div>
                                            <div class="refund-date-group">
                                                <label class="refund-date-label">ƒê·∫øn ng√†y h·∫øt g√≥i</label>
                                                <div class="refund-input-with-btn">
                                                    <input type="date" class="refund-date-input" id="refundEndDate">
                                                    <button type="button" class="refund-today-btn" onclick="setToday('refundEndDate')" title="H√¥m nay">üìÖ</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-top:15px; display:flex; gap:10px; flex-wrap:wrap;">
                                    <button type="button" class="btn btn-outline" onclick="clearAllRefundDates()">üóëÔ∏è X√≥a t·∫•t c·∫£ ng√†y</button>
                                </div>
                            </div>

                            <!-- B∆∞·ªõc 4 ¬∑ Th√¥ng tin g√≥i ƒë√£ ch·ªçn -->
                            <div class="refund-card refund-selected-products" id="refundSelectedProductsCard" style="display:none;">
                                <div class="refund-card-header">
                                    <div class="refund-icon">‚úÖ</div>
                                    <h2>B∆∞·ªõc 4 ¬∑ Th√¥ng tin g√≥i ƒë√£ ch·ªçn</h2>
                                </div>

                                <!-- Combo products selection -->
                                <div id="comboRefundSection" class="combo-refund-section" style="display: none;">
                                    <div id="comboProductsList" class="combo-products-list">
                                        <!-- Combo products will be populated here -->
                                    </div>
                                </div>

                                <div id="refundSelectedProduct" class="refund-selected-products-list" style="display:none;">
                                    <div class="refund-selected-item">
                                        <div class="refund-selected-item-info">
                                            <div class="refund-selected-item-name" id="refundProductName"></div>
                                            <div class="refund-selected-item-details">
                                                <span id="refundProductPrice"></span>
                                                <span id="refundProductDuration"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <div id="refundEmptySelected" class="refund-empty-state">
                                    <p>Ch∆∞a ch·ªçn s·∫£n ph·∫©m n√†o</p>
                                </div>
                            </div>
                        </div>
                        </div>


                        <!-- N√∫t t√≠nh ho√†n ti·ªÅn v√† c√†i ƒë·∫∑t m·∫´u -->
                        <div class="refund-calculate-section" id="refundCalculateSection" style="display:none;">
                            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                                <button id="refundBtn" class="btn btn-primary btn-large" disabled onclick="calculateRefundManual()">
                                    <span class="btn-icon">üí∞</span>
                                    T√≠nh ho√†n ti·ªÅn
                                </button>
                            </div>
                        </div>

                        <!-- K·∫øt qu·∫£ -->
                        <div class="refund-card refund-results-card" id="refundResult" style="display:none;">
                            <div class="refund-card-header">
                                <div class="refund-icon">üìä</div>
                                <h2>K·∫øt qu·∫£ t√≠nh to√°n</h2>
                                <button class="refund-reset-btn" onclick="restartRefundForm()">üîÑ Reset</button>
                            </div>

                            <div class="refund-results-container">
                                <!-- Chi ti·∫øt t√≠nh to√°n -->
                                <div class="refund-left-column">
                                    <h3>üìä Chi ti·∫øt t√≠nh to√°n</h3>
                                    <div id="refundBreakdown" class="refund-breakdown"></div>
                                </div>
                                
                                <!-- N·ªôi dung g·ª≠i kh√°ch -->
                                <div class="refund-right-column">
                                    <div class="refund-right-header">
                                        <h3>üìã N·ªôi dung g·ª≠i kh√°ch</h3>
                                    </div>
                                    
                                    <textarea id="refundCustomerMessageEditor" class="refund-message-textarea" placeholder="Tin nh·∫Øn s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông..."></textarea>
                                    <div class="refund-message-actions">
                                        <button class="btn btn-primary btn-sm" onclick="copyRefundResult()">
                                            <span class="btn-icon">üìã</span>
                                            Copy tin nh·∫Øn
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- UPGRADE SECTION -->
                <section id="upgrade" class="tab-content">
                    <div class="card upgrade-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üîÑ</span>
                                ƒê·ªïi g√≥i s·∫£n ph·∫©m
                            </h3>
                            <div class="card-actions">
                                <button id="upgradeRefreshBtn" type="button" class="btn btn-outline btn-sm" onclick="refreshUpgradeData()">
                                    <span class="btn-icon">üîÑ</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                            <p class="card-subtitle">T√≠nh to√°n s·ªë ti·ªÅn b√π khi kh√°ch h√†ng ƒë·ªïi sang g√≥i kh√°c</p>
                        </div>
                        
                        <div class="card-content">
                            <div id="upgradeEmptyState" class="empty-state">
                                <div class="empty-icon">üîÑ</div>
                                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m</h4>
                                <p>Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi t√≠nh ƒë·ªïi g√≥i</p>
                            </div>

                            <div class="upgrade-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">G√≥i hi·ªán t·∫°i</label>
                                        <div class="search-container">
                                            <input id="currentProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm g√≥i hi·ªán t·∫°i..." autocomplete="off" aria-autocomplete="none" />
                                            <div id="currentProductSearchResults" class="search-results"></div>
                                        </div>
                                        <label class="form-label" style="margin-top:12px;">T·ª´ ng√†y mua g√≥i</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeStartDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeStartDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">G√≥i mu·ªën ƒë·ªïi</label>
                                        <div class="search-container">
                                            <input id="newProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm g√≥i m·ªõi..." autocomplete="off" aria-autocomplete="none" />
                                            <div id="newProductSearchResults" class="search-results"></div>
                                        </div>
                                        <label class="form-label" style="margin-top:12px;">ƒê·∫øn ng√†y ƒë·ªïi g√≥i m·ªõi</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeEndDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeEndDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Removed selected products comparison per request -->
                                <div id="upgradeSelectedProducts" class="selected-products" style="display:none;"></div>

                                <button id="upgradeBtn" class="btn-calculate" disabled onclick="calculateUpgrade()">
                                    <span class="btn-icon">üßÆ</span>
                                    T√≠nh ƒë·ªïi g√≥i
                                </button>
                            </div>

                            <div id="upgradeResult" class="upgrade-result" style="display:none;">
                                <div class="result-header">
                                    <h4>K·∫øt qu·∫£ ƒë·ªïi g√≥i</h4>
                                </div>
                                
                                <div class="result-sections">
                                    <div class="result-section">
                                        <h5>Chi ti·∫øt t√≠nh to√°n</h5>
                                        <div id="upgradeBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <div class="result-section">
                                        <h5>N·ªôi dung g·ª≠i kh√°ch</h5>
                                        <div class="result-content">
                                            <pre id="upgradeCustomerContent" class="upgrade-code"></pre>
                                            <div class="share-block">
                                                <button class="btn btn-primary" onclick="copyUpgradeResult()">
                                                    <span class="btn-icon">üìã</span>
                                                    Copy n·ªôi dung g·ª≠i kh√°ch
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </section>

            <!-- Tags Settings Modal -->
            <div id="tagsSettingsModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Qu·∫£n l√Ω Tag</h3>
                        <button class="modal-close" onclick="closeTagsSettings()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div style="display:flex; gap:8px; margin-bottom:12px;">
                            <input id="newTagInput" class="form-input" placeholder="Nh·∫≠p tag m·ªõi..." />
                            <button class="btn btn-primary" onclick="addNewTagFromModal()">Th√™m</button>
                        </div>
                        <div style="font-size:12px; color:var(--text-secondary); margin-bottom:6px;">Danh s√°ch tag ƒë√£ l∆∞u</div>
                        <div id="tagsManageList" class="notes-category-list"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-outline" onclick="closeTagsSettings()">ƒê√≥ng</button>
                    </div>
                </div>
            </div>

                <!-- SCHEDULE SECTION -->
                <section id="schedule" class="tab-content">
                    <div class="card schedule-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üìÖ</span>
                                L·ªãch l√†m vi·ªác
                            </h3>
                            <p class="card-subtitle">Qu·∫£n l√Ω l·ªãch l√†m vi·ªác c·ªßa team 4 ng∆∞·ªùi</p>
                        </div>
                        
                        <div class="card-content">
                            <!-- Schedule Controls -->
                            <div class="schedule-controls">
                                <div class="view-toggle">
                                    <button class="btn btn-outline active" onclick="switchScheduleView('team')" id="teamViewBtn">
                                        <span class="btn-icon">üë•</span>
                                        L·ªãch t·ªïng
                                    </button>
                                    <button class="btn btn-outline" onclick="switchScheduleView('personal')" id="personalViewBtn">
                                        <span class="btn-icon">üë§</span>
                                        L·ªãch c√° nh√¢n
                                    </button>
                                </div>
                                
                                <div class="schedule-actions">
                                    <button class="btn btn-outline" onclick="openManagePeopleModal()">
                                        <span class="btn-icon">üë•</span>
                                        Qu·∫£n l√Ω ng∆∞·ªùi
                                    </button>
                                </div>
                            </div>

                            <!-- Team Schedule View -->
                            <div id="teamScheduleView" class="schedule-view active">
                                <div class="schedule-header">
                                    <h4>L·ªãch l√†m vi·ªác t·ªïng</h4>
                                    <div class="view-mode-toggle">
                                        <button class="btn btn-outline active" onclick="switchTeamViewMode('week')" id="teamWeekBtn">
                                            <span class="btn-icon">üìÖ</span>
                                            Tu·∫ßn
                                        </button>
                                        <button class="btn btn-outline" onclick="switchTeamViewMode('month')" id="teamMonthBtn">
                                            <span class="btn-icon">üìÜ</span>
                                            Th√°ng
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Team Week View -->
                                <div id="teamWeekView" class="team-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">‚Üê</button>
                                        <span id="currentWeek" class="week-display">Tu·∫ßn 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="teamScheduleGrid">
                                            <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Team Month View -->
                                <div id="teamMonthView" class="team-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">‚Üê</button>
                                        <span id="currentMonth" class="month-display">Th√°ng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="teamMonthlyCalendar">
                                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Schedule View -->
                            <div id="personalScheduleView" class="schedule-view">
                                <div class="schedule-header">
                                    <h4>L·ªãch c√° nh√¢n</h4>
                                    <div class="personal-controls">
                                        <div class="person-selector">
                                            <select id="personSelect" class="form-select" onchange="loadPersonalSchedule()">
                                                <option value="person1">Ng∆∞·ªùi 1</option>
                                                <option value="person2">Ng∆∞·ªùi 2</option>
                                                <option value="person3">Ng∆∞·ªùi 3</option>
                                                <option value="person4">Ng∆∞·ªùi 4</option>
                                            </select>
                                        </div>
                                        <div class="view-mode-toggle">
                                            <button class="btn btn-outline active" onclick="switchPersonalViewMode('week')" id="personalWeekBtn">
                                                <span class="btn-icon">üìÖ</span>
                                                Tu·∫ßn
                                            </button>
                                            <button class="btn btn-outline" onclick="switchPersonalViewMode('month')" id="personalMonthBtn">
                                                <span class="btn-icon">üìÜ</span>
                                                Th√°ng
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Week View -->
                                <div id="personalWeekView" class="personal-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">‚Üê</button>
                                        <span id="personalCurrentWeek" class="week-display">Tu·∫ßn 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="personalScheduleGrid">
                                            <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Month View -->
                                <div id="personalMonthView" class="personal-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">‚Üê</button>
                                        <span id="personalCurrentMonth" class="month-display">Th√°ng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="personalMonthlyCalendar">
                                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                    </div>
                                </div>
                            </div>


                            <!-- Schedule Stats -->
                            <div class="schedule-stats">
                                <div class="stat-card">
                                    <div class="stat-icon">‚è∞</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalHours">0h</div>
                                        <div class="stat-label">T·ªïng gi·ªù l√†m</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üë•</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="activePeople">0</div>
                                        <div class="stat-label">Ng∆∞·ªùi l√†m vi·ªác</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üìä</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="coverageRate">0%</div>
                                        <div class="stat-label">T·ª∑ l·ªá ph·ªß ca</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üí∞</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalSalary">0ƒë</div>
                                        <div class="stat-label">T·ªïng l∆∞∆°ng</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üçΩÔ∏è</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalMealAllowance">0ƒë</div>
                                        <div class="stat-label">Tr·ª£ c·∫•p ƒÉn</div>
                                    </div>
                                </div>
                            </div>

                            <!-- People Summary -->
                            <div class="people-summary">
                                <h4>Th·ªëng k√™ t·ª´ng ng∆∞·ªùi</h4>
                                <div class="people-grid" id="peopleGrid">
                                    <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- NOTES SECTION -->
                <section id="notes" class="tab-content">
                    <div class="card notes-card">
                        <div class="card-header">
                            <div class="notes-toggle">
                                <button id="notesListBtn" class="btn btn-outline active" onclick="switchNotesView('list')">Danh s√°ch</button>
                                <button id="notesAddBtn" class="btn btn-outline" onclick="switchNotesView('add')">Th√™m ghi ch√∫</button>
                            </div>
                        </div>
                        
                        <div class="card-content">
                                <div>
                            <!-- Note Form -->
                            <div id="notesAddView" class="note-form" style="display:none;">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Tag (ph√¢n lo·∫°i)</label>
                                        <div class="tag-select-row" style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
                                            <select id="noteTagSelect" class="form-select" style="min-width:220px;" onchange="toggleNoteFields()">
                                                <option value="chua-xu-ly" selected>Ch∆∞a x·ª≠ l√Ω</option>
                                                <option value="note-thong-tin">Note th√¥ng tin</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <!-- Fields for "Ch∆∞a x·ª≠ l√Ω" -->
                                    <div id="noteAdditionalFields">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">Link chat kh√°ch h√†ng</label>
                                                <div class="link-input-group">
                                                    <input type="url" id="noteChatLink" class="form-input" placeholder="https://m.me/khachhang ho·∫∑c https://zalo.me/...">
                                                    <button type="button" class="btn-copy-link" onclick="copyCurrentChatLink()" title="Copy link">
                                                        <span class="btn-icon">üìã</span>
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label class="form-label">M√£ ƒë∆°n h√†ng</label>
                                                <input type="text" id="noteOrderId" class="form-input" placeholder="VD: DH001, ORDER123...">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Fields for "Note th√¥ng tin" -->
                                    <div id="noteInfoFields" style="display:none;">
                                        <div class="form-group">
                                            <label class="form-label">Ti√™u ƒë·ªÅ</label>
                                            <input type="text" id="noteTitle" class="form-input" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ ghi ch√∫...">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label class="form-label">N·ªôi dung ghi ch√∫</label>
                                        <textarea id="noteContent" class="form-textarea" rows="4" placeholder="Nh·∫≠p n·ªôi dung ghi ch√∫ cho kh√°ch h√†ng..."></textarea>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button class="btn btn-primary btn-large" onclick="createNote()">
                                        <span class="btn-icon">‚ûï</span>
                                        T·∫°o ghi ch√∫
                                    </button>
                                    <button class="btn btn-outline" onclick="clearNoteForm()">
                                        <span class="btn-icon">üóëÔ∏è</span>
                                        X√≥a form
                                    </button>
                                </div>
                            </div>

                            <!-- Notes List -->
                            <div id="notesListView" class="notes-list" style="display:block;">
                                <div class="notes-header">
                                    <h4>Danh s√°ch ghi ch√∫</h4>
                                    <div class="notes-stats">
                                        <span id="notesCount">0 ghi ch√∫</span>
                                    </div>
                                </div>
                                
                                <!-- Search box -->
                                <div class="notes-search">
                                    <div class="search-input-group">
                                        <input type="text" id="notesSearchInput" class="form-input" placeholder="T√¨m ki·∫øm theo m√£ ƒë∆°n h√†ng, link chat, n·ªôi dung..." onkeyup="searchNotes()">
                                        <button class="btn btn-outline btn-sm" onclick="clearNotesSearch()" title="X√≥a t√¨m ki·∫øm">
                                            <span class="btn-icon">‚ùå</span>
                                        </button>
                                    </div>
                                </div>
                                
            
            <!-- Bulk actions for completed notes -->
            <div id="bulkActionsContainer" class="notes-bulk-actions" style="display: none;">
                <div class="bulk-actions-header">
                    <label class="bulk-checkbox">
                        <input type="checkbox" id="selectAllCompleted" onchange="toggleSelectAllCompleted()">
                        <span class="checkmark"></span>
                        Ch·ªçn t·∫•t c·∫£
                    </label>
                    <button class="btn btn-danger btn-sm" onclick="deleteSelectedCompleted()" id="deleteSelectedBtn" disabled>
                        üóëÔ∏è X√≥a ƒë√£ ch·ªçn
                    </button>
                </div>
            </div>
                                
                                <!-- Scientific Filter System -->
                                <div class="scientific-filter">
                                    <div class="filter-section">
                                        <div class="filter-group">
                                            <label class="filter-label">Tr·∫°ng th√°i</label>
                                            <div class="filter-options">
                                                <button class="filter-option active" data-filter="pending">Ch∆∞a x·ª≠ l√Ω</button>
                                                <button class="filter-option" data-filter="info">Th√¥ng tin</button>
                                                <button class="filter-option" data-filter="completed">Ho√†n th√†nh</button>
                                            </div>
                                        </div>
                                        <div class="filter-group">
                                            <label class="filter-label">Th·ªùi gian</label>
                                            <div class="filter-options">
                                                <button class="filter-option active" data-time="all">T·∫•t c·∫£</button>
                                                <button class="filter-option" data-time="today">H√¥m nay</button>
                                                <button class="filter-option" data-time="yesterday">H√¥m qua</button>
                                            </div>
                                        </div>
                                        <div class="filter-group">
                                            <label class="filter-label">S·∫Øp x·∫øp</label>
                                            <select class="filter-select" id="sortSelect">
                                                <option value="newest">M·ªõi nh·∫•t</option>
                                                <option value="oldest">C≈© nh·∫•t</option>
                                                <option value="alphabetical">A-Z</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="notesList" class="notes-container">
                                    <div class="empty-state">
                                        <div class="empty-icon">üìã</div>
                                        <h4>Ch∆∞a c√≥ ghi ch√∫</h4>
                                        <p>T·∫°o ghi ch√∫ ƒë·∫ßu ti√™n cho kh√°ch h√†ng</p>
                                    </div>
                                </div>
                            </div>
                                </div>
                            
                        </div>
                    </div>
                </section>

                <!-- QUOTE SECTION -->
                <section id="quote" class="tab-content">
                    <div class="card quote-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üí∞</span>
                                T√≠nh b√°o gi√°
                            </h3>
                            <div class="card-actions">
                                <button id="quoteRefreshBtn" type="button" class="btn btn-outline" onclick="refreshQuoteData()">
                                    <span class="btn-icon">üîÑ</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                            <p class="card-subtitle">T√≠nh b√°o gi√° v·ªõi ph√≠ b·∫£o h√†nh 10% v√† VAT 8%</p>
                        </div>

                        <div class="card-content">
                            <div id="quoteEmptyState" class="empty-state">
                                <div class="empty-icon">üí∞</div>
                                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m</h4>
                                <p>Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi t√≠nh b√°o gi√°</p>
                            </div>

                            <div class="quote-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Ch·ªçn s·∫£n ph·∫©m</label>
                                        <div class="search-container">
                                            <input id="quoteProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." />
                                            <div id="quoteSearchResults" class="search-results"></div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">S·ªë l∆∞·ª£ng</label>
                                        <input id="quoteQuantity" class="form-input" type="number" placeholder="1" min="1" step="1" value="1" />
                                    </div>
                                    
                                    <div class="form-group">
                                        <button id="addProductBtn" class="btn btn-outline" disabled onclick="addProductToQuote()">
                                            <span class="btn-icon">‚ûï</span>
                                            Th√™m s·∫£n ph·∫©m
                                        </button>
                                    </div>
                                </div>

                                <!-- Danh s√°ch s·∫£n ph·∫©m ƒë√£ ch·ªçn -->
                                <div id="quoteProductList" class="quote-product-list" style="display:none;">
                                    <div class="selected-header">
                                        <h4>Danh s√°ch s·∫£n ph·∫©m ƒë√£ ch·ªçn</h4>
                                        <button class="btn btn-outline btn-sm" onclick="clearQuoteProducts()">
                                            <span class="btn-icon">üóëÔ∏è</span>
                                            X√≥a t·∫•t c·∫£
                                        </button>
                                    </div>
                                    <div id="selectedProductsList" class="selected-products-list"></div>
                                </div>

                                <div class="form-actions">
                                    <button id="quoteBtn" class="btn btn-primary btn-large" disabled onclick="calculateQuote()">
                                        <span class="btn-icon">üßæ</span>
                                        T√≠nh b√°o gi√°
                                    </button>
                                </div>
                            </div>

                            <div id="quoteResult" class="quote-result" style="display:none;">
                                <div class="result-header">
                                    <h4>K·∫øt qu·∫£ b√°o gi√°</h4>
                                    <div class="result-actions">
                                        <button class="btn btn-outline" onclick="toggleQuoteView('breakdown')">
                                            <span class="btn-icon">üìä</span>
                                            Chi ti·∫øt
                                        </button>
                                        <button class="btn btn-outline" onclick="toggleQuoteView('table')">
                                            <span class="btn-icon">üìã</span>
                                            B·∫£ng b√°o gi√°
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="result-sections">
                                    <!-- Chi ti·∫øt t√≠nh to√°n -->
                                    <div id="quoteBreakdownView" class="result-section active">
                                        <h5>Chi ti·∫øt t√≠nh to√°n</h5>
                                        <div id="quoteBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <!-- B·∫£ng b√°o gi√° -->
                                    <div id="quoteTableView" class="result-section">
                                        <h5>B·∫£ng b√°o gi√° ch√≠nh th·ª©c</h5>
                                        <div class="invoice-table-container">
                                            <div id="invoiceTable" class="invoice-table"></div>
                                        </div>
                                        <div class="share-block">
                                            <button class="btn btn-primary" onclick="copyInvoiceTable()">
                                                <span class="btn-icon">üìã</span>
                                                Copy b·∫£ng cho Word
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- FAMILY CHECK SECTION -->
                <section id="family-check" class="tab-content">
                    <div class="card family-check-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üîç</span>
                                Check User Family MS
                            </h3>
                            <p class="card-subtitle">So s√°nh danh s√°ch email t·ª´ Microsoft Family v·ªõi th√¥ng tin l∆∞u tr·ªØ</p>
                        </div>
                        
                        <div class="card-content">
                            <!-- Input Form -->
                            <div class="family-check-form">
                                <!-- Number of pairs control -->
                                <div class="pairs-control">
                                    <div class="form-group">
                                        <label class="form-label">Ch·ªçn s·ªë c·∫∑p list mail</label>
                                        <div class="pairs-input-row">
                                            <div class="custom-input-group">
                                                <span class="input-label">Nh·∫≠p s·ªë:</span>
                                                <input id="numberOfPairs" class="form-input" type="number" min="1" max="10" value="1" onchange="updatePairTabs()" />
                                            </div>
                                            <div class="new-quick-buttons">
                                                <button class="new-btn" id="btn1" onclick="testButton(1)">1 c·∫∑p</button>
                                                <button class="new-btn" id="btn2" onclick="testButton(2)">2 c·∫∑p</button>
                                                <button class="new-btn" id="btn3" onclick="testButton(3)">3 c·∫∑p</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Email input containers -->
                                <div class="email-containers" id="emailContainers">
                                    <div class="email-pair active" data-pair="1">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">Microsoft Family</label>
                                                <textarea class="form-textarea family-emails" rows="8" placeholder="D√°n danh s√°ch email t·ª´ Microsoft Family v√†o ƒë√¢y...&#10;&#10;V√≠ d·ª•:&#10;legal chady (you)&#10;Family organizer&#10;legalchadyhr@outlook.com&#10;&#10;Joseph Nguyen&#10;Member&#10;nghnguyen96@gmail.com"></textarea>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label class="form-label">Th√¥ng tin l∆∞u tr·ªØ</label>
                                                <textarea class="form-textarea stored-emails" rows="8" placeholder="D√°n danh s√°ch email t·ª´ th√¥ng tin l∆∞u tr·ªØ v√†o ƒë√¢y...&#10;&#10;V√≠ d·ª•:&#10;Bruce Do&#10;trungdn1908@gmail.com&#10;&#10;Isolated Magician&#10;kirito7129@gmail.com"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button class="btn btn-primary btn-large" onclick="checkAllFamilyEmails()">
                                        <span class="btn-icon">üîç</span>
                                        B·∫Øt ƒë·∫ßu check t·∫•t c·∫£
                                    </button>
                                    <button class="btn btn-outline" onclick="clearAllFamilyForms()">
                                        <span class="btn-icon">üóëÔ∏è</span>
                                        X√≥a t·∫•t c·∫£
                                    </button>
                                    <button class="btn btn-help" onclick="showGuideModal()" title="H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng">
                                        <span class="btn-icon">üìñ</span>
                                        HDSD
                                    </button>
                                </div>
                                

                            </div>

                            <!-- Results -->
                            <div id="familyCheckResult" class="family-check-result" style="display:none;">
                                <div class="result-header">
                                    <div class="result-header-content">
                                        <div class="result-title">
                                            <div>K·∫øt qu·∫£</div>
                                            <div>Ki·ªÉm tra</div>
                                        </div>
                                        
                                        <!-- View Toggle Buttons -->
                                        <div class="view-toggle-container" id="viewToggleContainer" style="display:none;">
                                            <div class="view-toggle-buttons">
                                                <button class="view-btn view-btn-detailed active" id="detailedBtn" onclick="switchToDetailedView()">
                                                    Chi ti·∫øt
                                                </button>
                                                <button class="view-btn view-btn-overview" id="overviewBtn" onclick="switchToOverviewView()">
                                                    T·ªïng quan
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="result-summary" id="resultSummary"></div>
                                </div>
                                
                                <!-- Results for each pair -->
                                <div id="resultsContainer" class="results-container">
                                    <!-- Results will be generated dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>

        <div id="workflowStatus"></div>
    </div>


    <div class="mobile-overlay" id="mobileOverlay"></div>



    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h3>
                <button class="modal-close" onclick="closeEditModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">T√™n s·∫£n ph·∫©m</label>
                        <input id="editProductName" class="form-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Th·ªùi h·∫°n</label>
                        <div class="input-group">
                            <input id="editProductDuration" class="form-input" type="number" placeholder="0" />
                            <select id="editDurationUnit" class="form-select">
                                <option value="ng√†y">ng√†y</option>
                                <option value="th√°ng">th√°ng</option>
                                <option value="nƒÉm">nƒÉm</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Gi√° (VNƒê)</label>
                        <input id="editProductPrice" class="form-input" placeholder="0" inputmode="numeric" autocomplete="off" />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Danh m·ª•c</label>
                        <select id="editProductCategory" class="form-select">
                            <option value="AI">AI</option>
                            <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                            <option value="Combo">Combo</option>
                        </select>
                    </div>
                    
                    <!-- Edit Combo AI Selection -->
                    <div id="editComboSection" class="combo-section" style="display:none;">
                        <div class="form-group">
                            <label class="form-label">Ch·ªçn AI cho Combo</label>
                            <div class="ai-selection-grid" id="editAiSelectionGrid">
                                <!-- AI products will be populated here from existing products -->
                            </div>
                            <div class="error-message" id="editAiSelectionError"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeEditModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveEditProduct()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div id="confirmDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
            <h3 id="confirmTitle">X√°c nh·∫≠n</h3>
            </div>
            
            <div class="modal-body">
                <p id="confirmMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën th·ª±c hi·ªán h√†nh ƒë·ªông n√†y?</p>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeConfirm()">H·ªßy</button>
                <button class="btn btn-danger" onclick="confirmAction()">
                    <span class="btn-icon">‚ö†Ô∏è</span>
                    X√°c nh·∫≠n
                </button>
            </div>
        </div>
    </div>

    <!-- Manage People Modal -->
    <div id="managePeopleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Qu·∫£n l√Ω ng∆∞·ªùi l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeManagePeopleModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="people-management">
                    <div class="people-list" id="peopleList">
                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteAllPeople()">X√≥a t·∫•t c·∫£ ng∆∞·ªùi</button>
                <button class="btn btn-outline" onclick="closeManagePeopleModal()">ƒê√≥ng</button>
                <button class="btn btn-primary" onclick="savePeopleChanges()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Shift Modal -->
    <div id="editShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="editShiftTitle">Ch·ªânh s·ª≠a ca l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeEditShiftModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Ng∆∞·ªùi l√†m vi·ªác</label>
                        <select id="editShiftPerson" class="form-select">
                            <option value="person1">Ng∆∞·ªùi 1</option>
                            <option value="person2">Ng∆∞·ªùi 2</option>
                            <option value="person3">Ng∆∞·ªùi 3</option>
                            <option value="person4">Ng∆∞·ªùi 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ng√†y</label>
                        <select id="editShiftDay" class="form-select">
                            <option value="monday">Th·ª© 2</option>
                            <option value="tuesday">Th·ª© 3</option>
                            <option value="wednesday">Th·ª© 4</option>
                            <option value="thursday">Th·ª© 5</option>
                            <option value="friday">Th·ª© 6</option>
                            <option value="saturday">Th·ª© 7</option>
                            <option value="sunday">Ch·ªß nh·∫≠t</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca l√†m vi·ªác</label>
                        <select id="editShiftType" class="form-select" onchange="updateEditShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">C·∫£ ng√†y (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tr·ª£ c·∫•p ƒÉn c∆°m</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="company" checked>
                                <span class="radio-label">C√¥ng ty cung c·∫•p (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="self">
                                <span class="radio-label">T·ª± mua c∆°m (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi ch√∫ (t√πy ch·ªçn)</label>
                        <input id="editShiftNote" class="form-input" placeholder="Ghi ch√∫ ƒë·∫∑c bi·ªát..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteShift()">
                    <span class="btn-icon">üóëÔ∏è</span>
                    X√≥a ca
                </button>
                <button class="btn btn-outline" onclick="closeEditShiftModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveShift()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="addShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Th√™m ca l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeAddShiftModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Ng∆∞·ªùi l√†m vi·ªác</label>
                        <select id="shiftPerson" class="form-select">
                            <option value="person1">Ng∆∞·ªùi 1</option>
                            <option value="person2">Ng∆∞·ªùi 2</option>
                            <option value="person3">Ng∆∞·ªùi 3</option>
                            <option value="person4">Ng∆∞·ªùi 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ng√†y</label>
                        <select id="shiftDay" class="form-select">
                            <option value="monday">Th·ª© 2</option>
                            <option value="tuesday">Th·ª© 3</option>
                            <option value="wednesday">Th·ª© 4</option>
                            <option value="thursday">Th·ª© 5</option>
                            <option value="friday">Th·ª© 6</option>
                            <option value="saturday">Th·ª© 7</option>
                            <option value="sunday">Ch·ªß nh·∫≠t</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca l√†m vi·ªác</label>
                        <select id="shiftType" class="form-select" onchange="updateShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">C·∫£ ng√†y (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tr·ª£ c·∫•p ƒÉn c∆°m</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="company" checked>
                                <span class="radio-label">C√¥ng ty cung c·∫•p (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="self">
                                <span class="radio-label">T·ª± mua c∆°m (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi ch√∫ (t√πy ch·ªçn)</label>
                        <input id="shiftNote" class="form-input" placeholder="Ghi ch√∫ ƒë·∫∑c bi·ªát..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeAddShiftModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="addShift()">
                    <span class="btn-icon">‚ûï</span>
                    Th√™m ca
                </button>
            </div>
        </div>
    </div>


    

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/version.js"></script>
    
    <script src="js/app.js"></script>
    <script src="js/modules/refund.js"></script>
    <script src="js/modules/admin.js"></script>
    <script src="js/modules/upgrade.js"></script>
    <script src="js/modules/schedule.js"></script>
    <script src="js/modules/notes.js"></script>
    <script src="js/modules/quote.js"></script>
    <script src="js/modules/family-check.js"></script>
    
    <!-- Guide Modal -->
    <div class="modal-overlay" id="guideModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üìñ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Check User Family</h3>
                <button class="modal-close" onclick="hideGuideModal()" title="ƒê√≥ng">
                    <span>√ó</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="color-guide-simple">
                    <h3>üé® H∆∞·ªõng d·∫´n m√†u s·∫Øc nh·∫≠n d·∫°ng</h3>
                    
                    <div class="color-items">
                        <div class="color-row perfect">
                            <div class="color-indicator">
                                <span class="color-dot green"></span>
                                <span class="color-label">Xanh</span>
                            </div>
                            <div class="color-meaning">
                                <span class="status-text">Email gi·ªëng h·ªát nhau</span>
                                <span class="action-text">‚Üí An t√¢m, kh√¥ng c·∫ßn l√†m g√¨ üòå</span>
                            </div>
                        </div>
                        
                        <div class="color-row warning">
                            <div class="color-indicator">
                                <span class="color-dot yellow"></span>
                                <span class="color-label">V√†ng</span>
                            </div>
                            <div class="color-meaning">
                                <span class="status-text">Email g·∫ßn gi·ªëng nhau</span>
                                <span class="action-text">‚Üí C·∫ßn ki·ªÉm tra k·ªπ ph·∫ßn ƒë·ªè üßê</span>
                            </div>
                        </div>
                        
                        <div class="color-row error">
                            <div class="color-indicator">
                                <span class="color-dot red"></span>
                                <span class="color-label">ƒê·ªè</span>
                            </div>
                            <div class="color-meaning">
                                <span class="status-text">Email ho√†n to√†n kh√°c nhau</span>
                                <span class="action-text">‚Üí B·∫Øt bu·ªôc ph·∫£i s·ª≠a ngay üò±</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-tip">
                        üí° <strong>M·∫πo:</strong> Ch·ªâ c·∫ßn ch√∫ √Ω m√†u üü° v√† üî¥, b·ªè qua m√†u üü¢
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="versionBadge" class="version-badge">v0.0.2.5</div>
    <div id="toastContainer" class="toast-container">    </div>

    <!-- Delete Note Modal -->
        <div id="deleteNoteModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-icon">üóëÔ∏è</div>
                    <h3>X√≥a ghi ch√∫</h3>
                </div>
                <div class="modal-body">
                    <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ghi ch√∫ n√†y kh√¥ng?</p>
                    <p class="modal-warning">H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeDeleteModal()">H·ªßy</button>
                    <button class="btn btn-danger" onclick="confirmDeleteNote()">X√≥a</button>
                </div>
            </div>
        </div>
        
        <!-- Modern Notification System -->
        <div id="notificationContainer" class="notification-container"></div>
</body>
</html>